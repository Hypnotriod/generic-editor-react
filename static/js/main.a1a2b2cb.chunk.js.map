{"version":3,"sources":["store/tree/actionTypes.js","store/tree/actions.js","tools/treeTools.js","data/NodeData.js","components/preview/custom/CGrid.js","data/StoreData.js","data/DefaultStoreData.js","store/tree/reducer.js","data/MockStreData.js","store/properties/base/actionTypes.js","store/properties/base/actions.js","store/properties/base/reducer.js","store/properties/sprite/actionTypes.js","store/properties/sprite/actions.js","store/properties/sprite/reducer.js","store/entityTypes/actionTypes.js","store/entityTypes/actions.js","store/entityTypes/reducer.js","store/resources/actionTypes.js","store/resources/reducer.js","store/properties/graphics/actionTypes.js","store/properties/graphics/actions.js","store/properties/graphics/reducer.js","store/properties/nineSliceSprite/actionTypes.js","store/properties/nineSliceSprite/actions.js","store/properties/nineSliceSprite/reducer.js","store/properties/text/actionTypes.js","store/properties/text/actions.js","store/properties/text/reducer.js","store/index.js","tools/resourcesTools.js","middlewares/pixiLoaderMiddleware.js","tools/uidGenerator.js","components/header/features/common.js","VERSION.js","components/header/features/exportLogic.js","components/header/features/importLogic.js","components/header/ModalPopup.js","components/header/features/createNewProjectLogic.js","components/header/Header.js","store/resources/actions.js","tools/math.js","components/preview/custom/CContainer.js","components/preview/custom/CSprite.js","components/preview/custom/CGraphics.js","components/preview/custom/CNineSlicePlane.js","components/preview/custom/CText.js","components/preview/custom/createPixiTree.js","components/preview/MainScene.js","components/preview/PreviewPanel.js","components/properties/genericInputs/TextInput.js","components/properties/name/NameProperty.js","components/properties/genericInputs/NumberInput.js","components/properties/genericInputs/PointInput.js","components/properties/genericInputs/SelectorInput.js","components/properties/genericInputs/ColorInput.js","components/properties/genericInputs/TextureInput.js","components/properties/genericInputs/index.js","components/properties/genericInputs/ToggleInput.js","components/properties/base/BaseProperties.js","components/properties/ContainerEntity.js","components/properties/genericInputs/Size.js","components/properties/sprite/SpriteProperties.js","components/properties/SpriteEntity.js","components/properties/graphics/GraphicsTypeSelector.js","tools/color.js","components/properties/graphics/collection/CircleProperties.js","components/properties/graphics/collection/RectangleProperties.js","components/properties/graphics/collection/RoundedRectangleProperties.js","components/properties/graphics/GraphicsProperties.js","components/properties/GraphicsEntity.js","components/properties/nineSliceSprite/NineSliceSpriteProperties.js","components/properties/NineSliceSpriteEntity.js","components/properties/text/TextProperties.js","components/properties/TextEntity.js","components/properties/PropertiesPanel.js","components/resources/elements/ImageElement.js","components/resources/ResourcesPanel.js","components/optionsPopup/PopupWithOptions.js","components/resources/ResourcesOptionsPopup.js","tools/treeUITools.js","components/tree/Node.js","assets/icons/container.png","assets/icons/sprite.png","assets/icons/graphics.png","assets/icons/nine-slice-sprite.png","assets/icons/text.png","components/tree/Tree.js","components/tree/TreeController.js","components/tree/TreeOptionsPopup.js","components/transformTools/position/PositionGizmo.js","components/transformTools/scale/ScaleGizmo.js","services/DOMGizmoButtons.js","components/transformTools/rotation/RotationGizmo.js","components/transformTools/bounds/ElementBounds.js","components/transformTools/InteractiveTransformTools.js","services/ViewCameraController.js","services/ViewResizeController.js","services/ViewElementBounds.js","services/ViewGizmoPositionArrows.js","services/ViewGizmoRotation.js","services/ViewGizmoScaleBox.js","services/ViewTools.js","App.js","assets/icons/move.png","assets/icons/resize.png","assets/icons/rotate.png","index.js"],"names":["TREE_ACTIONS","Object","freeze","SET_SELECTED_NODE_ID","SET_COPY_NODE_ID","INSERT_BEFORE_NODE","MOVE_NODE","APPEND_NODE","UPDATE_NODE_NAME","DELETE_NODE","CREATE_NODE","IMPORT_TREE_DATA","setSelectedNodeIDAction","nodeID","type","payload","updateNodeNameAction","createNodeAction","parentID","id","referenceID","collectAllIds","tree","memo","arguments","length","undefined","push","nodes","forEach","node","getParent","childId","isParent","i","result","isChild","some","getNodeByID","nodeId","find","removeNode","filter","appendNode","targetNode","createNode","name","concat","GRID_GRAPHICS_DISPLAY_OBJECT_NAME","behavior","customDisplayObject","Container","customApplyProps","instance","_","_ref","cellSize","gridSize","color","lineWidth","onSelect","totalWidth","totalHeight","position","set","graphics","getChildByName","Graphics","addChild","clear","lineStyle","x","moveTo","lineTo","y","drawRect","endFill","interactive","hitArea","Rectangle","Number","MAX_SAFE_INTEGER","on","CGrid","CustomPIXIComponent","ENTITY_TYPES","MASK","HIT_AREA","CONTAINER","SPRITE","GRAPHICS","NINE_SLICE_SPRITE","TEXT","getEntityType","components","FONT_FAMILIES","ARIAL","ARIAL_BLACK","COMIC_SANS_MS","COURIER_NEW","GEORGIA","HELVETICA","IMPACT","TAHOMA","TIMES_NEW_ROMAN","VERDANA","FONT_STYLE","NORMAL","ITALIC","OBLIQUE","FONT_VARIANT","SMALL_CAPS","FONT_WEIGHT","BOLD","BOLDER","LIGHTER","WEIGHT_100","WEIGHT_200","WEIGHT_300","WEIGHT_400","WEIGHT_500","WEIGHT_600","WEIGHT_700","WEIGHT_800","WEIGHT_900","FONT_LINE_JOINT","MITER","ROUND","BEVEL","TEXT_ALIGN","LEFT","CENTER","RIGHT","TEXT_WHITE_SPACE","PRE","PRE_LINE","GRAPHICS_TYPES","RECTANGLE","ROUNDED_RECTANGLE","CIRCLE","baseGraphicsProps","alpha","getGraphicsProperties","width","height","cornerRadius","radius","Error","defaultStoreData","treeData","selectedNodeID","entitiesList","properties","base","visible","positionX","positionY","scaleX","scaleY","rotation","sprite","nineSliceSprite","text","STATE","processInsertBeforeNodeAction","state","newState","nodeData","parentNode","copy","splice","insertBefore","processUpdateNodeNameAction","childIndex","findIndex","child","changeNodeName","changeRootNodeName","BASE_PROPERTIES_ACTIONS","UPDATE_BASE_PROPERTIES","INIT_BASE_PROPERTIES","REMOVE_BASE_PROPERTIES","IMPORT_BASE_PROPERTIES","initBasePropertiesAction","updateBasePropertiesAction","SPRITE_PROPERTIES_ACTIONS","UPDATE_SPRITE_PROPERTIES","INIT_SPRITE_PROPERTIES","REMOVE_SPRITE_PROPERTIES","IMPORT_SPRITE_PROPERTIES","initSpritePropertiesAction","updateSpritePropertiesAction","ENTITY_TYPES_LIST_ACTIONS","INIT_ENTITY","REMOVE_ENTITY","IMPORT_ENTITY_DATA","initEntityAction","entityType","RESOURCE_ACTIONS","ADD_RESOURCES","REMOVE_RESOURCE","IMPORT_RESOURCES","GRAPHICS_PROPERTIES_ACTIONS","UPDATE_GRAPHICS_PROPERTIES","INIT_GRAPHICS_PROPERTIES","REMOVE_GRAPHICS_PROPERTIES","IMPORT_GRAPHICS_PROPERTIES","CHANGE_GRAPHICS_TYPE","updateGraphicsPropertiesAction","NINE_SLICE_SPRITE_PROPERTIES_ACTIONS","UPDATE_NINE_SLICE_SPRITE_PROPERTIES","INIT_NINE_SLICE_SPRITE_PROPERTIES","REMOVE_NINE_SLICE_SPRITE_PROPERTIES","IMPORT_NINE_SLICE_SPRITE_PROPERTIES","updateNineSliceSpritePropertiesAction","TEXT_PROPERTIES_ACTIONS","UPDATE_TEXT_PROPERTIES","INIT_TEXT_PROPERTIES","REMOVE_TEXT_PROPERTIES","IMPORT_TEXT_PROPERTIES","updateTextPropertiesAction","store","createStore","combineReducers","processSelectNodeIDAction","processCopyNodeIDAction","copyNodeID","processMoveNodeAction","processCreateNodeAction","processDeleteNodeNameAction","processImportTreeData","entityTypesList","basePropertiesList","newNodeProps","keys","k","_payload$k$visible","_payload$k$alpha","spritePropertiesList","anchorX","anchorY","resourceID","resourceName","nineSliceSpritePropertiesList","A","B","C","D","graphicsList","textPropertiesList","fill","fontFamily","fontStyle","fontVariant","fontWeight","fontSize","resourcesList","file","convertFileTo","onLoad","orError","err","console","error","reader","FileReader","onerror","onload","url","convertImageFileToBase64","createLoader","acceptFileTypes","isMultiple","onLoaded","input","document","createElement","setAttribute","onchange","event","files","target","values","createImagesLoader","base64ImageToFile","onComplete","mimeType","match","fetch","then","response","arrayBuffer","buffer","File","exportFile","content","fileName","contentType","a","Blob","href","URL","createObjectURL","download","click","exportJSONFile","stringifiedContent","pixiLoader","textureCache","utils","TextureCache","baseTextureCache","BaseTextureCache","loadAssets","assets","onFinish","convertImageFilesToBase64","cb","Array","isArray","convertedAssets","image","Image","src","baseTexture","BaseTexture","texture","Texture","addToCache","Promise","all","map","res","rej","catch","removeAssets","destroy","pixiLoaderMiddleware","UIDStore","getRndInteger","min","max","Math","floor","random","recordUsedUIDs","ids","getUID","convertResourcesRecursively","queue","strategy","shift","data","VERSION","FILE_TYPES","FILE_DESCRIPTION","FILE_NAMES","collectUsedResources","reduce","acc","exportData","callback","after","exportMainData","getState","JSON","stringify","meta","version","description","exportResourcesAsBase64","resourcesToExport","resources","exportUsedImages","usedFiles","zip","JSZip","_ref2","includes","Boolean","_ref3","generateAsync","exportZipFile","importMainDataInStrictOrder","actions","importTreeDataAction","importEntityDataAction","importBasePropertiesAction","importSpritePropertiesAction","importNineSliceSpritePropertiesAction","importGraphicsPropertiesAction","importTextPropertiesAction","parseAndImportFiles","convertJSONFilesToText","convertedFiles","importResources","resourcesDataFile","onResourcesConverted","convertedResources","importResourcesAction","entries","parse","importMainFile","mainDataFile","importData","ModalPopup","props","_jsx","className","isVisible","children","_jsxs","onClick","onClose","onConfirm","onReject","createNewProject","cleanUpUsedUIDsMap","key","cloneDeep","Header","connect","isModalVisible","setModalVisibility","useState","exportDataAndCreateNew","toRadians","degrees","PI","oldProps","newProps","scale","String","CContainer","Sprite","anchor","CSprite","beginFill","drawCircle","drawRoundedRect","CGraphics","wrapper","nineSlicePlane","mesh","NineSlicePlane","leftWidth","topHeight","rightWidth","bottomHeight","pivot","CNineSlicePlane","Text","baseProps","textProps","style","CText","createPixiTree","dependencies","entity","spriteProps","resource","from","EMPTY","graphicsProps","nineSliceProps","MainScene","_Fragment","PreviewPanel","services","cameraData","setCameraData","useEffect","handleResizeUpdate","size","app","stage","resize","activate","off","deactivate","handleCameraUpdate","camera","TextInput","forwardRef","ref","label","value","onChange","dataID","onBlur","e","middleware","inputRef","useRef","useImperativeHandle","focus","current","select","INVALID_NAME","NameProperty","isInvalid","nameInputRef","setTimeout","typeCapitalize","slice","toLowerCase","trim","NumberInput","step","MIN_SAFE_INTEGER","sign","isShiftPressed","setShiftPressed","onKeyPressedReleased","shiftKey","onKeyDown","onKeyUp","parseNumberMiddleware","PointInput","dataIDs","signs","onInputChange","SelectorInput","selected","options","option","ColorInput","TextureInput","onDragLeave","classList","remove","disabled","onDragOver","preventDefault","onDragEnter","add","onDrop","window","getAttribute","parsedValue","parseFloat","isNaN","negativeNumbersMiddleware","abs","ToggleInput","checked","BaseProperties","baseProperty","alphaData","positionData","scaleData","gridData","angleData","onVisibilityToggled","ContainerEntity","Size","SpriteProperties","textureData","onTextureAdded","textureSize","anchorData","SpriteEntity","GraphicsTypeSelector","changeGraphicsTypeAction","convertColorFormat","startsWith","substring","CircleProperties","radiusData","colorData","onColorChange","RectangleProperties","sizeData","RoundedRectangleProperties","cornersData","COMPONENTS_MAP","GraphicsProperties","GraphicsEntity","NineSliceSpriteProperties","spriteProperties","cornersABData","cornersCDData","NineSliceSpriteEntity","TextProperties","hasStroke","stroke","strokeThickness","miterLimit","lineJoin","dropShadow","dropShadowAlpha","dropShadowAngle","dropShadowBlur","dropShadowColor","dropShadowDistance","wordWrap","breakWords","leading","lineHeight","wordWrapWidth","align","whiteSpace","textData","fontFamilyData","fontStyleData","fontVariantData","fontWeightData","fontSizeData","onStrokeToggled","isStroke","showStrokeProperties","strokeColorData","strokeLineJoinData","strokeThicknessData","strokeMiterLimitData","onShadowToggled","isShadow","showShadowProperties","dropShadowColorData","dropShadowAlphaData","dropShadowAngleData","dropShadowBlurData","dropShadowDistanceData","onMultiLineToggled","isMultiLine","showMultiLineProperties","breakWordsData","alignData","whiteSpaceData","wordWrapWidthData","lineHeightData","leadingData","TextEntity","ENTITY_TYPES_TO_COMPONENTS_MAP","checker","isContainerEntity","component","isSpriteEntity","isGraphicsEntity","isNineSliceSpriteEntity","isTextEntity","PropertiesPanel","marginTop","ImageElement","parsedResource","setParsedResource","proxy","replace","draggable","onDragStart","backgroundImage","ResourcesPanel","PopupWithOptions","setPosition","top","left","setData","hoveredElement","mousePosition","popupRef","addEventListener","onContextmenu","removeEventListener","onMouseleave","offsetWidth","offsetHeight","offsetX","innerWidth","offsetY","innerHeight","useCallback","canProcessContextMenu","clientX","clientY","canProcessClick","processClick","display","optionsMap","params","index","isAvailable","OPTIONS_MAP","ResourcesOptionsPopup","addResourceAction","removeResourceAction","canShowRemoveOption","parseInt","NaN","dataType","exportImageFile","isInside","bounds","PositionsInTheBox","TOP","BOTTOM","NODE_DATA_TYPE_ATTRIBUTE","ICONS_TO_ENTITIES_MAP","Node","collapsed","setCollapsed","includesSelectedNodeID","n","nodesList","toggler","iconStyle","frameStyle","backgroundColor","Tree","treeState","UI_CLASS_NAMES","resetStyles","nodeElement","TreeController","moveNodeAction","insertBeforeNodeAction","draggedNodeData","targetNodeData","hoverNodeElement","insertPosition","handleDragEnd","hoveredNodeData","getPositionInTheBox","center","getBoundingClientRect","onDragEnd","newID","hasAttribute","selectedID","CLONE_OPTION","COPY_OPTION","PASTE_OPTION","REMOVE_OPTION","TreeOptionsPopup","setCopyNodeIDAction","deleteNodeAction","removeEntityAction","removeBasePropertiesAction","removeSpritePropertiesAction","initGraphicsPropertiesAction","removeGraphicsPropertiesAction","initNineSliceSpritePropertiesAction","removeNineSliceSpritePropertiesAction","initTextPropertiesAction","removeTextPropertiesAction","isNotRootNode","hasCopiedNodeId","cloneNode","parentNodeId","offset","newNodeIds","baseProperties","PositionGizmo","gizmoPositionArrows","view","removeChild","element","pixiTools","getChildRelativePosition","setRotation","getGlobalRotation","setElementRotation","show","onMoved","dx","dy","applyScale","round","hide","ScaleGizmo","gizmoScaleBox","DOM_GIZMO_BUTTON_TYPES","DOMGizmoButtons","constructor","buttons","this","_buttons","move","rotate","_onButtonClick","_currentActiveMethod","_processClick","bind","onButtonClicked","button","RotationGizmo","gizmoRotation","angle","ElementBounds","elementBounds","adjustBounds","getScale","METHODS_TO_GIZMO_MAP","InteractiveTransformTools","transformMethod","setTransformMethod","gizmoButtons","Provider","ViewCameraController","EventEmitter","canvas","ticker","scaleBounds","super","_canvas","_ticker","_scale","_needUpdate","_isClicked","_cameraPosition","_mouseOldPosition","_cameraScale","_onMouseLeave","_onMouseDown","_onMouseMove","_onMouseUp","_onWheel","_update","resetCamera","cursor","emit","ctrlKey","zoomDirection","wheelDelta","previousCameraScale","canvasRect","newScale","clamp","scaleDiff","ViewResizeController","canvasContainer","renderer","_renderer","_canvasContainer","_designSize","_observer","ResizeObserver","observe","unobserve","newSizes","containerHeight","containerWidth","gameSize","ViewElementBounds","_bounds","point","cameraScale","_localBoundsRect","MOVE_DIRECTIONS","ViewGizmoPositionArrows","arrowSize","_yAxisArrow","drawPolygon","_xAxisArrow","segmentColors","_center","positions","_axisHitBoxes","Circle","_targetAxis","_oldMousePosition","_offset","_elementRotation","interactiveChildren","_needToUpdate","_onMoved","getLocalPosition","axisName","contains","global","tan","ViewGizmoRotation","_innerRadius","_outerRadius","arc","_segmentStartAngle","_fillSegment","_deltaAngle","_oldAngle","hypot","atan2","segmentEndAngle","ViewGizmoScaleBox","pointerSize","DisplayObject","prototype","j","newParentElement","globalPosition","toGlobal","Point","toLocal","globalRotation","parentContainer","parent","App","setServices","canvasRef","canvasContainerRef","bottomPanel","bottomSplitBarRef","isSplitBottomDragActive","setSplitBottomDragActive","Application","onSplitBottomDrag","onMouseUp","onMouseMove","Stage","onMouseDown","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"mgBAAO,MAAMA,EAAeC,OAAOC,OAAO,CACtCC,qBAAsB,uBACtBC,iBAAkB,mBAElBC,mBAAoB,qBACpBC,UAAW,YACXC,YAAa,cAGbC,iBAAkB,mBAClBC,YAAa,cACbC,YAAa,cAEbC,iBAAkB,qBCPTC,EAA2BC,IAC7B,CAAEC,KAAMd,EAAaG,qBAAsBY,QAASF,IAmDlDG,EAAwBD,IAC1B,CAAED,KAAMd,EAAaQ,iBAAkBO,YAgBrCE,EAAmBA,CAACC,EAAUC,KAChC,CAAEL,KAAMd,EAAaU,YAAaK,QAAS,CAAEF,OAAQM,EAAIC,YAAaF,KCvEpEG,EAAgB,SAACC,GAAqB,IAAfC,EAAIC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAKvC,OAHAD,EAAKI,KAAKL,EAAKH,IACfG,EAAKM,MAAMC,SAASC,GAAST,EAAcS,EAAMP,KAE1CA,CACX,EAQaQ,EAAY,SAAUC,EAASV,GAExC,GAAIW,EAASD,EAASV,GAClB,OAAOA,EAGX,IAAK,IAAIY,EAAI,EAAGA,EAAIZ,EAAKM,MAAMH,OAAQS,IAAK,CACxC,MAAMC,EAASJ,EAAUC,EAASV,EAAKM,MAAMM,IAC7C,GAAIC,EACA,OAAOA,CAEf,CAEA,OAAO,IACX,EASaC,EAAU,SAAUJ,EAASF,GACtC,GAAIA,EAAKF,MAAMS,MAAKP,GAAQA,EAAKX,KAAOa,IACpC,OAAO,EAEX,IAAK,IAAIE,EAAI,EAAGA,EAAIJ,EAAKF,MAAMH,OAAQS,IACnC,GAAIE,EAAQJ,EAASF,EAAKF,MAAMM,IAC5B,OAAO,EAIf,OAAO,CACX,EAQaD,EAAW,SAAUD,EAASF,GACvC,OAAOA,EAAKF,MAAMS,MAAKP,GAAQA,EAAKX,KAAOa,GAC/C,EAOaM,EAAc,SAAUC,EAAQjB,GAEzC,GAAIA,EAAKH,KAAOoB,EACZ,OAAOjB,EAGX,MAAMa,EAASb,EAAKM,MAAMY,MAAKV,GAAQA,EAAKX,KAAOoB,IACnD,GAAIJ,EACA,OAAOA,EAGX,IAAK,IAAID,EAAI,EAAGA,EAAIZ,EAAKM,MAAMH,OAAQS,IAAK,CACxC,MAAMC,EAASG,EAAYC,EAAQjB,EAAKM,MAAMM,IAC9C,GAAIC,EACA,OAAOA,CAEf,CAEA,OAAO,IACX,EAQaM,EAAa,SAAUF,EAAQjB,GAExC,GAAIW,EAASM,EAAQjB,GAEjB,OADAA,EAAKM,MAAQN,EAAKM,MAAMc,QAAOZ,GAAQA,EAAKX,KAAOoB,KAC5C,EAGX,IAAK,IAAIL,EAAI,EAAGA,EAAIZ,EAAKM,MAAMH,OAAQS,IAAK,CACxC,MAAMC,EAASM,EAAWF,EAAQjB,EAAKM,MAAMM,IAC7C,GAAIC,EACA,OAAOA,CAEf,CAEA,OAAO,CACX,EASaQ,EAAa,SAAUb,EAAMV,EAAaE,GACnD,MAAMsB,EAAaN,EAAYlB,EAAaE,GAE5C,QAAIsB,IACAA,EAAWhB,MAAQ,IAAIgB,EAAWhB,MAAOE,IAClC,EAIf,ECpHae,EAAa,SAAC1B,GACvB,MAAO,CACHA,GAAIA,EACJ2B,KAH2BtB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,WAAAuB,OAAW5B,GAItCS,MAJiDJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAM5D,ECdawB,EAAoC,kBAEpCC,EAAW,CACpBC,oBAAqBA,IAAM,IAAIC,YAC/BC,iBAAkBA,CAACC,EAAUC,EAACC,KAA8D,IAA5D,GAAEpC,EAAE,SAAEqC,EAAQ,SAAEC,EAAQ,MAAEC,EAAK,UAAEC,EAAS,SAAEC,GAAUL,OAKjE7B,IAAb8B,IAA0BA,EAXL,SAYR9B,IAAb+B,IAA0BA,EAXL,KAazB,MAAMI,EAAaL,EAAWC,EACxBK,EAAcN,EAAWC,EAE/BJ,EAASP,KAAO3B,EAChBkC,EAASU,SAASC,KAAKH,EAAa,GAAIC,EAAc,GAEtD,IAAIG,EAAWZ,EAASa,eAAelB,GAClCiB,IACDA,EAAW,IAAIE,WACfF,EAASnB,KAAOE,EAChBK,EAASe,SAASH,IAGtBA,EAASI,QAGTJ,EAASK,UAAUX,EAAWD,GAE9B,IAAK,IAAIa,EAAI,EAAGA,EAAId,EAAUc,IACtBA,IAAMd,EAAW,IACrBQ,EAASO,OAAOD,EAAIf,EAAU,GAC9BS,EAASQ,OAAOF,EAAIf,EAAUK,IAGlC,IAAK,IAAIa,EAAI,EAAGA,EAAIjB,EAAUiB,IACtBA,IAAMjB,EAAW,IACrBQ,EAASO,OAAO,EAAGE,EAAIlB,GACvBS,EAASQ,OAAOX,EAAaY,EAAIlB,IAIrCS,EAASK,UAAUX,EAAW,OAC9BM,EAASO,OAAOX,EAAa,EAAG,GAChCI,EAASQ,OAAOZ,EAAa,EAAGC,GAGhCG,EAASO,OAAO,EAAGV,EAAc,GACjCG,EAASQ,OAAOZ,EAAYC,EAAc,GAG1CG,EAASU,SAAS,EAAG,EAAGd,EAAYC,GACpCG,EAASW,UAEJX,EAASY,cACVZ,EAASa,QAAU,IAAIC,aAAWC,OAAOC,iBAAmB,GAAID,OAAOC,iBAAmB,EAAGD,OAAOC,iBAAkBD,OAAOC,kBAC7HhB,EAASY,aAAc,EACvBZ,EAASiB,GAAG,aAAa,KACrBtB,EAAS,KAAK,QACf,GACP,GAGKuB,EAAQC,8BAAoBnC,EAAU,SC9DtCoC,GALuBpF,OAAOC,OAAO,CAC9CoF,KAAM,OACNC,SAAU,aAGctF,OAAOC,OAAO,CACtCsF,UAAW,YACXC,OAAQ,SACRC,SAAU,WACVC,kBAAmB,oBACnBC,KAAM,UAmBGC,EAAgB,SAAC/E,GAC1B,MAAO,CACHA,OACAgF,WAHsCtE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAKjD,EAwDauE,EAAgB9F,OAAOC,OAAO,CACvC8F,MAAO,QACPC,YAAa,cACbC,cAAe,gBACfC,YAAa,cACbC,QAAS,UACTC,UAAW,YACXC,OAAQ,SACRC,OAAQ,SACRC,gBAAiB,kBACjBC,QAAS,YAGAC,EAAazG,OAAOC,OAAO,CACpCyG,OAAQ,SACRC,OAAQ,SACRC,QAAS,YAGAC,EAAe7G,OAAOC,OAAO,CACtCyG,OAAQ,SACRI,WAAY,eAGHC,EAAc/G,OAAOC,OAAO,CACrCyG,OAAQ,SACRM,KAAM,OACNC,OAAQ,SACRC,QAAS,UACTC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,IACZC,WAAY,MAGHC,EAAkB5H,OAAOC,OAAO,CACzC4H,MAAO,QACPC,MAAO,QACPC,MAAO,UAGEC,EAAahI,OAAOC,OAAO,CACpCgI,KAAM,OACNC,OAAQ,SACRC,MAAO,UAGEC,EAAmBpI,OAAOC,OAAO,CAC1CyG,OAAQ,SACR2B,IAAK,MACLC,SAAU,aA6DDC,EAAiBvI,OAAOC,OAAO,CACxCuI,UAAW,YACXC,kBAAmB,oBACnBC,OAAQ,WAgCNC,EAAoB,CACtBrE,EAAG,EACHG,EAAG,EACHhB,MAAO,WACPmF,MAAO,GAuCEC,EAAyBhI,IAClC,GAAIA,IAAS0H,EAAeC,UAAa,MAjClC,CACHM,MAAO,IACPC,OAAQ,OACLJ,GA+BP,GAAI9H,IAAS0H,EAAeE,kBAAqB,MAvB1C,CACHK,MAAO,IACPC,OAAQ,IACRC,aAAc,MACXL,GAoBP,GAAI9H,IAAS0H,EAAeG,OAAU,MAZ/B,CACHO,OAAQ,MACLN,GAWP,MAAM,IAAIO,MAAM,+BAAiCrI,EAAK,EC3R7CsI,EAAmB,CAC5B9H,KAAM,CACF+H,SAAUxG,EDVU,ECUe,QAAS,IAC5CyG,eAAgB,MAEpBC,aAAc,CACV,EAAgB1D,EAAcR,EAAaG,UAAW,KAE1DgE,WAAY,CACRC,KAAM,CACF,EAAgB,CDwCpBC,SAAS,EACTb,MAAO,EACPc,UAAW,EACXC,UAAW,EACXC,OAAQ,EACRC,OAAQ,EACRC,SAAU,EACVvG,cAAU9B,EACV+B,cAAU/B,EChDoC8B,SFdrB,GEckDC,SFblD,MEezBuG,OAAQ,CAAC,EACTC,gBAAiB,CAAC,EAClBhG,SAAU,CAAC,EACXiG,KAAM,CAAC,ICNTC,GCZYtH,EHLU,EGKe,QAAS,CACxCA,EAAW,IAAK,SAAU,CACtBA,EAAW,IAAK,aAAc,MAElCA,EAAW,IAAK,SAAU,MAOdgD,EAAcR,EAAaG,UAAW,IAC/CK,EAAcR,EAAaG,UAAW,IACtCK,EAAcR,EAAaG,UAAW,IACtCK,EAAcR,EAAaI,OAAQ,IDFpC2D,EAAiB9H,MASzB8I,EAAgCA,CAACC,EAAOtJ,KAC1C,MAAMsI,EAAW,IAAKgB,EAAMhB,UACtBiB,EAAW,IAAKD,EAAOhB,YAE7B,IAAK5G,EAAW1B,EAAQwJ,SAASpJ,GAAImJ,EAASjB,UAC1C,MAAM,IAAIF,MAAM,kCAADpG,OAAmChC,EAAQK,YAAW,2BAIzE,OLwGwB,SAAUU,EAAMV,EAAaE,GACrD,MAAMkJ,EAAazI,EAAUX,EAAaE,GAE1C,GAAIkJ,EACA,IAAK,IAAItI,EAAI,EAAGA,EAAIsI,EAAW5I,MAAMH,OAAQS,IAAK,CAC9C,GAAIsI,EAAW5I,MAAMM,GAAGf,KAAOC,EAC3B,SAEJ,MAAMqJ,EAAO,IAAID,EAAW5I,OAI5B,OAHA6I,EAAKC,OAAOxI,EAAG,EAAGJ,GAClB0I,EAAW5I,MAAQ6I,GAEZ,CACX,CAIR,CK1HIE,CAAa5J,EAAQwJ,SAAUxJ,EAAQK,YAAakJ,EAASjB,UACtDiB,CAAQ,EAiDbM,EAA8BA,CAACP,EAAOtJ,KACxC,MAAMsI,EAAW,IAAKgB,EAAMhB,UACtBiB,EAAW,IAAKD,EAAOhB,YAE7B,IL8F0B,SAAU/H,EAAMF,EAAa0B,GAEvD,MAAM0H,EAAazI,EAAUX,EAAaE,GAC1C,IAAKkJ,EACD,OAAO,EAGX,MAAMK,EAAaL,EAAW5I,MAAMkJ,WAAWC,GAAUA,EAAM5J,KAAOC,IAChE2J,EAAQ,IAAKP,EAAW5I,MAAMiJ,GAAa/H,QAGjD,OAFA0H,EAAW5I,MAAM8I,OAAOG,EAAY,EAAGE,IAEhC,CACX,CK1GSC,CAAeV,EAASjB,SAAUtI,EAAQF,OAAQE,EAAQ+B,QL6EhChB,EK3EHwI,EAASjB,SL2EAvG,EK3EU/B,EAAQ+B,ML4ElDhB,IAGLA,EAAKgB,KAAOA,EACL,IK/EC,MAAM,IAAIqG,MAAM,mDAADpG,OAAoDhC,EAAQK,YAAW,ML0EhE6J,IAACnJ,EAAMgB,EKvErC,OAAOwH,CAAQ,EE9FNY,EAA0BjL,OAAOC,OAAO,CACjDiL,uBAAwB,yBACxBC,qBAAsB,uBACtBC,uBAAwB,yBACxBC,uBAAwB,2BCCfC,EAA4BpK,IAC9B,CAAEL,KAAMoK,EAAwBE,qBAAsBrK,QAAS,CAAEF,OAAQM,KAavEqK,EAA8BzK,IAChC,CAAED,KAAMoK,EAAwBC,uBAAwBpK,YCC7DoJ,EAAQf,EAAiBI,WAAWC,KCrB7BgC,EAA4BxL,OAAOC,OAAO,CACnDwL,yBAA0B,2BAC1BC,uBAAwB,yBACxBC,yBAA0B,2BAC1BC,yBAA0B,6BCCjBC,EAA8B3K,IAChC,CAAEL,KAAM2K,EAA0BE,uBAAwB5K,QAAS,CAAEF,OAAQM,KAa3E4K,EAAgChL,IAClC,CAAED,KAAM2K,EAA0BC,yBAA0B3K,YCDjEoJ,EAAQf,EAAiBI,WAAWQ,OCnB7BgC,EAA4B/L,OAAOC,OAAO,CACnD+L,YAAa,cACbC,cAAe,gBACfC,mBAAoB,uBCKXC,EAAmBA,CAACjL,EAAIkL,KAC1B,CAACvL,KAAMkL,EAA0BC,YAAalL,QAAS,CAACF,OAAQM,EAAIkL,gBCQzElC,EAAQf,EAAiBG,aCjBlB+C,EAAmBrM,OAAOC,OAAO,CAC1CqM,cAAe,gBACfC,gBAAiB,kBACjBC,iBAAkB,qBCMhBtC,GAAQ,CAAC,ECTFuC,GAA8BzM,OAAOC,OAAO,CACrDyM,2BAA4B,6BAC5BC,yBAA0B,2BAC1BC,2BAA4B,6BAC5BC,2BAA4B,6BAC5BC,qBAAsB,yBCgBbC,GAAkCjM,IACpC,CAAED,KAAM4L,GAA4BC,2BAA4B5L,YC4BrEoJ,GAAQf,EAAiBI,WAAWvF,SClD7BgJ,GAAuChN,OAAOC,OAAO,CAC9DgN,oCAAqC,sCACrCC,kCAAmC,oCACnCC,oCAAqC,sCACrCC,oCAAqC,wCCe5BC,GAAyCvM,IAC3C,CAAED,KAAMmM,GAAqCC,oCAAqCnM,YCHvFoJ,GAAQf,EAAiBI,WAAWS,gBCjB7BsD,GAA0BtN,OAAOC,OAAO,CACjDsN,uBAAwB,yBACxBC,qBAAsB,uBACtBC,uBAAwB,yBACxBC,uBAAwB,2BCefC,GAA8B7M,IAChC,CAAED,KAAMyM,GAAwBC,uBAAwBzM,YCF7DoJ,GAAQf,EAAiBI,WAAWU,KCYpC2D,GAAQC,YAAYC,YAAgB,CAEtCzM,KtBsGuB,WAAuC,IAAtC+I,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,GAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxD,OAAQZ,GACJ,KAAKd,EAAaG,qBACd,MA3EsB6N,EAAC3D,EAAOtJ,KACrB,IAAKsJ,EAAOf,eAAgBvI,IA0E9BiN,CAA0B3D,EAAOtJ,GAE5C,KAAKf,EAAaI,iBACd,MAnEoB6N,EAAC5D,EAAOtJ,KACnB,IAAKsJ,EAAO6D,WAAYnN,IAkE1BkN,CAAwB5D,EAAOtJ,GAE1C,KAAKf,EAAaK,mBACd,OAAO+J,EAA8BC,EAAOtJ,GAEhD,KAAKf,EAAaM,UACd,MAtGkB6N,EAAC9D,EAAOtJ,KAClC,MAAMsI,EAAW,IAAKgB,EAAMhB,UACtBiB,EAAW,IAAKD,EAAOhB,YAE7B,IAAK5G,EAAW1B,EAAQwJ,SAASpJ,GAAImJ,EAASjB,UAC1C,MAAM,IAAIF,MAAM,kCAADpG,OAAmChC,EAAQK,YAAW,2BAIzE,OADAuB,EAAW5B,EAAQwJ,SAAUxJ,EAAQK,YAAakJ,EAASjB,UACpDiB,CAAQ,EA6FA6D,CAAsB9D,EAAOtJ,GAExC,KAAKf,EAAaO,YAAa,OAAO8J,EAEtC,KAAKrK,EAAaQ,iBACd,OAAOoK,EAA4BP,EAAOtJ,GAE9C,KAAKf,EAAaU,YACd,MAvCoB0N,EAAC/D,EAAOtJ,KACpC,MAAMsI,EAAW,IAAKgB,EAAMhB,UACtBiB,EAAW,IAAKD,EAAOhB,YAI7B,OAFA1G,EAAWE,EAAW9B,EAAQF,QAASE,EAAQK,YAAakJ,EAASjB,UAE9DiB,CAAQ,EAiCA8D,CAAwB/D,EAAOtJ,GAE1C,KAAKf,EAAaS,YACd,MA5DwB4N,EAAChE,EAAOtJ,KACxC,MAAMsI,EAAW,IAAKgB,EAAMhB,UAEtBiB,EAAW,IACVD,EACHhB,WAGAC,eAAgBvI,EAAQF,SAAWwJ,EAAMf,eAAiB,KAAOe,EAAMf,eACvE4E,WAAYnN,EAAQF,SAAWwJ,EAAM6D,WAAa,KAAO7D,EAAM6D,YAGnE,IAAKzL,EAAW1B,EAAQF,OAAQyJ,EAASjB,UACrC,MAAM,IAAIF,MAAM,kCAADpG,OAAmChC,EAAQK,YAAW,2BAEzE,OAAOkJ,CAAQ,EA6CA+D,CAA4BhE,EAAOtJ,GAE9C,KAAKf,EAAaW,iBACd,MApCkB2N,EAACjE,EAAOtJ,KAC3B,IAAKA,IAmCGuN,CAAsBjE,EAAOtJ,GAExC,QAAS,OAAOsJ,EAExB,EsBlIIkE,gBZRkC,WAAuC,IAAtClE,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,GAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAEnE,GAAIZ,IAASkL,EAA0BC,YACnC,MAAO,IAAK5B,EAAO,CAACtJ,EAAQF,QAASgF,EAAc9E,EAAQsL,WAAY,KAEtE,GAAIvL,IAASkL,EAA0BG,mBACxC,MAAO,IAAKpL,GAEX,GAAID,IAASkL,EAA0BE,cAAe,CACvD,MAAM5B,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CAeI,OAAOD,CAEf,EYnBImE,mBlBNqC,WAAuC,IAAtCnE,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,GAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACtE,GAAIZ,IAASoK,EAAwBE,qBAAsB,CAEvD,MADiB,IAAKf,EAAO,CAACtJ,EAAQF,QNyBnC,CACH6I,SAAS,EACTb,MAAO,EACPc,UAAW,EACXC,UAAW,EACXC,OAAQ,EACRC,OAAQ,EACRC,SAAU,EACVvG,cAAU9B,EACV+B,cAAU/B,GMhCd,CAEK,GAAIZ,IAASoK,EAAwBG,uBAAwB,CAC9D,MAAMf,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CAEK,GAAIxJ,IAASoK,EAAwBC,uBAAwB,CAC9D,MAAM,OAAEtK,EAAM,WAAE2I,GAAezI,EACzBuJ,EAAW,IAAKD,GAChBoE,EAAe,IAAKnE,EAASzJ,MAAY2I,GAE/C,OADAc,EAASzJ,GAAU4N,EACZnE,CACX,CAEK,OAAIxJ,IAASoK,EAAwBI,wBACtCrL,OAAOyO,KAAK3N,GAASc,SAAQ8M,IAAM,IAADC,EAAAC,EAC9B9N,EAAQ4N,GAAGjF,QAA4B,QAArBkF,EAAG7N,EAAQ4N,GAAGjF,eAAO,IAAAkF,KACvC7N,EAAQ4N,GAAG9F,MAAwB,QAAnBgG,EAAG9N,EAAQ4N,GAAG9F,aAAK,IAAAgG,IAAI,CAAC,IAErC,IAAK9N,IAGLsJ,CAEf,EkBtBIyE,qBfVuC,WAAuC,IAAtCzE,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,GAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxE,GAAIZ,IAAS2K,EAA0BE,uBAAwB,CAE3D,MADiB,IAAKtB,EAAO,CAACtJ,EAAQF,QTqDnC,CACHkO,QAAS,EACTC,QAAS,EACTC,WAAY,KACZC,aAAc,MSvDlB,CACK,GAAIpO,IAAS2K,EAA0BG,yBAA0B,CAClE,MAAMtB,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CACK,GAAIxJ,IAAS2K,EAA0BC,yBAA0B,CAClE,MAAM,OAAE7K,EAAM,WAAE2I,GAAezI,EACzBuJ,EAAW,IAAKD,GAChBoE,EAAe,IAAKnE,EAASzJ,MAAY2I,GAE/C,OADAc,EAASzJ,GAAU4N,EACZnE,CACX,CACK,OAAIxJ,IAAS2K,EAA0BI,yBACjC,IAAK9K,GAGLsJ,CAGf,EeZI8E,8BJdgD,WAAuC,IAAtC9E,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,IAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACjF,GAAIZ,IAASmM,GAAqCE,kCAC9C,MAAO,IAAK9C,EAAO,CAACtJ,EAAQF,QpB8RzB,CACHuO,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHR,QAAS,EACTC,QAAS,EACTjG,MAAO,GACPC,OAAQ,GACRiG,WAAY,OoBrSX,GAAInO,IAASmM,GAAqCG,oCAAqC,CACxF,MAAM9C,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CACK,GAAIxJ,IAASmM,GAAqCC,oCAAqC,CACxF,MAAM,OAAErM,EAAM,WAAE2I,GAAezI,EACzBuJ,EAAW,IAAKD,GAChBoE,EAAe,IAAKnE,EAASzJ,MAAY2I,GAE/C,OADAc,EAASzJ,GAAU4N,EACZnE,CACX,CACK,OAAIxJ,IAASmM,GAAqCI,oCAC5C,IAAKtM,GAGLsJ,CAGf,EIPImF,aPiByC,WAAuC,IAAtCnF,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,IAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC1E,GAAIZ,IAAS4L,GAA4BE,yBACrC,MAAO,IAAKvC,EAAO,CAACtJ,EAAQF,QAAS,CAAEC,KAAMC,EAAQD,QAASgI,EAAsB/H,EAAQD,QAE3F,GAAIA,IAAS4L,GAA4BK,qBAE1C,MAAO,IAAK1C,EAAO,CAACtJ,EAAQF,QAAS,CAAEC,KAAMC,EAAQD,QAASgI,EAAsB/H,EAAQD,QAE3F,GAAIA,IAAS4L,GAA4BG,2BAA4B,CACtE,MAAMvC,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CAEK,GAAIxJ,IAAS4L,GAA4BC,2BAA4B,CACtE,MAAM,OAAE9L,EAAM,WAAE2I,GAAezI,EACzBuJ,EAAW,IAAKD,GAChBoE,EAAe,IAAKnE,EAASzJ,MAAY2I,GAE/C,OADAc,EAASzJ,GAAU4N,EACZnE,CACX,CAEK,OAAIxJ,IAAS4L,GAA4BI,2BACnC,IAAK/L,GAGLsJ,CAEf,EO3CIoF,mBDjBqC,WAAuC,IAAtCpF,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,IAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACtE,GAAIZ,IAASyM,GAAwBE,qBACjC,MAAO,IAAKpD,EAAO,CAACtJ,EAAQF,QvBqKzB,CACHkO,QAAS,EACTC,QAAS,EACT9E,KAAM,UACNwF,KAAM,UACNC,WAAY5J,EAAcC,MAC1B4J,UAAWlJ,EAAWC,OACtBkJ,YAAa/I,EAAaH,OAC1BmJ,WAAY9I,EAAYL,OACxBoJ,SAAU,KuB5KT,GAAIjP,IAASyM,GAAwBG,uBAAwB,CAC9D,MAAMpD,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQF,QACjByJ,CACX,CACK,GAAIxJ,IAASyM,GAAwBC,uBAAwB,CAC9D,MAAMlD,EAAW,IAAKD,GAEtB,OADAC,EAASvJ,EAAQF,QAAUE,EAAQyI,WAC5Bc,CACX,CACK,OAAIxJ,IAASyM,GAAwBI,uBAC/B,IAAK5M,GAGLsJ,CAEf,ECDI2F,cV7BgC,WAAuC,IAAtC3F,EAAK7I,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2I,IAAO,KAAErJ,EAAI,QAAEC,GAASS,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACjE,GAAIZ,IAASwL,EAAiBC,cAAe,CACzC,MAAMjC,EAAW,IAAKD,GAEtB,OADAtJ,EAAQc,SAAQ0B,IAAA,IAAC,GAAEpC,EAAE,KAAE8O,GAAM1M,EAAA,OAAK+G,EAASnJ,GAAM8O,CAAI,IAC9C3F,CACX,CAEK,GAAIxJ,IAASwL,EAAiBE,gBAAiB,CAChD,MAAMlC,EAAW,IAAKD,GAEtB,cADOC,EAASvJ,EAAQI,IACjBmJ,CACX,CAEK,OAAIxJ,IAASwL,EAAiBG,iBACxB,IAAK1L,GAILsJ,CAEf,KUYewD,UCvCf,MAAMqC,GAAgB,SAACD,EAAMnP,EAAMqP,GAAmD,IAA3CC,EAAO5O,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAI6O,GAAQC,QAAQC,MAAMF,GACxE,MAAMG,EAAS,IAAIC,WACnBD,EAAOE,QAAUN,EACjBI,EAAOG,OAAS,IAAMR,EAAO,CAAErN,KAAMmN,EAAKnN,KAAM8N,IAAKJ,EAAOrO,SAE5DqO,EADwB,WAAT1P,EAAoB,gBAAkB,cACtCmP,EACnB,EAuBaY,GAA2BA,CAACZ,EAAME,KAC3CD,GAAcD,EAAM,SAAUE,EAAO,EAkCnCW,GAAeA,CAACC,EAAiBC,EAAYC,KAC/C,MAAMC,EAAQC,SAASC,cAAc,SAQrC,OAPAF,EAAMG,aAAa,OAAQ,QAC3BH,EAAMG,aAAa,SAAUN,GAC7BG,EAAMG,aAAa,WAAYL,GAC/BE,EAAMI,SAAYC,IACd,MAAMC,EAAQD,EAAME,OAAOD,MAAQvR,OAAOyR,OAAOH,EAAME,OAAOD,OAAS,GACvEP,EAASO,EAAM,EAEZN,CAAK,EAQHS,GAAsBV,GACxBH,GAAa,oCAAoC,EAAMG,GAiBrDW,GAAoBA,CAAArO,EAAgBsO,KAAgB,IAA/B,KAAE/O,EAAI,IAAE8N,GAAKrN,EAC3C,MAAMuO,EAAWlB,EAAImB,MAAM,WAAW,GACtCC,MAAMpB,GACDqB,MAAMC,GAAaA,EAASC,gBAC5BF,MAAMG,GAAW,IAAIC,KAAK,CAACD,GAAStP,EAAM,CAAEhC,KAAMgR,MAClDG,KAAKJ,EAAW,EASnBS,GAAaA,CAACC,EAASC,EAAUC,KACnC,MAAMC,EAAIvB,SAASC,cAAc,KAC3BnB,EAAO,IAAI0C,KAAK,CAACJ,GAAU,CAAEzR,KAAM2R,IACzCC,EAAEE,KAAOC,IAAIC,gBAAgB7C,GAC7ByC,EAAEK,SAAWP,EACbE,EAAEM,OAAO,EAQAC,GAAiBA,CAACC,EAAoBV,KAC/CF,GAAWY,EAAoBV,EAAU,aAAa,ECnF7CW,IAzCiBC,GAyCiBC,QAAMC,aAzCTC,GAyCuBF,QAAMG,iBAvC9D,CACHC,WAAWC,GAA+B,IAAvBC,EAAQnS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,ODMGoS,IAACpC,EAAOqC,ECLhCC,MAAMC,QAAQL,KACfA,EAAS,CAACA,IDIgBlC,ECDJkC,EDCWG,ECDFG,IAC/BA,EAAgBnS,SAAQ0B,IAAoB,IAAnB,KAAET,EAAI,IAAE8N,GAAKrN,EAClC,MAAM0Q,EAAQ,IAAIC,MAClBD,EAAME,IAAMvD,EAEZ,MAAMwD,EAAc,IAAIC,cAAYJ,GAC9BK,EAAU,IAAIC,UAAQH,GAE5BC,cAAYG,WAAWF,EAASxR,GAChCyR,UAAQC,WAAWF,EAASxR,EAAK,IAErC6Q,GAAU,EDFtBc,QAAQC,IAAIlD,EAAMmD,KANG1E,GACV,IAAIwE,SAAQ,CAACG,EAAKC,KACrB3E,GAAcD,EAAM,SAAU2E,EAAKC,EAAI,OAK1C5C,KAAK4B,GACLiB,OAAMzE,GAAOC,QAAQC,MAAMF,ICE5B,EAEA0E,aAAarB,GACJI,MAAMC,QAAQL,KACfA,EAAS,CAACA,IAGdA,EAAO7R,SAASoO,IACZmD,GAAanD,EAAKnN,MAAMkS,SAAQ,GAChCzB,GAAiBtD,EAAKnN,MAAMkS,SAAQ,UAC7B5B,GAAanD,EAAKnN,aAClByQ,GAAiBtD,EAAKnN,KAAK,GAE1C,IAlCqBmS,IAAC7B,GAAcG,GCZ5C,MAAM2B,GAAW,CAAC,EAEZC,GAAgBA,CAACC,EAAKC,IAAQC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,IAAMA,EAMrEK,GAAkBC,IAC3BA,EAAI7T,SAASV,GAAO+T,GAAS/T,IAAM,GAAK,EAS/BwU,GAAS,WAClB,IAAIxU,EAAKgU,GAAc,IAAO,OAE9B,KAAOD,GAAS/T,IACZA,EAAKgU,GAAc,IAAO,OAI9B,OAFAD,GAAS/T,IAAM,EAERA,CACX,ECrBayU,GAA8BA,CAACC,EAAOtU,EAAMuU,EAAUnC,KAC/D,GAAqB,IAAjBkC,EAAMpU,OAEN,YADAkS,EAASpS,GAIb,MAAOJ,EAAI8O,GAAQ4F,EAAME,QAEzBD,EAAS7F,GAAO+F,IACZzU,EAAKJ,GAAM6U,EACXJ,GAA4BC,EAAOtU,EAAMuU,EAAUnC,EAAS,GAC9D,E,aClBC,MAAMsC,GAAU,Q,yBCMhB,MAAMC,GACH,YADGA,GAEE,wBAGTC,GACI,uHADJA,GAES,uEAGTC,GACW,QADXA,GAEgB,eAFhBA,GAGqB,OAOrBC,GAAuBA,CAACL,EAAMhG,IACzB/P,OAAOyR,OAAOsE,GAChBM,QAAO,CAACC,EAAGhT,KAAsB,IAApB,WAAE0L,GAAY1L,EAExB,OADI0L,GAAce,EAAcf,IAAesH,EAAI5U,KAAK,CAACsN,EAAYe,EAAcf,KAC5EsH,CAAG,GACX,IA6EEC,GAAa,SAAC3I,EAAO2E,GAAoC,IAA1BmB,EAAQnS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,OACnD,IAAKgR,EAED,YADAmB,IAGJ,MAAM8C,EAAWC,iBAAM,EAAG/C,GA1CPgD,EAAC9I,EAAO2E,EAAUmB,KACrC,MAAM,KACFrS,EAAI,gBACJiN,EAAe,mBACfC,EAAkB,qBAClBM,EAAoB,8BACpBK,EAA6B,aAC7BK,EAAY,mBACZC,GACA5B,EAAM+I,WAEV3D,GACI4D,KAAKC,UAAU,CACXC,KAAM,CACFC,QAASf,GACTnV,KAAMoV,GACNe,YAAad,IAEjB9M,SAAU/H,EAAK+H,SACfkF,kBACAC,qBACAM,uBACAK,gCACAK,eACAC,sBACD,KAAM,GACT+C,EAAW4D,IAGfzC,GAAU,EAcVgD,CAAe9I,EAAO2E,EAAUiE,GA3EJS,EAACrJ,EAAO2E,EAAUmB,KAC9C,MAAM,cAAE3D,EAAa,qBAAElB,EAAoB,8BAAEK,GAAkCtB,EAAM+I,WAE/EO,EAAoBd,GAAqB,IAAKvH,KAAyBK,GAAiCa,GAoB9G4F,GAA4BuB,EAAmB,CAAC,EAAGtG,IAfrBuG,IAC1BnE,GACI4D,KAAKC,UAAU,CACXC,KAAM,CACFC,QAASf,GACTnV,KAAMoV,GACNe,YAAad,IAEjBiB,aACD,KAAM,GACT5E,EAAW4D,IAEfzC,GAAU,GAGoF,EAqDlGuD,CAAwBrJ,EAAO2E,EAAUiE,EAC7C,EAOaY,GAAmB,SAACxJ,EAAO2E,GAAoC,IAA1BmB,EAAQnS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,OACzD,IAAKgR,EAED,YADAmB,IAGJ,MAAM,cAAE3D,EAAa,qBAAElB,EAAoB,8BAAEK,GAAkCtB,EAAM+I,WAC/EO,EAAoBd,GAAqB,IAAKvH,KAAyBK,GAAiCa,GACxGsH,EAAY,GACZC,EAAM,IAAIC,KAChBL,EACKzU,QAAO+U,IAAA,IAAEtW,EAAImC,GAAEmU,EAAA,OAAKH,EAAUI,SAASvW,IAAcwW,QAAQL,EAAU3V,KAAKR,GAAI,IAChFU,SAAQ+V,IAAgB,IAAdtU,EAAG2M,GAAK2H,EACfL,EAAItH,KAAKA,EAAKnN,KAAMmN,EAAK,IAEjCsH,EAAIM,cAAc,CAAE/W,KAAM,SAAUmR,MAAK,SAAUM,GLiB1BuF,EAACvF,EAASC,KACnCF,GAAWC,EAASC,EAAU,oBAAoB,EKjB9CsF,CAAcvF,EAASC,EAAW4D,IAClCzC,GACJ,GACJ,ECtIaoE,GAA8BA,CAAC/B,EAAMgC,KAM9CA,EAAQC,qBAAqB,MAC7BD,EAAQE,uBAAuBlC,EAAKzH,iBACpCyJ,EAAQG,2BAA2BnC,EAAKxH,oBACxCwJ,EAAQI,6BAA6BpC,EAAKlH,sBAC1CkJ,EAAQK,sCAAsCrC,EAAK7G,+BACnD6I,EAAQM,+BAA+BtC,EAAKxG,cAC5CwI,EAAQO,2BAA2BvC,EAAKvG,oBACxCuI,EAAQC,qBAAqBjC,EAAK3M,SAAS,EAqDzCmP,GAAsBA,CAAChH,EAAOwG,KNzBES,EAACjH,EAAOqC,KAO1CY,QAAQC,IAAIlD,EAAMmD,KANG1E,GACV,IAAIwE,SAAQ,CAACG,EAAKC,KACrB3E,GAAcD,EAAM,OAAQ2E,EAAKC,EAAI,OAKxC5C,KAAK4B,GACLiB,OAAMzE,GAAOC,QAAQC,MAAMF,IAAK,EMyBrCoI,CAAuBjH,GANGkH,IAjCNC,EAACD,EAAgBV,EAASrE,KAC9C,MAAMiF,EAAoBF,EAAelW,MAAKiV,IAAA,IAAC,KAAEV,GAAMU,EAAA,OAAKV,EAAKjW,OAASoV,EAAoB,IAE9F,GAAI0C,EAAmB,CAKnB,MAAMC,EAAwBC,IAE1BrD,GAAexV,OAAOyO,KAAKoK,IAE3B3F,GAAWM,WAAWxT,OAAOyR,OAAOoH,IAAqB,KACrDd,EAAQe,sBAAsBD,GAC9BnF,GAAU,GACZ,EAGNiC,GAA4B3V,OAAO+Y,QAAQJ,EAAkBxB,WAAY,CAAC,EAAGxF,GAAmBiH,EACpG,MAEIlF,GACJ,EAcIgF,CAFAD,EAAiBA,EAAe/D,KAAK1E,GAAS4G,KAAKoC,MAAMhJ,EAAKW,OAE9BoH,GAAS,IAnD1BkB,EAACR,EAAgBV,KACpC,MAAMmB,EAAeT,EAAelW,MAAKe,IAAA,IAAC,KAAEwT,GAAMxT,EAAA,OAAKwT,EAAKjW,OAASoV,EAAe,IAEhFiD,IACA1D,GAAepU,EAAc8X,EAAa9P,SAAU,KACpD0O,GAA4BoB,EAAcnB,GAC9C,EA6CmDkB,CAAeR,EAAgBV,IAAS,GAG5C,EAMtCoB,GAAcpB,INahBlH,GAAa,oBAAoB,GMZHU,IACjCgH,GAAoBhH,EAAOwG,EAAQ,IAE5BhF,OAAO,E,mBC5Ef,MAAMqG,GAAcC,GAEnBC,eAAA,OAAKpY,GAAG,QAAQqY,UAAWF,EAAMG,UAAY,QAAU,GAAGC,SACtDC,gBAAA,OAAKxY,GAAG,gBAAeuY,SAAA,CACnBH,eAAA,QAAMC,UAAU,mBAAmBI,QAASN,EAAMO,QAAQH,SAAC,SAC3DH,eAAA,OAAAG,SACIH,eAAA,KAAGC,UAAU,eAAcE,SAAC,+CAEhCC,gBAAA,OAAKxY,GAAG,gBAAeuY,SAAA,CACnBH,eAAA,UAAQC,UAAU,gBAAgBI,QAASN,EAAMQ,UAAUJ,SAAC,QAC5DH,eAAA,UAAQC,UAAU,eAAeI,QAASN,EAAMS,SAASL,SAAC,eCjBjEM,GAAoBhC,INICiC,MAC9B,IAAK,MAAMC,KAAOhF,UACPA,GAASgF,EACpB,EMLAD,GAEA,MAAMjE,EAAOmE,qBAAU/Q,GAEvB2O,GAA4B,CACxB1O,SAAU2M,EAAK1U,KAAK+H,SACpBkF,gBAAiByH,EAAKzM,aACtBiF,mBAAoBwH,EAAKxM,WAAWC,KACpCqF,qBAAsBkH,EAAKxM,WAAWQ,OACtCmF,8BAA+B6G,EAAKxM,WAAWS,gBAC/CuF,aAAcwG,EAAKxM,WAAWvF,SAC9BwL,mBAAoBuG,EAAKxM,WAAWU,MACrC8N,GACHA,EAAQe,sBAAsB,CAAC,EAAE,ECmDxBqB,GAASC,aAJGxM,IACd,CAAC,IAKR,CACIqK,uBvBxD+BnX,IAC5B,CAAED,KAAMkL,EAA0BG,mBAAoBpL,YuBwDzDoX,2B7BrDmCpX,IAChC,CAAED,KAAMoK,EAAwBI,uBAAwBvK,Y6BqD3DqX,6B1BtDqCrX,IAClC,CAAED,KAAM2K,EAA0BI,yBAA0B9K,Y0BsD/DgY,sBC9D8BhY,IAC3B,CAAED,KAAMwL,EAAiBG,iBAAkB1L,YD8D9CkX,qBtCA6B5O,IAC1B,CAAEvI,KAAMd,EAAaW,iBAAkBI,QAAS,CAAEsI,WAAUC,eAAgB,QsCA/E+O,sCfzD8CtX,IAC3C,CAAED,KAAMmM,GAAqCI,oCAAqCtM,YeyDrFuX,+BlBhDuCvX,IACpC,CAAED,KAAM4L,GAA4BI,2BAA4B/L,YkBgDnEwX,2BZ3DmCxX,IAChC,CAAED,KAAMyM,GAAwBI,uBAAwB5M,aYgD7CsZ,EAxCUf,IAC5B,MAAOgB,EAAgBC,GAAsBC,oBAAS,GAEtD,OACIb,gBAAA,UAAAD,SAAA,CACIC,gBAAA,OAAKxY,GAAG,oBAAmBuY,SAAA,CACvBH,eAAA,QAAAG,SAAM,SACNC,gBAAA,OAAKxY,GAAG,UAASuY,SAAA,CACbH,eAAA,QAAMK,QAASA,IAAMW,GAAmB,GAAMb,SAAC,gBAC/CH,eAAA,QAAMK,QAASA,IAAMR,GAAWE,GAAOI,SAAC,uBACxCH,eAAA,QAAMK,QAASA,IAAMpD,GAAW3I,GAAOA,GAAM+I,WAAWtV,KAAK+H,SAASvG,MAAM4W,SAAC,uBAC7EH,eAAA,QAAMK,QAASA,IAAMvC,GAAiBxJ,GAAOA,GAAM+I,WAAWtV,KAAK+H,SAASvG,MAAM4W,SAAC,6BAG3FC,gBAAA,OAAAD,SAAA,CACIH,eAAA,QAAAG,SAAM,SACNH,eAAA,QAAAG,SAAM,UACNH,eAAA,QAAAG,SAAM,kBAEVH,eAACF,GAAU,CACPI,UAAWa,EACXT,QAASA,IAAMU,GAAmB,GAClCT,UAAWA,KD1BWW,IAAC5M,EAAOmK,EAASxF,EC2BnC+H,GAAmB,GD3BA1M,EC4BIA,GD5BGmK,EC4BIsB,ED5BK9G,EC4BE3E,GAAM+I,WAAWtV,KAAK+H,SAASvG,KD3BpF0T,GAAW3I,EAAO2E,GAAU,IAAMwH,GAAiBhC,IC2BsC,EAE7E+B,SAAUA,KACNQ,GAAmB,GACnBP,GAAiBV,EAAM,MAG1B,IElEJoB,GAAaC,GAAYA,GAAWrF,KAAKsF,GAAK,KCK9C3X,GAAW,CACpBC,oBAAqBA,IAAM,IAAIC,YAC/BC,iBAAkBA,CAACC,EAAUwX,EAAUC,KACnCzX,EAASqG,QAAUoR,EAASpR,QAC5BrG,EAASwF,MAAQiS,EAASjS,MAC1BxF,EAASU,SAASC,IAAI8W,EAASnR,UAAWmR,EAASlR,WACnDvG,EAAS0X,MAAM/W,IAAI8W,EAASjR,OAAQiR,EAAShR,QAC7CzG,EAAS0G,SAAW2Q,GAAUI,EAAS/Q,UACvC1G,EAASP,KAAOkY,OAAOF,EAAS3Z,GAAG,GAG9B8Z,GAAa7V,8BAAoBnC,GAAU,cCX3CA,GAAW,CACpBC,oBAAqBA,IAAM,IAAIgY,SAC/B9X,iBAAkBA,CAACC,EAAUwX,EAAUC,KAEnCzX,EAASiR,QAAUwG,EAASxG,QAE5BjR,EAASqG,QAAUoR,EAASpR,QAC5BrG,EAASwF,MAAQiS,EAASjS,MAC1BxF,EAASU,SAASC,IAAI8W,EAASnR,UAAWmR,EAASlR,WACnDvG,EAAS0X,MAAM/W,IAAI8W,EAASjR,OAAQiR,EAAShR,QAC7CzG,EAAS8X,OAAOnX,IAAI8W,EAAS/L,QAAS+L,EAAS9L,SAC/C3L,EAAS0G,SAAW2Q,GAAUI,EAAS/Q,UACvC1G,EAASP,KAAOkY,OAAOF,EAAS3Z,IAE3BkC,EAASwB,cACVxB,EAASwB,aAAc,EACvBxB,EAAS6B,GAAG,aAAa,KACrB4V,EAASlX,SAASkX,EAAS3Z,GAAG,QAC/B,GACP,GAGKia,GAAUhW,8BAAoBnC,GAAU,WCrBxCA,GAAW,CACpBC,oBAAqBA,IAAM,IAAIiB,WAC/Bf,iBAAkBA,CAACC,EAAUwX,EAAUC,KAKnC,GAHAzX,EAASgB,QACThB,EAASgY,UAAUP,EAASpX,MAAOoX,EAASjS,OAExCiS,EAASha,OAAS0H,EAAeG,OACjCtF,EAASiY,WAAWR,EAASvW,EAAGuW,EAASpW,EAAGoW,EAAS5R,aAEpD,GAAI4R,EAASha,OAAS0H,EAAeC,UACtCpF,EAASsB,SAASmW,EAASvW,EAAGuW,EAASpW,EAAGoW,EAAS/R,MAAO+R,EAAS9R,YAElE,IAAI8R,EAASha,OAAS0H,EAAeE,kBAItC,MAAM,IAAIS,MAAM,uCAAyC2R,EAASha,MAHlEuC,EAASkY,gBAAgBT,EAASvW,EAAGuW,EAASpW,EAAGoW,EAAS/R,MAAO+R,EAAS9R,OAAQ8R,EAAS7R,aAI/F,CACA5F,EAASuB,UAETvB,EAASqG,QAAUoR,EAASpR,QAC5BrG,EAASwF,MAAQiS,EAASjS,MAC1BxF,EAASU,SAASC,IAAI8W,EAASnR,UAAWmR,EAASlR,WACnDvG,EAAS0X,MAAM/W,IAAI8W,EAASjR,OAAQiR,EAAShR,QAC7CzG,EAAS0G,SAAW2Q,GAAUI,EAAS/Q,UACvC1G,EAASP,KAAOkY,OAAOF,EAAS3Z,IAE3BkC,EAASwB,cACVxB,EAASwB,aAAc,EACvBxB,EAAS6B,GAAG,aAAa,KACrB4V,EAASlX,SAASkX,EAAS3Z,GAAG,QAC/B,GACP,GAGKqa,GAAYpW,8BAAoBnC,GAAU,aCrC1CA,GAAW,CAEpBC,oBAAsBoW,IAClB,MAAMmC,EAAU,IAAItY,YAOpB,OAHAsY,EAAQC,eAAiB,IAAIC,OAAKC,eAAetC,EAAMhF,QAAS,GAAK,GAAK,GAAK,IAC/EmH,EAAQrX,SAASqX,EAAQC,gBAElBD,CAAO,EAElBrY,iBAAkBA,CAACC,EAAUwX,EAAUC,KAEnCzX,EAASqY,eAAepH,QAAUwG,EAASxG,QAC3CjR,EAASqY,eAAe3S,MAAQ+R,EAAS/R,MACzC1F,EAASqY,eAAe1S,OAAS8R,EAAS9R,OAE1C3F,EAASqY,eAAeG,UAAYf,EAAS1L,EAC7C/L,EAASqY,eAAeI,UAAYhB,EAASxL,EAC7CjM,EAASqY,eAAeK,WAAajB,EAASzL,EAC9ChM,EAASqY,eAAeM,aAAelB,EAASvL,EAEhDlM,EAASqY,eAAeO,MAAMjY,IAAI8W,EAAS/L,QAAU+L,EAAS/R,MAAO+R,EAAS9L,QAAU8L,EAAS9R,QAEjG3F,EAASqG,QAAUoR,EAASpR,QAC5BrG,EAASwF,MAAQiS,EAASjS,MAC1BxF,EAASU,SAASC,IAAI8W,EAASnR,UAAWmR,EAASlR,WACnDvG,EAAS0X,MAAM/W,IAAI8W,EAASjR,OAAQiR,EAAShR,QAC7CzG,EAAS0G,SAAW2Q,GAAUI,EAAS/Q,UACvC1G,EAASP,KAAOkY,OAAOF,EAAS3Z,IAE3BkC,EAASwB,cACVxB,EAASwB,aAAc,EACvBxB,EAAS6B,GAAG,aAAa,KACrB4V,EAASlX,SAASkX,EAAS3Z,GAAG,QAC/B,GACP,GAGK+a,GAAkB9W,8BAAoBnC,GAAU,mBCxChDA,GAAW,CACpBC,oBAAqBA,IAAM,IAAIiZ,OAAK,GAAI,CAAC,GACzC/Y,iBAAkBA,CAACC,EAAUwX,EAAUC,KAEnC,MAAM,UAAEsB,EAAS,UAAEC,GAAcvB,GAC3B,KAAE5Q,EAAI,QAAE6E,EAAO,QAAEC,KAAYsN,GAAUD,OAEZ3a,IAA7B4a,EAAuB,kBACvBA,EAAuB,gBAAI5B,GAAU4B,EAAuB,kBAGhEjZ,EAAS6G,KAAOA,EAChB7G,EAASiZ,MAAQA,EAEjBjZ,EAASqG,QAAU0S,EAAU1S,QAC7BrG,EAASwF,MAAQuT,EAAUvT,MAC3BxF,EAASU,SAASC,IAAIoY,EAAUzS,UAAWyS,EAAUxS,WACrDvG,EAAS0X,MAAM/W,IAAIoY,EAAUvS,OAAQuS,EAAUtS,QAC/CzG,EAAS8X,OAAOnX,IAAI+K,EAASC,GAC7B3L,EAAS0G,SAAW2Q,GAAU0B,EAAUrS,UACxC1G,EAASP,KAAOkY,OAAOF,EAAS3Z,IAE3BkC,EAASwB,cACVxB,EAASwB,aAAc,EACvBxB,EAAS6B,GAAG,aAAa,KACrB4V,EAASlX,SAASkX,EAAS3Z,GAAG,QAC/B,GACP,GAGKob,GAAQnX,8BAAoBnC,GAAU,SChBtCuZ,GAAiBA,CAACjS,EAAUkS,EAAc7Y,KACnD,MAAM,mBACF4K,EAAkB,qBAClBM,EAAoB,gBACpBP,EAAe,cACfyB,EAAa,aACbR,EAAY,8BACZL,EAA6B,mBAC7BM,GACAgN,EAEEC,EAASnO,EAAgBhE,EAASpJ,IAClCib,EAAY5N,EAAmBjE,EAASpJ,IAE9C,GAAIub,EAAO5b,OAASuE,EAAaG,UAC7B,OACI+T,eAAC0B,GAAU,CAAmB9Z,GAAIoJ,EAASpJ,GAAUyC,cAAawY,EAAS1C,SACtEnP,EAAS3I,MAAM+S,KAAK7S,GAAS0a,GAAe1a,EAAM2a,EAAc7Y,MADpD2G,EAASpJ,IAKlC,GAAIub,EAAO5b,OAASuE,EAAaI,OAAQ,CACrC,MAAMkX,EAAc7N,EAAqBvE,EAASpJ,IAC5Cyb,EAAW5M,EAAc2M,EAAY1N,YACrCqF,EAAUsI,EAAWrI,UAAQsI,KAAKD,EAAS9Z,MAAQyR,UAAQuI,MAEjE,OACIvD,eAAC6B,GAAO,CAAmBja,GAAIoJ,EAASpJ,GAAUmT,UAAS1Q,cAAawY,KAAcO,EAAWjD,SAC5FnP,EAAS3I,MAAM+S,KAAK7S,GAAS0a,GAAe1a,EAAM2a,EAAc7Y,MADvD2G,EAASpJ,GAI/B,CACA,GAAIub,EAAO5b,OAASuE,EAAaK,SAAU,CACvC,MAAMqX,EAAgBvN,EAAajF,EAASpJ,IAC5C,OACIoY,eAACiC,GAAS,CAAmBra,GAAIoJ,EAASpJ,GAAUyC,cAAawY,KAAcW,EAAarD,SACvFnP,EAAS3I,MAAM+S,KAAK7S,GAAS0a,GAAe1a,EAAM2a,EAAc7Y,MADrD2G,EAASpJ,GAIjC,CACA,GAAIub,EAAO5b,OAASuE,EAAaM,kBAAmB,CAChD,MAAMqX,EAAiB7N,EAA8B5E,EAASpJ,IACxDyb,EAAW5M,EAAcgN,EAAe/N,YACxCqF,EAAUsI,EAAWrI,UAAQsI,KAAKD,EAAS9Z,MAAQyR,UAAQuI,MAEjE,OACIvD,eAAC2C,GAAe,CAAmB/a,GAAIoJ,EAASpJ,GAAUmT,UAAS1Q,cAAawY,KAAcY,EAActD,SACvGnP,EAAS3I,MAAM+S,KAAK7S,GAAS0a,GAAe1a,EAAM2a,EAAc7Y,MAD/C2G,EAASpJ,GAIvC,CACA,GAAIub,EAAO5b,OAASuE,EAAaO,KAAM,CACnC,MAAMyW,EAAY5M,EAAmBlF,EAASpJ,IAE9C,OACIoY,eAACgD,GAAK,CAAmBpb,GAAIoJ,EAASpJ,GAAUyC,WAAUwY,YAAWC,YAAS3C,SACzEnP,EAAS3I,MAAM+S,KAAK7S,GAAS0a,GAAe1a,EAAM2a,EAAc7Y,MADzD2G,EAASpJ,GAI7B,GChCS8b,GAAY5C,aAbAxM,IACd,CACHxE,SAAUwE,EAAMvM,KAAK+H,SACrBmF,mBAAoBX,EAAMW,mBAC1BM,qBAAsBjB,EAAMiB,qBAC5BK,8BAA+BtB,EAAMsB,8BACrCZ,gBAAiBV,EAAMU,gBACvByB,cAAenC,EAAMmC,cACrBR,aAAc3B,EAAM2B,aACpBC,mBAAoB5B,EAAM4B,sBAM9B,CAAE7O,2BAFmByZ,EAzBE9W,IAA6D,IAA5D,SAAE8F,EAAQ,wBAAEzI,KAA4B6b,GAAclZ,EAE9E,OACIgW,eAAA2D,YAAA,CAAAxD,SACKrQ,EAAWmT,GAAenT,EAAUoT,GAH3Btb,GAAOP,EAAwBO,KAGsB,MAChE,IC6CEgc,GAAe9C,aANHxM,IACd,CACHW,mBAAoBX,EAAMW,sBAM9B,CAAE5N,2BAFsByZ,EA/DS9W,IAAgE,IAA/D,mBAAEiL,EAAkB,wBAAE5N,EAAuB,SAAEwc,GAAU7Z,EAE3F,MAAO8Z,EAAYC,GAAiB9C,mBAAS,CACzC7Q,UAAW,EACXC,UAAW,EACXC,OAAQ,EACRC,OAAQ,IAGZyT,qBAAU,KACN,MAAMC,EAAsBC,IAExBL,EAASM,IAAIC,MAAM5Z,SAASC,IAAIyZ,EAAK1U,MAAQ,EAAG0U,EAAKzU,OAAS,EAAE,EAKpE,OAHAoU,EAASQ,OAAO1Y,GAAG,SAAUsY,GAC7BJ,EAASQ,OAAOC,WAET,KACHT,EAASQ,OAAOE,IAAI,SAAUN,GAC9BJ,EAASQ,OAAOG,YAAY,CAC/B,GACF,IAEHR,qBAAU,KACN,MAAMS,EAAqBvG,IAA0B,IAAzB,MAAEsD,EAAK,SAAEhX,GAAU0T,EAC3C6F,EAAc,CACV3T,UAAW5F,EAASQ,EACpBqF,UAAW7F,EAASW,EACpBmF,OAAQkR,EAAMxW,EACduF,OAAQiR,EAAMrW,GAChB,EAMN,OAHA0Y,EAASa,OAAO/Y,GAAG,SAAU8Y,GAC7BZ,EAASa,OAAOJ,WAET,KACHT,EAASa,OAAOH,IAAI,SAAUE,GAC9BZ,EAASa,OAAOF,YAAY,CAC/B,GACF,IAIH,OACIpE,gBAACsB,GAAU,CAAO9Z,GAAI,kBAAmB4I,SAAU,EAAGL,SAAS,EAAMb,MAAO,KAAMwU,EAAU3D,SAAA,CACxFH,eAACpU,EAAK,CAAChE,GAAG,QACNqC,SAAUgL,E5CvDE,G4CuD+BhL,SAC3CC,SAAU+K,E5CxDE,G4CwD+B/K,SAC3CC,MAAO,SACPC,UAAW,EACXC,SATMzC,GAAOP,EAAwBO,KAUzCoY,eAAC0D,GAAS,MACD,I,cC3Cd,MAAMiB,GAAYC,sBAAW,CAAA5a,EAQjC6a,KAAS,IARyB,MACjCC,EAAK,MACLC,EAAK,SACLC,EAAQ,OACRC,EAAM,UACNhF,EAAY,GAAE,OACdiF,EAAUC,IAAMA,GAAC,WACjBC,EAAcD,IAAMA,IACvBnb,EACG,MAAMqb,EAAWC,mBAEjBC,8BAAoBV,GAAK,MACrBW,QACIH,EAASI,QAAQD,QACjBH,EAASI,QAAQC,QACrB,MAQJ,OACItF,gBAAA,OAAKH,UAAU,UAASE,SAAA,CACpBH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,SACI6E,IAAKQ,EACLpF,UAAS,iBAAAzW,OAAmByW,GAC5B1Y,KAAK,OACL,UAAS0d,EACTF,MAAOA,EACPG,OAAQA,EACRF,SAfWhN,IACnBA,EAAQoN,EAAWpN,GACnBgN,EAASC,EAAQjN,EAAME,OAAO6M,MAAM,MAe9B,I,OC5Cd,MAAMY,GAAe,UAmERC,GAAe9E,aARJ9W,IAAgC,IAA/B,KAAEjC,EAAI,gBAAEiN,GAAiBhL,EAC9C,MAAO,CACH8F,SAAU/H,EAAK+H,SACfkF,gBAAiBA,EACjBjF,eAAgBhI,EAAKgI,eACxB,GAKD,CAAEtI,wBAFsBqZ,EAxDGf,IAC3B,MAAMxX,EAAOQ,EAAYgX,EAAMhQ,eAAgBgQ,EAAMjQ,UAC/C+V,EAAkC,IAArBtd,EAAKgB,KAAKrB,QAAkBK,EAAKgB,OAASoc,GACvDG,EAAeR,mBAerBtB,qBAAU,KACN+B,YAAW,IAAMD,EAAaL,QAAQD,SAAQ,GAC/C,CAACzF,EAAMhQ,iBAEV,MAAMxI,EAAOwY,EAAM/K,gBAAgB+K,EAAMhQ,gBAAgBxI,KACnDye,EAAiBze,EAAK,GAAKA,EAAK0e,MAAM,GAAGC,cAE/C,OACI9F,gBAAA,OAAKH,UAAU,aAAYE,SAAA,CACvBH,eAAA,OAAKC,UAAU,UAASE,SACpBH,eAAA,QAAMC,UAAU,iCAAgCE,SAAE6F,MAEtDhG,eAAC2E,GAAS,CAACE,IAAKiB,EAERhB,MAAO,OACPG,OAAQ,OACRF,MAAOxc,EAAKgB,KACZ0W,UAAW4F,EAAY,cAAgB,GACvCR,SAAUS,EACVd,SA/BCA,CAACrE,EAAKoE,KACnBhF,EAAMtY,qBAAqB,CAAEH,OAAQyY,EAAMhQ,eAAgBxG,KAAMwb,GAAQ,EA+B7DG,OA3BAlN,IACZ,IAAI+M,EAAQ/M,EAAME,OAAO6M,MAAMoB,OAC/BpB,EAAyB,IAAjBA,EAAM7c,OAAeyd,GAAeZ,EAE5ChF,EAAMtY,qBAAqB,CAAEH,OAAQyY,EAAMhQ,eAAgBxG,KAAMwb,GAAQ,MA0BnE,IC3CDqB,GAAcpc,IAUpB,IAVqB,MACxB8a,EAAK,MACLC,EAAK,SACLC,EAAQ,OACRC,EAAM,KACNoB,EAAO,EAAC,IACRvK,EAAMrQ,OAAOC,iBAAgB,IAC7BmQ,EAAMpQ,OAAO6a,iBAAgB,KAC7BC,EAAO,GAAE,WACTnB,EAAcpN,IAAUA,IAC3BhO,EAEG,MAAOwc,EAAgBC,GAAmBxF,oBAAS,GAQ7CyF,EAAwB1O,IAC1ByO,EAAgBzO,EAAM2O,SAAS,EAGnC,OACIvG,gBAAA,OAAKH,UAAU,UACX2G,UAAWF,EACXG,QAASH,EAAqBvG,SAAA,CAC9BH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,OAAK,YAAWuG,EAAMtG,UAAU,mDAAkDE,SAC9EH,eAAA,SACIC,UAAU,YACV1Y,KAAK,SACL,UAAS0d,EACToB,KAAMG,EAAwB,GAAPH,EAAYA,EACnCvK,IAAKA,EACLD,IAAKA,EACLkJ,MAAOA,EACPC,SAxBOhN,IACnBA,EAAQoN,EAAWpN,GACnB,MAAO2I,EAAKoE,GAAS+B,GAAsB9O,GAC3CgN,EAASrE,EAAKoE,EAAM,MA0BhB/E,eAAA,QAAMC,UAAU,oBACd,EC5CD8G,GAAa/c,IAUnB,IAVoB,MACvB8a,EAAK,OACL3M,EAAM,SACN6M,EAAQ,QACRgC,EAAO,KACPX,EAAO,EAAC,IACRvK,EAAMrQ,OAAOC,iBAAgB,IAC7BmQ,EAAMpQ,OAAO6a,iBAAgB,MAC7BW,EAAQ,CAAC,GAAI,IAAG,WAChB7B,EAAcpN,IAAUA,IAC3BhO,EAEG,MAAOwc,EAAgBC,GAAmBxF,oBAAS,GAE7CiG,EAAiBlP,IACnBA,EAAQoN,EAAWpN,GACnB,MAAO2I,EAAKoE,GAAS+B,GAAsB9O,GAC3CgN,EAASrE,EAAKoE,EAAM,EAGlB2B,EAAwB1O,IAC1ByO,EAAgBzO,EAAM2O,SAAS,EAGnC,OACIvG,gBAAA,OAAKH,UAAU,UACX2G,UAAWF,EACXG,QAASH,EAAqBvG,SAAA,CAC9BH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACnD,CAAC,EAAG,GAAG1J,KAAKzS,GACDqX,eAAA,OAAa,YAAWiH,EAAMte,GAAIsX,UAAU,mDAAkDE,SAClGH,eAAA,SACIC,UAAU,YACV1Y,KAAK,SACL,UAASyf,EAAQre,GACjB0d,KAAMG,EAAwB,GAAPH,EAAYA,EACnCvK,IAAKA,EACLD,IAAKA,EACLkJ,MAAO5M,EAAOxP,GACdqc,SAAUkC,KATAve,OAapB,EC9CDwe,GAAgBnd,IAAqD,IAApD,MAAE8a,EAAK,SAAEsC,EAAQ,QAAEC,EAAO,SAAErC,EAAQ,OAAEC,GAAQjb,EAIxE,OACIoW,gBAAA,OAAKH,UAAU,UAASE,SAAA,CACpBH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,UAAQ,UAASiF,EAAQF,MAAOqC,EAAUpC,SAL3BhN,GAAUgN,EAASC,EAAQjN,EAAME,OAAO6M,OAKY9E,UAAU,gBAAeE,SACvFkH,EAAQjM,KAAKkM,GACHtH,eAAA,UAAqB+E,MAAOuC,EAAOnH,SAAEmH,GAAxBA,SAG1B,ECbDC,GAAavd,IAAyC,IAAxC,MAAE8a,EAAK,MAAEC,EAAK,SAAEC,EAAQ,OAAEC,GAAQjb,EAIzD,OACIoW,gBAAA,OAAKH,UAAU,UAASE,SAAA,CACpBH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,SAAOC,UAAU,gBAAgB1Y,KAAK,QAAQ,UAAS0d,EAAQF,MAAOA,EAAOC,SAL9DhN,GAAUgN,EAASC,EAAQjN,EAAME,OAAO6M,WAMrD,ECPDyC,GAAexd,IAKrB,IALsB,MACzB8a,EAAK,MACLC,EAAK,SACLC,EAAQ,OACRC,GACHjb,EAGG,MAEMyd,EAAcpJ,IAAA,IAAC,OAAEnG,GAAQmG,EAAA,OAAKnG,EAAOwP,UAAUC,OAAO,WAAW,EAavE,OACIvH,gBAAA,OAAKH,UAAU,UAASE,SAAA,CACpBH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,YACIC,UAAU,eACV2H,UAAQ,EACR7C,MAAOA,EACP,UAASE,EACT4C,WAvBQ7P,GAAUA,EAAM8P,iBAwBxBC,YAvBQ7J,IAAA,IAAC,OAAEhG,GAAQgG,EAAA,OAAKhG,EAAOwP,UAAUM,IAAI,WAAW,EAwBxDP,YAAaA,EACbQ,OAtBIjQ,IAIZ,GAHAyP,EAAYzP,IAGPkQ,OAAsB,cAAK,OAChC,MAAMxS,EAAawS,OAAsB,qBAClCA,OAAsB,cAE7BlD,EAASC,EAAQvP,EAAW,MAgBtB,ECtCDoR,GAAyB9O,IAClC,MAAM2I,EAAM3I,EAAME,OAAOiQ,aAAa,WAChCC,EAAcC,WAAWrQ,EAAME,OAAO6M,OAE5C,MAAO,CAACpE,EADOlV,OAAO6c,MAAMF,GAA6B,GAAdA,EACxB,EAOVG,GAA6BvQ,IAC1BA,EAAME,OAAOiQ,aAAa,WAItC,OAHIE,WAAWrQ,EAAME,OAAO6M,OAAS,IACjC/M,EAAME,OAAO6M,MAAQhJ,KAAKyM,IAAIxQ,EAAME,OAAO6M,QAExC/M,CAAK,ECdHyQ,GAAcze,IAAyC,IAAxC,MAAE8a,EAAK,MAAEC,EAAK,SAAEC,EAAQ,OAAEC,GAAQjb,EAM1D,OACIoW,gBAAA,OAAKH,UAAU,8BAA6BE,SAAA,CACxCH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACpD9E,eAAA,SACIzY,KAAK,WACL,UAAS0d,EACTF,MAAOA,EACP2D,QAAS3D,EACTC,SAZWhN,IACnBgN,EAASC,EAAQjN,EAAME,OAAOwQ,QAAQ,MAahC,ECyEDC,GAAiB7H,aAPN5C,IAAmC,IAAlC,KAAEnW,EAAI,mBAAEkN,GAAoBiJ,EACjD,MAAO,CACHjJ,mBAAoBA,EACpBlF,eAAgBhI,EAAKgI,eACxB,GAKD,CAAEkC,8BAFwB6O,EAlFE9W,IAAyE,IAAxE,eAAE+F,EAAc,mBAAEkF,EAAkB,2BAAEhD,GAA4BjI,EAE/F,MAAM1C,EAASyI,EACT6Y,EAAe3T,EAAmB3N,GAElC0d,EAAWA,CAACrE,EAAKoE,KACnB9S,EAA2B,CACvB3K,SACA2I,WAAY,IAAK2Y,EAAc,CAACjI,GAAMoE,IACxC,EAOA8D,EAAY,CACd/D,MAAO,QACPG,OAAQ,QACRF,MAAO6D,EAAatZ,MACpB+W,KAAM,GACNvK,IAAK,EACLD,IAAK,EACLmJ,YAGE8D,EAAe,CACjBhE,MAAO,WACPkC,QAAS,CAAC,YAAa,aACvB7O,OAAQ,CAACyQ,EAAaxY,UAAWwY,EAAavY,WAC9C4W,MAAO,CAAC,IAAK,KACbjC,YAGE+D,EAAY,CACdjE,MAAO,QACPkC,QAAS,CAAC,SAAU,UACpB7O,OAAQ,CAACyQ,EAAatY,OAAQsY,EAAarY,QAC3C0W,MAAO,CAAC,IAAK,KACbZ,KAAM,GACNrB,YAGEgE,EAAW,CACblE,MAAO,YACPkC,QAAS,CAAC,WAAY,YACtB7O,OAAQ,CAACyQ,EAAa3e,SAAU2e,EAAa1e,UAC7C+c,MAAO,CAAC,OAAQ,QAChBpL,IAAK,EACLmJ,YAGEiE,EAAY,CACdnE,MAAO,WACPG,OAAQ,WACRF,MAAO6D,EAAapY,SACpB+V,KAAM,MACNvB,YAGJ,OACI5E,gBAAA,OAAKH,UAAU,iCAAgCE,SAAA,CAC3CH,eAACyI,GAAW,CAAO3D,MAAO,UAAWG,OAAQ,GAAIF,MAAO6D,EAAazY,QAAS6U,SAlD1DkE,CAACvI,EAAKxQ,KAC9B6U,EAAS,UAAW7U,EAAQ,ItDnCR,IsDqFf7I,GAA2B0Y,eAAC+G,GAAU,IAAKiC,IAC5ChJ,eAACoG,GAAW,IAAKyC,IACjB7I,eAAC+G,GAAU,IAAK+B,IAChB9I,eAAC+G,GAAU,IAAKgC,IAChB/I,eAACoG,GAAW,IAAK6C,MACf,IC5EDE,GAAkBA,IAEvB/I,gBAAA,OAAAD,SAAA,CACIH,eAAC4F,GAAY,IACb5F,eAAC2I,GAAc,OCJdS,GAAOpf,IAIb,IAJc,MACjB8a,EAAK,OACL3M,EAAM,QACN6O,GACHhd,EACG,OACIoW,gBAAA,OAAKH,UAAU,UAASE,SAAA,CACpBH,eAAA,QAAMC,UAAU,mCAAkCE,SAAE2E,IACnD,CAAC,EAAG,GAAG1J,KAAKzS,GACDqX,eAAA,OAAaC,UAAU,mDAAkDE,SAC7EH,eAAA,SACIC,UAAU,YACV1Y,KAAK,SACL,UAASyf,EAAQre,GACjBoc,MAAO5M,EAAOxP,GACdif,UAAU,KANAjf,OAUpB,ECiED0gB,GAAmBvI,aARR5C,IAAoD,IAAnD,KAAEnW,EAAI,qBAAEwN,EAAoB,cAAEkB,GAAeyH,EAClE,MAAO,CACH3I,qBAAsBA,EACtBxF,eAAgBhI,EAAKgI,eACrB0G,cAAeA,EAClB,GAKD,CAAEjE,gCAF0BsO,EAzEE9W,IAK3B,IAL4B,eAC/B+F,EAAc,cACd0G,EAAa,qBACblB,EAAoB,6BACpB/C,GACHxI,EAEG,MAAMpC,EAAKmI,GAEL,QAAEyF,EAAO,QAAEC,EAAO,WAAEC,GAAeH,EAAqB3N,GAExDyb,EAAW5M,EAAcf,GACzBC,EAAe0N,EAAWA,EAAS9Z,KAAO,GAEhDya,qBAAU,KAEFtO,IAAe2N,GAAU7Q,EAA6B,CAAElL,OAAQM,EAAI8N,WAAY,KAAMC,aAAc,MAAO,GAChH,CAAC0N,IAEJ,MAWMiG,EAAc,CAChBxE,MAAO,UACPG,OAAQ,UACRF,MAAOpP,EACPqP,SARmBuE,CAAC5I,EAAKoE,KACzBvS,EAA6B,CAAElL,OAAQM,EAAIqI,WAAY,CAAEyF,WAAYqP,EAAOpP,aAAcc,EAAcsO,GAAOxb,OAAS,GAUtHwR,EAAUsI,EAAWrI,UAAQsI,KAAKD,EAAS9Z,MAAQyR,UAAQuI,MAC3DiG,EAAc,CAChB1E,MAAO,eACPkC,QAAS,CAAC,QAAS,UACnB7O,OAAQ,CAAC4C,EAAQvL,MAAOuL,EAAQtL,SAG9Bga,EAAa,CACf3E,MAAO,SACPkC,QAAS,CAAC,UAAW,WACrB7O,OAAQ,CAAC3C,EAASC,GAClBwR,MAAO,CAAC,IAAK,KACbZ,KAAM,GACNrB,SA/BkBkC,CAACvG,EAAKoE,KACxBvS,EAA6B,CACzBlL,OAAQM,EACRqI,WAAY,IAAKsF,EAAqB3N,GAAK,CAAC+Y,GAAMoE,IACpD,GA8BN,OACI3E,gBAAA,OAAKH,UAAU,iCAAgCE,SAAA,CAC3CH,eAACwH,GAAY,IAAK8B,IAClBtJ,eAACoJ,GAAI,IAAKI,IACVxJ,eAAC+G,GAAU,IAAK0C,MACd,ICpEDC,GAAeA,IAEpBtJ,gBAAA,OAAAD,SAAA,CACIH,eAAC4F,GAAY,IACb5F,eAAC2I,GAAc,IACf3I,eAACqJ,GAAgB,OC6BhBM,GAAuB7I,aARZ5C,IAA6B,IAA5B,aAAEjI,EAAY,KAAElO,GAAMmW,EAC3C,MAAO,CACHjI,aAAcA,EACdlG,eAAgBhI,EAAKgI,eACxB,GAMD,CAAE6Z,yB3CtBkCA,CAAChiB,EAAIL,KAClC,CAAEA,KAAM4L,GAA4BK,qBAAsBhM,QAAS,CAAEF,OAAQM,EAAIL,W2CmBxDuZ,EA7BS9W,IAAiE,IAAhE,eAAE+F,EAAc,aAAEkG,EAAY,yBAAE2T,GAA0B5f,EAEpG,MAAMU,EAAWuL,EAAalG,GAS9B,OACIiQ,eAAA,OAAKC,UAAU,iCAAgCE,SAC3CH,eAACmH,GAAa,CAAOrC,MAAO,OAAQG,OAAQ,eAAgBmC,SAAU1c,EAASnD,KAAM8f,QAAS3gB,OAAOyR,OAAOlJ,GAAiB+V,SATpHA,CAACrE,EAAKoE,KACfra,EAASnD,OAASwd,GAGtB6E,EAAyB7Z,EAAgBgV,EAAM,KAMzC,IC7BD8E,GAAsB1f,GAC3BA,EAAM2f,WAAW,MAEV,IAAM3f,EAAM4f,UAAU,GAE7B5f,EAAM2f,WAAW,KAEV,KAAO3f,EAAM4f,UAAU,GAE3B,KC4EEC,GAAmBlJ,aAPR5C,IAA6B,IAA5B,aAAEjI,EAAY,KAAElO,GAAMmW,EAC3C,MAAO,CACHjI,aAAcA,EACdlG,eAAgBhI,EAAKgI,eACxB,GAKD,CAAE0D,mCAF0BqN,EAvES9W,IAAuE,IAAtE,eAAE+F,EAAc,aAAEkG,EAAY,+BAAExC,GAAgCzJ,EAEtG,MAAMU,EAAWuL,EAAalG,GAExBiV,EAAWA,CAACrE,EAAKoE,KACnBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMoE,IACpC,EAWA+D,EAAe,CACjBhE,MAAO,SACPkC,QAAS,CAAC,IAAK,KACf7O,OAAQ,CAACzN,EAASM,EAAGN,EAASS,GAC9B8b,MAAO,CAAC,IAAK,KACbjC,YAEEiF,EAAa,CACfnF,MAAO,SACPG,OAAQ,SACRF,MAAOra,EAASiF,OAChB4W,KAAM,IACNnB,WAAYmD,GACZvD,YAEEkF,EAAY,CACdpF,MAAO,QACPG,OAAQ,QACRF,MAAO8E,GAAmBnf,EAASP,OACnC6a,SA3BkBmF,CAACxJ,EAAKoE,KACxBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMkJ,GAAmB9E,KACvD,GAyBA8D,EAAY,CACd/D,MAAO,QACPG,OAAQ,QACRF,MAAOra,EAAS4E,MAChB+W,KAAM,GACNvK,IAAK,EACLD,IAAK,EACLuJ,WAAYmD,GACZvD,YAGJ,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAAC+G,GAAU,IAAK+B,IAChB9I,eAACoG,GAAW,IAAK6D,IACjBjK,eAACuH,GAAU,IAAK2C,IAChBlK,eAACoG,GAAW,IAAKyC,MAClB,ICcEuB,GAAsBtJ,aAPX5C,IAA6B,IAA5B,aAAEjI,EAAY,KAAElO,GAAMmW,EAC3C,MAAO,CACHjI,aAAcA,EACdlG,eAAgBhI,EAAKgI,eACxB,GAKD,CAAE0D,mCAF6BqN,EAvES9W,IAAuE,IAAtE,eAAE+F,EAAc,aAAEkG,EAAY,+BAAExC,GAAgCzJ,EAEzG,MAAMU,EAAWuL,EAAalG,GAExBiV,EAAWA,CAACrE,EAAKoE,KACnBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMoE,IACpC,EAaA+D,EAAe,CACjBhE,MAAO,SACPkC,QAAS,CAAC,IAAK,KACf7O,OAAQ,CAACzN,EAASM,EAAGN,EAASS,GAC9B8b,MAAO,CAAC,IAAK,KACbjC,YAEEqF,EAAW,CACbvF,MAAO,OACPkC,QAAS,CAAC,QAAS,UACnB7O,OAAQ,CAACzN,EAAS8E,MAAO9E,EAAS+E,QAClCwX,MAAO,CAAC,IAAK,KACbjC,YAEEkF,EAAY,CACdpF,MAAO,QACPG,OAAQ,QACRF,MAAO8E,GAAmBnf,EAASP,OACnC6a,SA5BkBmF,CAACxJ,EAAKoE,KACxBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMkJ,GAAmB9E,KACvD,GA0BA8D,EAAY,CACd/D,MAAO,QACPG,OAAQ,QACRF,MAAOra,EAAS4E,MAChB+W,KAAM,GACNvK,IAAK,EACLD,IAAK,EACLmJ,YAGJ,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAAC+G,GAAU,IAAK+B,IAChB9I,eAAC+G,GAAU,IAAKsD,IAChBrK,eAACuH,GAAU,IAAK2C,IAChBlK,eAACoG,GAAW,IAAKyC,MAClB,ICwBEyB,GAA6BxJ,aAPlB5C,IAA6B,IAA5B,aAAEjI,EAAY,KAAElO,GAAMmW,EAC3C,MAAO,CACHjI,aAAcA,EACdlG,eAAgBhI,EAAKgI,eACxB,GAKD,CAAE0D,mCAFoCqN,EAjFS9W,IAAuE,IAAtE,eAAE+F,EAAc,aAAEkG,EAAY,+BAAExC,GAAgCzJ,EAChH,MAAMU,EAAWuL,EAAalG,GAExBiV,EAAWA,CAACrE,EAAKoE,KACnBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMoE,IACpC,EAaA+D,EAAe,CACjBhE,MAAO,SACPkC,QAAS,CAAC,IAAK,KACf7O,OAAQ,CAACzN,EAASM,EAAGN,EAASS,GAC9B8b,MAAO,CAAC,IAAK,KACbjC,YAEEqF,EAAW,CACbvF,MAAO,OACPkC,QAAS,CAAC,QAAS,UACnB7O,OAAQ,CAACzN,EAAS8E,MAAO9E,EAAS+E,QAClCwX,MAAO,CAAC,IAAK,KACbjC,YAEEkF,EAAY,CACdpF,MAAO,QACPG,OAAQ,QACRF,MAAO8E,GAAmBnf,EAASP,OACnC6a,SA5BkBmF,CAACxJ,EAAKoE,KACxBtR,EAA+B,CAC3BnM,OAAQyI,EACRE,WAAY,IAAKvF,EAAU,CAACiW,GAAMkJ,GAAmB9E,KACvD,GA0BA8D,EAAY,CACd/D,MAAO,QACPG,OAAQ,QACRF,MAAOra,EAAS4E,MAChB+W,KAAM,GACNvK,IAAK,EACLD,IAAK,EACLuJ,WAAYmD,GACZvD,YAGEuF,EAAc,CAChBzF,MAAO,SACPG,OAAQ,eACRF,MAAOra,EAASgF,aAChB6W,KAAM,IACNnB,WAAYmD,GACZvD,YAGJ,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAAC+G,GAAU,IAAK+B,IAChB9I,eAAC+G,GAAU,IAAKsD,IAChBrK,eAACoG,GAAW,IAAKmE,IACjBvK,eAACuH,GAAU,IAAK2C,IAChBlK,eAACoG,GAAW,IAAKyC,MAClB,IC9EL2B,GAAiB,CACnB,CAACvb,EAAeG,QAAS4Q,eAACgK,GAAgB,IAC1C,CAAC/a,EAAeC,WAAY8Q,eAACoK,GAAmB,IAChD,CAACnb,EAAeE,mBAAoB6Q,eAACsK,GAA0B,KAkCtDG,GAAqB3J,aARV5C,IAA6B,IAA5B,aAAEjI,EAAY,KAAElO,GAAMmW,EAC3C,MAAO,CACHjI,aAAcA,EACdlG,eAAgBhI,EAAKgI,eACxB,GAMD,CAAC,EAF6B+Q,EArBS9W,IAAuC,IAAtC,eAAE+F,EAAc,aAAEkG,GAAcjM,EAExE,MAAMU,EAAWuL,EAAalG,GAC9B,OACIiQ,eAAA,OAAKC,UAAU,aAAYE,SACtBqK,GAAe9f,EAASnD,OACvB,ICdDmjB,GAAiBA,IAEtBtK,gBAAA,OAAAD,SAAA,CACIH,eAAC4F,GAAY,IACb5F,eAAC2I,GAAc,IACf3I,eAAC2J,GAAoB,IACrB3J,eAACyK,GAAkB,OCuGlBE,GAA4B7J,aARjB5C,IAA6D,IAA5D,KAAEnW,EAAI,8BAAE6N,EAA6B,cAAEa,GAAeyH,EAC3E,MAAO,CACHtI,8BAA+BA,EAC/B7F,eAAgBhI,EAAKgI,eACrB0G,cAAeA,EAClB,GAKD,CAAE1C,0CAFmC+M,EApGE9W,IAKpC,IALqC,eACxC+F,EAAc,cACd0G,EAAa,8BACbb,EAA6B,sCAC7B7B,GACH/J,EAEG,MAAMpC,EAAKmI,EAEL6a,EAAmBhV,EAA8BhO,GAEjDyb,EAAW5M,EAAcmU,EAAiBlV,YAC1CC,EAAe0N,EAAWA,EAAS9Z,KAAO,GAEhDya,qBAAU,KAEF4G,EAAiBlV,aAAe2N,GAAUtP,EAAsC,CAAEzM,OAAQM,EAAI8N,WAAY,KAAMC,aAAc,MAAO,GAC1I,CAAC0N,IAEJ,MAAM6D,EAAgBA,CAACvG,EAAKoE,KACxBhR,EAAsC,CAClCzM,OAAQM,EACRqI,WAAY,IAAK2a,EAAkB,CAACjK,GAAMoE,IAC5C,EAOAuE,EAAc,CAChBxE,MAAO,UACPG,OAAQ,UACRF,MAAOpP,EACPqP,SARmBuE,CAAC5I,EAAKoE,KACzBhR,EAAsC,CAAEzM,OAAQM,EAAIqI,WAAY,CAAEyF,WAAYqP,EAAOpP,aAAcc,EAAcsO,GAAOxb,OAAS,GAU/HwR,EAAUsI,EAAWrI,UAAQsI,KAAKD,EAAS9Z,MAAQyR,UAAQuI,MAC3DiG,EAAc,CAChB1E,MAAO,eACPkC,QAAS,CAAC,QAAS,UACnB7O,OAAQ,CAAC4C,EAAQvL,MAAOuL,EAAQtL,SAG9Bob,EAAgB,CAClB/F,MAAO,UACPkC,QAAS,CAAC,IAAK,KACf7O,OAAQ,CAACyS,EAAiB/U,EAAG+U,EAAiB7U,GAC9CkR,MAAO,CAAC,IAAK,KACbjC,SAAUkC,GAGR4D,EAAgB,CAClBhG,MAAO,GACPkC,QAAS,CAAC,IAAK,KACf7O,OAAQ,CAACyS,EAAiB9U,EAAG8U,EAAiB5U,GAC9CiR,MAAO,CAAC,IAAK,KACbjC,SAAUkC,GAGRuC,EAAa,CACf3E,MAAO,SACPkC,QAAS,CAAC,UAAW,WACrB7O,OAAQ,CAACyS,EAAiBpV,QAASoV,EAAiBnV,SACpDwR,MAAO,CAAC,IAAK,KACbZ,KAAM,GACNrB,SAAUkC,GAGRmD,EAAW,CACbvF,MAAO,OACPkC,QAAS,CAAC,QAAS,UACnB7O,OAAQ,CAACyS,EAAiBpb,MAAOob,EAAiBnb,QAClDwX,MAAO,CAAC,IAAK,KACbjC,SAAUkC,GAGd,OACI9G,gBAAA,OAAKH,UAAU,iCAAgCE,SAAA,CAC3CH,eAACwH,GAAY,IAAK8B,IAClBtJ,eAACoJ,GAAI,IAAKI,IACVxJ,eAAC+G,GAAU,IAAK0C,IAChBzJ,eAAC+G,GAAU,IAAKsD,IAChBrK,eAAC+G,GAAU,IAAK8D,IAChB7K,eAAC+G,GAAU,IAAK+D,MACd,IC/FDC,GAAwBA,IAE7B3K,gBAAA,OAAAD,SAAA,CACIH,eAAC4F,GAAY,IACb5F,eAAC2I,GAAc,IACf3I,eAAC2K,GAAyB,OC6IzBK,GAAiBlK,aAPN5C,IAAmC,IAAlC,KAAEnW,EAAI,mBAAEmO,GAAoBgI,EACjD,MAAO,CACHnO,eAAgBhI,EAAKgI,eACrBmG,qBACH,GAKD,CAAE7B,+BAFwByM,EA3IE9W,IAAyE,IAAxE,eAAE+F,EAAc,mBAAEmG,EAAkB,2BAAE7B,GAA4BrK,EAC/F,MAAMpC,EAAKmI,GAEL,KACFY,EAAI,KAAEwF,EAAI,QAAEV,EAAO,QAAED,EAAO,WAC5BY,EAAU,UAAEC,EAAS,YAAEC,EAAW,WAAEC,EAAU,SAAEC,EAAQ,UAExDyU,GAAY,EAAK,OAAEC,EAAS,UAAS,gBAAEC,EAAkB,EAAC,WAAEC,EAAa,GAAE,SAAEC,EAAW/c,EAAgBC,MAAK,WAE7G+c,GAAa,EAAK,gBAAEC,EAAkB,EAAC,gBAAEC,EAAkB,EAAC,eAAEC,EAAiB,EAAC,gBAChFC,EAAkB,UAAS,mBAAEC,EAAqB,EAAC,SAEnDC,GAAW,EAAK,WAAEC,GAAa,EAAK,QAAEC,EAAU,EAAC,WAAEC,EAAa,EAAC,cAAEC,EAAgB,IAAG,MACtFC,EAAQvd,EAAWC,KAAI,WAAEud,EAAapd,EAAiBC,KACvDmH,EAAmBtO,GAGjBod,EAAW,SAACrE,EAAKoE,GAAgF,IAC/F9U,EAAa,CACbU,OAAMwF,OAAMV,UAASD,UACrBY,aAAYC,YAAWC,cAAaC,aAAYC,eAHlBvO,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGgjB,GAIlB,CAAEA,WAAW,EAAMC,SAAQC,kBAAiBC,aAAYC,YAAa,CAAC,MAJjCpjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGqjB,GAKxC,CAAEA,YAAY,EAAMC,kBAAiBC,kBAAiBC,iBAAgBC,kBAAiBC,sBAAuB,CAAC,MALhD1jB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2jB,GAM/D,CAAEA,UAAU,EAAMC,aAAYC,UAASC,aAAYC,gBAAeC,QAAOC,cAAe,CAAC,GAG/Gjc,EAAW0Q,GAAOoE,EAElB1Q,EAA2B,CAAE/M,OAAQM,EAAIqI,cAC7C,EAGMkc,EAAW,CAAErH,MAAO,OAAQG,OAAQ,OAAQF,MAAOpU,EAAMqU,YACzDyE,EAAa,CAAE3E,MAAO,SAAUkC,QAAS,CAAC,UAAW,WAAY7O,OAAQ,CAAC3C,EAASC,GAAUwR,MAAO,CAAC,IAAK,KAAMjC,YAChHkF,EAAY,CAAEpF,MAAO,QAASG,OAAQ,OAAQF,MAAO5O,EAAM6O,YAC3DoH,EAAiB,CAAEtH,MAAO,cAAeG,OAAQ,aAAcmC,SAAUhR,EAAYiR,QAAS3gB,OAAOyR,OAAO3L,GAAgBwY,YAC5HqH,EAAgB,CAAEvH,MAAO,aAAcG,OAAQ,YAAamC,SAAU/Q,EAAWgR,QAAS3gB,OAAOyR,OAAOhL,GAAa6X,YACrHsH,EAAkB,CAAExH,MAAO,eAAgBG,OAAQ,cAAemC,SAAU9Q,EAAa+Q,QAAS3gB,OAAOyR,OAAO5K,GAAeyX,YAC/HuH,EAAiB,CAAEzH,MAAO,cAAeG,OAAQ,aAAcmC,SAAU7Q,EAAY8Q,QAAS3gB,OAAOyR,OAAO1K,GAAcuX,YAC1HwH,EAAe,CAAE1H,MAAO,OAAQG,OAAQ,WAAYF,MAAOvO,EAAU+P,KAAM,KAAMvB,YAkEvF,OACI5E,gBAAA,OAAKH,UAAU,iCAAgCE,SAAA,CAC3CH,eAAC2E,GAAS,IAAKwH,IACfnM,eAAC+G,GAAU,IAAK0C,IAChBzJ,eAAA,SACAA,eAACuH,GAAU,IAAK2C,IAChBlK,eAACmH,GAAa,IAAKiF,IACnBpM,eAACmH,GAAa,IAAKkF,IACnBrM,eAACmH,GAAa,IAAKmF,IACnBtM,eAACmH,GAAa,IAAKoF,IACnBvM,eAACoG,GAAW,IAAKoG,IACjBxM,eAAA,SACAA,eAACyI,GAAW,CAAO3D,MAAO,SAAUG,OAAQ,GAAIF,MAAOkG,EAAWjG,SA3ElDyH,CAAC9L,EAAK+L,KAE1B1H,EAAS,GAAI,GAAI0H,EAAUpB,EAAYM,EAAS,IA0E3CX,EAvEoB0B,MACzB,MAAMC,EAAkB,CAAE9H,MAAO,QAASG,OAAQ,SAAUF,MAAOmG,EAAQlG,YACrE6H,EAAqB,CAAE/H,MAAO,YAAaG,OAAQ,WAAYmC,SAAUiE,EAAUhE,QAAS3gB,OAAOyR,OAAO7J,GAAkB0W,YAC5H8H,EAAsB,CAAEhI,MAAO,YAAaG,OAAQ,kBAAmBF,MAAOoG,EAAiB5E,KAAM,KAAMvB,YAC3G+H,EAAuB,CAAEjI,MAAO,cAAeG,OAAQ,aAAcF,MAAOqG,EAAY7E,KAAM,KAAMvB,YAE1G,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAACuH,GAAU,IAAKqF,IAChB5M,eAACmH,GAAa,IAAK0F,IACnB7M,eAACoG,GAAW,IAAK0G,IACjB9M,eAACoG,GAAW,IAAK2G,MAClB,EA2DUJ,GAAyB,KACtC3M,eAAA,SACAA,eAACyI,GAAW,CAAO3D,MAAO,SAAUG,OAAQ,GAAIF,MAAOuG,EAAYtG,SAzDnDgI,CAACrM,EAAKsM,IAAajI,EAAS,GAAI,GAAIiG,EAAWgC,EAAUrB,KA0DxEN,EAxDoB4B,MACzB,MAAMC,EAAsB,CAAErI,MAAO,QAASG,OAAQ,kBAAmBF,MAAO2G,EAAiB1G,YAC3FoI,EAAsB,CAAEtI,MAAO,QAASG,OAAQ,kBAAmBF,MAAOwG,EAAiBvG,YAC3FqI,EAAsB,CAAEvI,MAAO,QAASG,OAAQ,kBAAmBF,MAAOyG,EAAiBjF,KAAM,MAAOvB,YACxGsI,EAAqB,CAAExI,MAAO,OAAQG,OAAQ,iBAAkBF,MAAO0G,EAAgBlF,KAAM,KAAMvB,YACnGuI,EAAyB,CAAEzI,MAAO,WAAYG,OAAQ,qBAAsBF,MAAO4G,EAAoBpF,KAAM,KAAMvB,YAEzH,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAACuH,GAAU,IAAK4F,IAChBnN,eAACoG,GAAW,IAAKgH,IACjBpN,eAACoG,GAAW,IAAKiH,IACjBrN,eAACoG,GAAW,IAAKkH,IACjBtN,eAACoG,GAAW,IAAKmH,MAClB,EA0CWL,GAAyB,KACvClN,eAAA,SACAA,eAACyI,GAAW,CAAO3D,MAAO,YAAaG,OAAQ,GAAIF,MAAO6G,EAAU5G,SAxCjDwI,CAAC7M,EAAK8M,IAAgBzI,EAAS,GAAI,GAAIiG,EAAWK,EAAYmC,KAyChF7B,EAvCuB8B,MAC5B,MAAMC,EAAiB,CAAE7I,MAAO,cAAeG,OAAQ,aAAcF,MAAO8G,EAAY7G,YAClF4I,EAAY,CAAE9I,MAAO,QAASG,OAAQ,QAASmC,SAAU6E,EAAO5E,QAAS3gB,OAAOyR,OAAOzJ,GAAasW,YACpG6I,EAAiB,CAAE/I,MAAO,cAAeG,OAAQ,aAAcmC,SAAU8E,EAAY7E,QAAS3gB,OAAOyR,OAAOrJ,GAAmBkW,YAC/H8I,EAAoB,CAAEhJ,MAAO,aAAcG,OAAQ,gBAAiBF,MAAOiH,EAAezF,KAAM,KAAMvB,YACtG+I,EAAiB,CAAEjJ,MAAO,cAAeG,OAAQ,aAAcF,MAAOgH,EAAYxF,KAAM,KAAMvB,YAC9FgJ,EAAc,CAAElJ,MAAO,UAAWG,OAAQ,UAAWF,MAAO+G,EAASvF,KAAM,KAAMvB,YAEvF,OACI5E,gBAAAuD,YAAA,CAAAxD,SAAA,CACIH,eAACyI,GAAW,IAAKkF,IACjB3N,eAACmH,GAAa,IAAKyG,IACnB5N,eAACmH,GAAa,IAAK0G,IACnB7N,eAACoG,GAAW,IAAK0H,IACjB9N,eAACoG,GAAW,IAAK2H,IACjB/N,eAACoG,GAAW,IAAK4H,MAClB,EAuBSN,GAA4B,OACtC,ICpIDO,GAAaA,IAElB7N,gBAAA,OAAAD,SAAA,CACIH,eAAC4F,GAAY,IACb5F,eAAC2I,GAAc,IACf3I,eAACgL,GAAc,OCPrBkD,GAAiC,CACnC,CAAEC,QfL2BC,CAACxmB,EAAI0M,KAClC,MAAM6O,EAAS7O,EAAMU,gBAAgBpN,GACrC,OAAOub,GAAUA,EAAO5b,OAASuE,EAAaG,SAAS,EeGzBoiB,UAAWrO,eAACmJ,GAAe,KACzD,CAAEgF,QZLwBG,CAAC1mB,EAAI0M,KAC/B,MAAM6O,EAAS7O,EAAMU,gBAAgBpN,GACrC,OAAOub,GAAUA,EAAO5b,OAASuE,EAAaI,MAAM,EYGzBmiB,UAAWrO,eAAC0J,GAAY,KACnD,CAAEyE,QLL0BI,CAAC3mB,EAAI0M,KACjC,MAAM6O,EAAS7O,EAAMU,gBAAgBpN,GACrC,OAAOub,GAAUA,EAAO5b,OAASuE,EAAaK,QAAQ,EKGzBkiB,UAAWrO,eAAC0K,GAAc,KACvD,CAAEyD,QHPiCK,CAAC5mB,EAAI0M,KACxC,MAAM6O,EAAS7O,EAAMU,gBAAgBpN,GACrC,OAAOub,GAAUA,EAAO5b,OAASuE,EAAaM,iBAAiB,EGK3BiiB,UAAWrO,eAAC+K,GAAqB,KACrE,CAAEoD,QDRsBM,CAAC7mB,EAAI0M,KAC7B,MAAM6O,EAAS7O,EAAMU,gBAAgBpN,GACrC,OAAOub,GAAUA,EAAO5b,OAASuE,EAAaO,IAAI,ECMzBgiB,UAAWrO,eAACiO,GAAU,MA0BtCS,GAAkB5N,aANP9W,IAAe,IAAd,KAAEjC,GAAMiC,EAC7B,MAAO,CACH+F,eAAgBhI,EAAKgI,eACxB,GAIgB,CAAC,EADS+Q,EAvBGf,IAC9B,MAAMnY,EAAKmY,EAAMhQ,eAGXoT,EAAS+K,GAA+BjlB,MAAMka,GAAWA,EAAOgL,QAAQvmB,EAAI0M,GAAM+I,cAExF,OACI2C,eAAA,OAAK+C,MAAO,CAAE4L,UAAW,IAAKxO,SACzBgD,EAASA,EAAOkL,UAAY,MAC3B,I,cCfd,MAqCaO,GArCkB7O,IAC3B,MAAO8O,EAAgBC,GAAqB7N,mBAAS,CACjD5J,IAAK,GACL9N,KAAM,eAGVya,qBAAU,KACN,MAAM+K,EAAQ,CACVD,kBAAmB9kB,IAAoB,IAAnB,KAAET,EAAI,IAAE8N,GAAKrN,EAC7B8kB,EAAkB,CAAEzX,MAAK9N,KAAMA,EAAKylB,QAAQ,yBAA0B,KAAM,GAQpF,OAFA1X,GAAyByI,EAAMsD,UAAW5G,GAASsS,EAAMD,kBAAkBrS,KAEpE,IAAOsS,EAAMD,kBAAoB,MAAU,GACnD,CAAC/O,EAAMsD,WAKV,OACIrD,eAAA,OACIiP,WAAS,EACTC,YALYA,IAAMhH,OAAsB,cAAInI,EAAMnY,GAMlDqY,UAAU,gBACV,YAAU,gBACV,gBAAeF,EAAMnY,GACrBmb,MAAO,CAAEoM,gBAAgB,OAAD3lB,OAASqlB,EAAexX,IAAG,MAAM8I,SAExD0O,EAAetlB,MACd,ECRD6lB,GAAiBtO,aANN9W,IAAwB,IAAvB,cAAEyM,GAAezM,EACtC,MAAO,CACHyM,gBACH,GAIgB,CAAC,EADQqK,EAxBGf,IAO7B,OACIC,eAAA,OAAKpY,GAAG,gBAAgB,YAAU,kBAAiBuY,UAP7BtC,EAQAkC,EAAMtJ,cAPrB/P,OAAOyO,KAAK0I,GAAWzC,KAAKxT,GACxBoY,eAAC4O,GAAY,CAAUhnB,GAAIA,EAAIyb,SAAUxF,EAAUjW,IAAhCA,QAFRiW,KAShB,I,OCVP,MAAMwR,GAAoBtP,IAE7B,MAAOvV,EAAU8kB,GAAerO,mBAAS,CAAEsO,IAAK,EAAGC,KAAM,KAClD/S,EAAMgT,GAAWxO,mBAAS,CAAEf,WAAW,EAAOwP,eAAgB,OAE/DC,EAAgBrK,iBAAO,CAAEta,EAAG,EAAGG,EAAG,IAClCykB,EAAWtK,iBAAO1N,SAASC,cAAc,QAE/CmM,qBAAU,KACNkE,OAAO2H,iBAAiB,cAAeC,GAChC,IAAM5H,OAAO6H,oBAAoB,cAAeD,KACxD,IAEH9L,qBAAU,KAEN4L,EAASnK,QAAQoK,iBAAiB,aAAcG,GACzC,IAAMJ,EAASnK,QAAQsK,oBAAoB,aAAcC,KACjE,IAEHhM,qBAAU,KACN,IAAKvH,EAAKyD,UACN,OAGJ,MACM,EAAElV,EAAC,EAAEG,GAAMwkB,EAAclK,SACzB,YAAEwK,EAAW,aAAEC,GAAiBN,EAASnK,QAEzC0K,EAAWnlB,EAAIilB,EAAe/H,OAAOkI,WACrCC,EAAWllB,EAAI+kB,EAAgBhI,OAAOoI,YAK5ChB,EAAY,CAAEC,IAHFc,EAAU,EAAKllB,EAAI+kB,EAPX,GAOyC/kB,EAPzC,GAUDqkB,KAFNW,EAAU,EAAKnlB,EAAIilB,EARZ,GAQyCjlB,EARzC,IAUM,GAE3B,CAACyR,EAAKyD,YAET,MAAM4P,EAAgBS,uBAAavY,IAC/B,IAAK+H,EAAMyQ,sBAAsBxY,GAAU,OAE3C,MAAM,OAAEE,EAAM,QAAEuY,EAAO,QAAEC,GAAY1Y,EACrC2X,EAAclK,QAAQza,EAAIylB,EAC1Bd,EAAclK,QAAQta,EAAIulB,EAE1BjB,EAAQ,CAAEC,eAAgBxX,EAAQgI,WAAW,IAC7CoP,EAAY,CAAEC,IAAKmB,EAASlB,KAAMkB,GAAU,GAC7C,IAEGV,EAAeO,uBAAY,KAC7Bd,EAAQ,CAAEvP,WAAW,EAAOwP,eAAgB,MAAO,GACpD,IAEGrP,EAAUkQ,uBAAavY,IACpB+H,EAAM4Q,gBAAgB3Y,KAE3B+H,EAAM6Q,aAAa5Y,EAAOyE,EAAKiT,gBAC/BM,IAAc,GACf,CAACvT,EAAKiT,iBAET,OACI1P,eAAA,OACIC,UAAU,gBACV4E,IAAK+K,EACLvP,QAASA,EACT0C,MAAO,IAAKvY,EAAUqmB,QAASpU,EAAKyD,UAAY,QAAU,QAASC,SAElEJ,EAAM+Q,WAAW1V,KAAI,CAAC2V,EAAQC,KAC3B,MAAM,OAAE1J,EAAM,MAAExC,EAAK,YAAEmM,EAAW,UAAEhR,EAAY,IAAO8Q,EAEvD,OAAO/Q,eAAA,OAEH,cAAasH,EACbrH,UAAWA,EACX8C,MAAO,CAAE8N,QAASI,EAAYxU,EAAKiT,gBAAkB,QAAU,QAASvP,SAC1E2E,GAJOkM,EAIK,KAEhB,ECnFRE,GACS,YADTA,GAEc,iBAFdA,GAGa,gBAHbA,GAIY,eAqGLC,GAAwBrQ,aALZrE,IACd,CAAC,IAMR,CACI2U,kBvCjH0B5pB,IACvB,CAAED,KAAMwL,EAAiBC,cAAexL,YuCiH3C6pB,qBvC3G6BzpB,IAC1B,CAAEL,KAAMwL,EAAiBE,gBAAiBzL,QAAS,CAAEI,SuCsG3BkZ,EAxFGf,IAEpC,MAAMuR,EAAuB5B,GAGL,qBADHA,EAAiBA,EAAevH,aAAa,kBAAehgB,GAU3E2oB,EAAa,CACf,CAAExJ,OAAQ4J,GAAuBpM,MAAO,YAAamM,YAAaA,KAAM,GACxE,CAAE3J,OAAQ4J,GAA4BpM,MAAO,iBAAkBmM,YARpCvB,IAE3B,MAAM9nB,EAAK8nB,EAAiB6B,SAAS7B,EAAevH,aAAa,kBAAoBqJ,IACrF,OAAQ/lB,OAAO6c,MAAM1gB,EAAG,GAMxB,CAAE0f,OAAQ4J,GAA2BpM,MAAO,gBAAiBmM,YAAaK,GAC1E,CAAEhK,OAAQ4J,GAA0BpM,MAAO,eAAgB7E,UAAW,gBAAiBgR,YAAaK,IAuDxG,OACItR,eAACqP,GAAgB,CACRiC,sBAAqBd,sBAtDHxY,IAC3B,MAAMyZ,EAAWzZ,EAAME,OAAOiQ,aAAa,aAC3C,MAAqB,oBAAbsJ,GAA8C,iBAAZA,CAA2B,EAoDhBd,gBAjDhC3Y,GACdoG,QAAQpG,EAAME,OAAOiQ,aAAa,gBAgD6ByI,aA7CrDA,CAAC5Y,EAAO0X,KACzB,MAAMpI,EAAStP,EAAME,OAAOiQ,aAAa,eACzC,GAAIb,GAAUA,IAAW4J,GAAuB,CAS5C,YAF2B9Y,IANHH,IACpB2B,GAAWM,WAAWjC,GAAO,KACzB,MAAMwE,EAAOxE,EAAMmD,KAAK1E,IAAI,CAAQ9O,GAAIwU,KAAU1F,WAClDqJ,EAAMqR,kBAAkB3U,EAAK,GAC/B,IAGahD,OAEvB,CAEA,MAAM7R,EAAK2pB,SAAS7B,EAAevH,aAAa,kBAEhD,GAAKvgB,EAIL,GAAI0f,IAAW4J,GAAf,CAaK,GAAI5J,IAAW4J,GAChBtX,GAAW4B,aAAalH,GAAM+I,WAAW5G,cAAc7O,IACvDmY,EAAMsR,qBAAqBzpB,QAE1B,GAAI0f,IAAW4J,GAA4B,CAC5C,MAAMxa,EAAOpC,GAAM+I,WAAW5G,cAAc7O,GjDkDxBoR,EiDjDJtC,EjDiDauC,EiDjDPvC,EAAKnN,KjDkDnCwP,GAAWC,EAASC,EAAU,mCiDjD1B,CjDgDuByY,IAAC1Y,EAASC,CiDhDjC,KApBA,CAS+Bb,IARHH,IACC,IAAjBA,EAAM/P,SACV8P,EAAME,OAAO0C,SAAMzS,EACnByR,GAAWM,WAAWjC,EAAM,IAAI,KAC5B,MAAMwE,EAAOxE,EAAMmD,KAAK1E,IAAI,CAAQ9O,GAAIA,EAAI8O,WAC5CqJ,EAAMqR,kBAAkB3U,EAAK,IAC/B,IAGahD,OAUvB,GAKoFqX,cAChF,IC7FCa,GAAWA,CAACC,EAAQ5mB,EAAGG,IAE5BH,EAAI4mB,EAAO5mB,GACXA,EAAI4mB,EAAO5mB,EAAI4mB,EAAOpiB,OACtBrE,EAAIymB,EAAOzmB,GACXA,EAAIymB,EAAOzmB,EAAIymB,EAAOniB,OAIjBoiB,GAAoBnrB,OAAOC,OAAO,CAC3CmrB,IAAK,MACLljB,OAAQ,SACRmjB,OAAQ,W,cCXL,MAAMC,GAA2B,eAElCC,GAAwB,CAC1B,CAACnmB,EAAaG,WCdH,yrJDeX,CAACH,EAAaI,QEfH,ijKFgBX,CAACJ,EAAaK,UGhBH,y5FHiBX,CAACL,EAAaM,mBIjBH,izIJkBX,CAACN,EAAaO,MKlBH,8zEL6BF6lB,GAAOloB,IAA2C,IAA1C,KAAEzB,EAAI,eAAEwH,EAAc,WAAE4E,GAAY3K,EACrD,MAAOmoB,EAAWC,GAAgBnR,oBAAS,GAErCoR,EAAyBA,CAAChqB,EAAOT,IAC5BS,EAAMS,MAAKwpB,GAAKA,EAAE1qB,KAAOA,GAAM0qB,EAAEjqB,MAAMH,OAAS,GAAKmqB,EAAuBC,EAAEjqB,MAAOT,KAGhGoc,qBAAU,KACFqO,EAAuB9pB,EAAKF,MAAO0H,IACnCqiB,GAAa,EACjB,GACD,CAACriB,IAEJ,MAAMwiB,EAAYvS,eAAA,OAAKC,UAAU,aAAYE,SACxC5X,EAAKF,MAAM+S,KAAI7S,GAAQyX,eAACkS,GAAI,CAAe3pB,KAAMA,EAAMwH,eAAgBA,EAAgB4E,WAAYA,GAAjEpM,EAAKX,QAGtC4qB,EAAUxS,eAAA,OAAKC,UAAU,UAAUI,QAASA,IAAM+R,GAAcD,GAAWhS,SAAEgS,EAAYnS,eAAA2D,YAAA,CAAAxD,SAAE,MAAWH,eAAA2D,YAAA,CAAAxD,SAAE,aAExGrN,EAAawB,GAAM+I,WAAWrI,gBAAgBzM,EAAKX,IAAIL,KACvDkrB,EAAY,CAAEtD,gBAAgB,OAAD3lB,OAASyoB,GAAsBnf,GAAW,MACvE4f,EAAa3iB,IAAmBxH,EAAKX,GAAK,CAAE+qB,gBAAiB,aAC/Dhe,IAAepM,EAAKX,GAAK,CAAE+qB,gBAAiB,iBAAoB,CAAC,EAErE,OACIvS,gBAAA,OAAKH,UAAU,OAAME,SAAA,CACM,IAAtB5X,EAAKF,MAAMH,OAAe,KAAOsqB,EAClCxS,eAAA,OAAKC,UAAU,YAAY8C,MAAO0P,IAClCzS,eAAA,OAAKiP,UAAU,OAAOhP,UAAU,YAAY,UAAS1X,EAAKX,GAAI,YAAWoqB,GAA0BjP,MAAO2P,EAAWvS,SAChH5X,EAAKgB,KAAOhB,EAAKgB,KAAO,QAE5B4oB,EAAY,KAAOI,IAClB,EMtBDK,GAAO9R,aANI5C,IAAe,IAAd,KAAEnW,GAAMmW,EAC7B,MAAO,CACH2U,UAAW9qB,EACd,GAGe+Y,EAtBE9W,IAAoB,IAAnB,UAAE6oB,GAAW7oB,EAEhC,OACIgW,eAAA2D,YAAA,CAAAxD,SACK0S,EAAU/iB,SAAWkQ,eAACkS,GAAI,CAEvB3pB,KAAMsqB,EAAU/iB,SAChBC,eAAgB8iB,EAAU9iB,eAC1B4E,WAAYke,EAAUle,YAHjBke,EAAU/iB,SAASlI,IAGe,MAC5C,ICTLkrB,GAAiB,CACnB,CAACjB,GAAkBjjB,QAAS,gBAC5B,CAACijB,GAAkBC,KAAM,iBAGvBiB,GAAeC,IACjBtsB,OAAOyR,OAAO2a,IAAgBxqB,SAAS2X,IACnC+S,EAAYtL,UAAUC,OAAO1H,EAAU,GACzC,EA4JOgT,GAAiBnS,aANN9W,IAAwB,IAAvB,cAAEyM,GAAezM,EACtC,MAAO,CACHyM,cAAeA,EAClB,GAKD,CACIyc,evFnJuB1rB,IACpB,CAAED,KAAMd,EAAaM,UAAWS,YuFmJnC2rB,uBvFxI+B3rB,IAC5B,CAAED,KAAMd,EAAaK,mBAAoBU,YuFwI5CH,0BACA2K,2BACAa,mBACAN,6BACA7K,mBACAD,uBACA+K,gCAXsBsO,EA9IGf,IAU7B,IAAIqT,EAAkB9pB,GAAY,GAC9B+pB,EAAiB/pB,GAAY,GAC7BgqB,EAAmB1b,SAASC,cAAc,OAC1C0b,EAAkB,GAGtB,MAmFMC,EAAiBxb,IAGnB+a,GAAYO,GAEZF,EAAkB9pB,GAAY,GAC9B+pB,EAAiB/pB,GAAY,GAC7BgqB,EAAmB1b,SAASC,cAAc,OAC1C0b,EAAiB,EAAE,EAYvB,OAEIvT,cADA,CACA,OAAKpY,GAAG,iBACJsnB,YA1GiBlX,IACrB,MAAMlI,EAAWwE,GAAM+I,WAAWtV,KAAK+H,SACvCsjB,EAAkBrqB,EAAY0C,OAAOuM,EAAME,OAAOiQ,aAAa,YAAarY,EAAS,EAyGjF+X,WAvEgB7P,IAEpBA,EAAM8P,iBAEN,MAAMhY,EAAWwE,GAAM+I,WAAWtV,KAAK+H,SAEjC2jB,EAAkB1qB,EAAY0C,OAAOuM,EAAME,OAAOiQ,aAAa,YAAarY,GASlF,KANI2jB,GACAL,EAAgBxrB,KAAO6rB,EAAgB7rB,KACtCiB,EAAQ4qB,EAAgB7rB,GAAIwrB,KAC5B1qB,EAAS0qB,EAAgBxrB,GAAI6rB,IAM9B,OAFAV,GAAYO,QACZD,EAAiB/pB,GAAY,IAI7BgqB,IAAqBtb,EAAME,SAC3B6a,GAAYO,GACZA,EAAmBtb,EAAME,OACzBqb,EAAiB,IAKrB,IAAI/oB,ERzFuBkpB,EAAC9B,EAAQ5mB,EAAGG,KAC3C,MAAMokB,EAAM,CACRvkB,EAAG4mB,EAAO5mB,EACVG,EAAGymB,EAAOzmB,EACVqE,MAAOoiB,EAAOpiB,MACdC,OAAwB,GAAhBmiB,EAAOniB,QAGbkkB,EAAS,CACX3oB,EAAG4mB,EAAO5mB,EACVG,EAAGymB,EAAOzmB,EAAoB,GAAhBymB,EAAOniB,OACrBD,MAAOoiB,EAAOpiB,MACdC,OAAwB,GAAhBmiB,EAAOniB,QAGnB,OAAIkiB,GAASpC,EAAKvkB,EAAGG,GAAW0mB,GAAkBC,IAC9CH,GAASgC,EAAQ3oB,EAAGG,GAAW0mB,GAAkBjjB,OACzCijB,GAAkBE,MAAM,EQwEjB2B,CAAoBJ,EAAiBM,wBAAyB5b,EAAMyY,QAASzY,EAAM0Y,SAI9FlmB,IAAaqnB,GAAkBE,QAAUvnB,IAAa+oB,IACtDR,GAAYO,GnF7HI,ImF+HZG,EAAgB7rB,KAChB4C,EAAWqnB,GAAkBjjB,QAEjC2kB,EAAiB/oB,EACjB8oB,EAAiB5L,UAAUM,IAAI8K,GAAetoB,KAIlD6oB,EAAiBI,CAAe,EA4B5BI,UAAWL,EACXvL,OAxGYjQ,IAChB,GAAIkQ,OAAsB,cAAG,CACzB,MAAMxS,EAAawS,OAAsB,qBAClCA,OAAsB,cAC7B,MAAMvS,EAAeoK,EAAMtJ,cAAcf,GAAYnM,KAC/CA,EAAOwW,EAAMtJ,cAAcf,GAAYnM,KAAKylB,QAAQ,YAAa,IACjE8E,EAAQ1X,KACd2D,EAAM/N,yBAAyB8hB,GAC/B/T,EAAMlN,iBAAiBihB,EAAOhoB,EAAaI,QAC3C6T,EAAMxN,2BAA2BuhB,GACjC/T,EAAMrY,iBAAiB2rB,EAAezrB,GAAIksB,GAC1C/T,EAAMtY,qBAAqB,CAAEH,OAAQwsB,EAAOvqB,SAC5CwW,EAAMvN,6BAA6B,CAAElL,OAAQwsB,EAAO7jB,WAAY,CAAEyF,aAAYC,kBAC9EoK,EAAM1Y,wBAAwBysB,EAClC,CAEIV,EAAgBxrB,GAAK,GAAKyrB,EAAezrB,GAAK,IAK9C2rB,IAAmB1B,GAAkBjjB,OACrCmR,EAAMmT,eAAe,CAAEliB,SAAUoiB,EAAiBvrB,YAAawrB,EAAezrB,KAG9EmY,EAAMoT,uBAAuB,CAAEniB,SAAUoiB,EAAiBvrB,YAAawrB,EAAezrB,MARtF4rB,EAAcxb,EAWE,EA6EhBqI,QAhBarI,IACjB,IAAKA,EAAME,OAAO6b,aAAa,WAE3B,YADAhU,EAAM1Y,wBAAwB,MAGlC,MAAM2sB,EAAavoB,OAAOuM,EAAME,OAAOiQ,aAAa,YACpDpI,EAAM1Y,wBAAwB2sB,EAAW,EAUhB7T,SAErBH,eAAC4S,GAAI,KACH,ICtJR1B,GAAc,IACbplB,EACHmoB,aAAc,eACdC,YAAa,cACbC,aAAc,eACdC,cAAe,iBAsNNC,GAAmBvT,aALR9W,IAAU,MAANA,EACxB,MAAO,CAAC,CAAC,GAMT,CACItC,mBACAD,uBACA6sB,oBxFnO4BhtB,IACzB,CAAEC,KAAMd,EAAaI,iBAAkBW,QAASF,IwFmOnDD,0BACAktB,iBxFlLyB3sB,IACtB,CAAEL,KAAMd,EAAaS,YAAaM,QAAS,CAAEF,OAAQM,KwFkLxDiL,mBACA2hB,mBzEvO2B5sB,IACxB,CAAEL,KAAMkL,EAA0BE,cAAenL,QAAS,CAACF,OAAQM,KyEuOtEoK,2BACAC,6BACAwiB,2B/E7OmC7sB,IAChC,CAAEL,KAAMoK,EAAwBG,uBAAwBtK,QAAS,CAAEF,OAAQM,K+E6O9E2K,6BACAC,+BACAkiB,6B5EhPqC9sB,IAClC,CAAEL,KAAM2K,EAA0BG,yBAA0B7K,QAAS,CAAEF,OAAQM,K4EgPlF+sB,6BpEtPoCA,CAAC/sB,EAAIL,KACtC,CAAEA,KAAM4L,GAA4BE,yBAA0B7L,QAAS,CAAEF,OAAQM,EAAIL,UoEsPxFkM,kCACAmhB,+BpEjPuChtB,IACpC,CAAEL,KAAM4L,GAA4BG,2BAA4B9L,QAAS,CAAEF,OAAQM,KoEiPtFitB,oCjE3P4CjtB,IACzC,CAAEL,KAAMmM,GAAqCE,kCAAmCpM,QAAS,CAAEF,OAAQM,KiE2PtGmM,yCACA+gB,sCjEtP8CltB,IAC3C,CAAEL,KAAMmM,GAAqCG,oCAAqCrM,QAAS,CAAEF,OAAQM,KiEsPxGmtB,yB9D9PiCntB,IAC9B,CAAEL,KAAMyM,GAAwBE,qBAAsB1M,QAAS,CAAEF,OAAQM,K8D8P5EyM,8BACA2gB,2B9DzPmCptB,IAChC,CAAEL,KAAMyM,GAAwBG,uBAAwB3M,QAAS,CAAEF,OAAQM,M8DgOtDkZ,EArLGf,IAE/B,MAAMkV,EAAiBvF,IAEnB,MAAM9nB,EAAK8nB,EAAiBA,EAAevH,aAAa,gBAAahgB,EACrE,OAAOiW,QAAQxW,IpF7DK,IoF6DE6D,OAAO7D,EAAoB,EAO/CkpB,EAAa,CACf,CAAExJ,OAAQ4J,GAAYjlB,UAAW6Y,MAAO,gBAAiBmM,YAAaA,KAAM,GAC5E,CAAE3J,OAAQ4J,GAAYhlB,OAAQ4Y,MAAO,aAAcmM,YAAaA,KAAM,GACtE,CAAE3J,OAAQ4J,GAAY9kB,kBAAmB0Y,MAAO,qBAAsBmM,YAAaA,KAAM,GACzF,CAAE3J,OAAQ4J,GAAY/kB,SAAU2Y,MAAO,eAAgBmM,YAAaA,KAAM,GAC1E,CAAE3J,OAAQ4J,GAAY7kB,KAAMyY,MAAO,WAAYmM,YAAaA,KAAM,GAClE,CAAE3J,OAAQ4J,GAAY+C,aAAcnP,MAAO,QAASmM,YAAagE,GACjE,CAAE3N,OAAQ4J,GAAYgD,YAAapP,MAAO,OAAQmM,YAAagE,GAC/D,CAAE3N,OAAQ4J,GAAYiD,aAAcrP,MAAO,QAASmM,YAZhCiE,IACb9W,QAAQ9J,GAAM+I,WAAWtV,KAAK4M,aAYrC,CAAE2S,OAAQ4J,GAAYkD,cAAetP,MAAO,SAAU7E,UAAW,gBAAiBgR,YAAagE,IAmB7FE,EAAYA,CAAC5sB,EAAM6sB,EAAcC,EAAQC,KAE3C,IADAA,EAAaA,GAAc,IACZnX,SAAS5V,EAAKX,IAAO,OACpC,MAAMub,EAAS7O,GAAM+I,WAAWrI,gBAAgBzM,EAAKX,IAC/CksB,EAAQ1X,KACdkZ,EAAWltB,KAAK0rB,GAChB/T,EAAM/N,yBAAyB8hB,GAC/B,MAAMyB,EAAiB,IAChBjhB,GAAM+I,WAAWpI,mBAAmB1M,EAAKX,KAuChD,OArCIytB,IACAE,EAAenlB,WAAailB,EAAOrqB,EACnCuqB,EAAellB,WAAaglB,EAAOlqB,GAEvC4U,EAAM9N,2BAA2B,CAC7B3K,OAAQwsB,EACR7jB,WAAYslB,IAEhBxV,EAAMlN,iBAAiBihB,EAAO3Q,EAAO5b,MACjC4b,EAAO5b,OAASuE,EAAaI,QAC7B6T,EAAMxN,2BAA2BuhB,GACjC/T,EAAMvN,6BAA6B,CAC/BlL,OAAQwsB,EACR7jB,WAAYqE,GAAM+I,WAAW9H,qBAAqBhN,EAAKX,OAEpDub,EAAO5b,OAASuE,EAAaK,UACpC4T,EAAM4U,6BAA6Bb,EAAO7kB,EAAeC,WACzD6Q,EAAMtM,+BAA+B,CACjCnM,OAAQwsB,EACR7jB,WAAYqE,GAAM+I,WAAWpH,aAAa1N,EAAKX,OAE5Cub,EAAO5b,OAASuE,EAAaM,mBACpC2T,EAAM8U,oCAAoCf,GAC1C/T,EAAMhM,sCAAsC,CACxCzM,OAAQwsB,EACR7jB,WAAYqE,GAAM+I,WAAWzH,8BAA8BrN,EAAKX,OAE7Dub,EAAO5b,OAASuE,EAAaO,OACpC0T,EAAMgV,yBAAyBjB,GAC/B/T,EAAM1L,2BAA2B,CAC7B/M,OAAQwsB,EACR7jB,WAAYqE,GAAM+I,WAAWnH,mBAAmB3N,EAAKX,OAG7DmY,EAAMrY,iBAAiB0tB,EAActB,GACrC/T,EAAMtY,qBAAqB,CAAEH,OAAQwsB,EAAOvqB,KAAMhB,EAAKgB,OACvDhB,EAAKF,MAAMC,SAAQgqB,GAAK6C,EAAU7C,EAAGwB,OAAO3rB,EAAWmtB,KAChDxB,CAAK,EA+EhB,OACI9T,eAACqP,GAAgB,CACRiC,oBAAqB2D,EAAezE,sBAhJlBxY,IAC3B,MAAMzQ,EAAOyQ,EAAME,OAAOiQ,aAAa,aAEvC,OADWnQ,EAAME,OAAOiQ,aAAa,YACvB5gB,GAAQA,IAASyqB,EAAwB,EA6IarB,gBA1I/C3Y,GACdoG,QAAQpG,EAAME,OAAOiQ,aAAa,gBAyI4CyI,aA9EpEA,CAAC5Y,EAAO0X,KACzB,MAAMpI,EAAStP,EAAME,OAAOiQ,aAAa,eACnCvgB,EAAK6D,OAAOikB,EAAevH,aAAa,YAE9C,GAAIb,IAAW4J,GAAYkD,cAAe,CACtC,MAAMjR,EAAS7O,GAAM+I,WAAWrI,gBAAgBpN,GAOhD,GALAmY,EAAM1Y,wBAAwB,MAC9B0Y,EAAMwU,iBAAiB3sB,GACvBmY,EAAMyU,mBAAmB5sB,GACzBmY,EAAM0U,2BAA2B7sB,GAE7Bub,EAAO5b,OAASuE,EAAaG,gBAC5B,GAAIkX,EAAO5b,OAASuE,EAAaI,OAAU6T,EAAM2U,6BAA6B9sB,QAC9E,GAAIub,EAAO5b,OAASuE,EAAaK,SAAY4T,EAAM6U,+BAA+BhtB,QAClF,GAAIub,EAAO5b,OAASuE,EAAaM,kBAAqB2T,EAAM+U,sCAAsCltB,OAClG,IAAIub,EAAO5b,OAASuE,EAAaO,KAC/B,MAAM,IAAIuD,MAAM,iDADuBmQ,EAAMiV,2BAA2BptB,EACN,CACzE,MACJ,CAEA,GAAI0f,IAAW4J,GAAY+C,aAAc,CACrC,MAAMnkB,EAAWwE,GAAM+I,WAAWtV,KAAK+H,SACjCvH,EAAOQ,EAAYnB,EAAIkI,GACvBmB,EAAazI,EAAUD,EAAKX,GAAIkI,GAChCgkB,EAAQqB,EAAU5sB,EAAM0I,EAAWrJ,GAAI,CAAEoD,EAAG,GAAIG,GAAI,KAE1D,YADA4U,EAAM1Y,wBAAwBysB,EAElC,CAEA,GAAIxM,IAAW4J,GAAYgD,YAEvB,YADAnU,EAAMuU,oBAAoB1sB,GAI9B,GAAI0f,IAAW4J,GAAYiD,aAAc,CACrC,MAAMrkB,EAAWwE,GAAM+I,WAAWtV,KAAK+H,SACjCvH,EAAOQ,EAAYuL,GAAM+I,WAAWtV,KAAK4M,WAAY7E,GACrDgkB,EAAQqB,EAAU5sB,EAAMX,EAAI,CAAEoD,EAAG,EAAGG,EAAG,IAG7C,OAFA4U,EAAMuU,oBAAoB,WAC1BvU,EAAM1Y,wBAAwBysB,EAElC,CAEA,MAAMA,EAAQ1X,KAGd,GAFA2D,EAAM/N,yBAAyB8hB,GAE3BxM,IAAW4J,GAAYhlB,OACvB6T,EAAMlN,iBAAiBihB,EAAOhoB,EAAaI,QAC3C6T,EAAMxN,2BAA2BuhB,QAEhC,GAAIxM,IAAW4J,GAAYjlB,UAC5B8T,EAAMlN,iBAAiBihB,EAAOhoB,EAAaG,gBAE1C,GAAIqb,IAAW4J,GAAY/kB,SAC5B4T,EAAMlN,iBAAiBihB,EAAOhoB,EAAaK,UAC3C4T,EAAM4U,6BAA6Bb,EAAO7kB,EAAeC,gBAExD,GAAIoY,IAAW4J,GAAY9kB,kBAC5B2T,EAAMlN,iBAAiBihB,EAAOhoB,EAAaM,mBAC3C2T,EAAM8U,oCAAoCf,OAEzC,IAAIxM,IAAW4J,GAAY7kB,KAK5B,MAAM,IAAIuD,MAAM,8CAJhBmQ,EAAMlN,iBAAiBihB,EAAOhoB,EAAaO,MAC3C0T,EAAMgV,yBAAyBjB,EAInC,CAIA/T,EAAMrY,iBAAiBE,EAAIksB,GAC3B/T,EAAM1Y,wBAAwBysB,EAAM,EAK+DhD,cAC/F,ICxHC0E,GAAgB1U,aAfJxM,IACd,CACHvE,eAAgBuE,EAAMvM,KAAKgI,eAC3BD,SAAUwE,EAAMvM,KAAK+H,SACrBmF,mBAAoBX,EAAMW,mBAC1BM,qBAAsBjB,EAAMiB,qBAC5BK,8BAA+BtB,EAAMsB,8BACrCZ,gBAAiBV,EAAMU,gBACvByB,cAAenC,EAAMmC,cACrBR,aAAc3B,EAAM2B,aACpBC,mBAAoB5B,EAAM4B,sBAO9B,CAAEjE,8BAFuB6O,EA/EE9W,IAAmF,IAAlF,SAAE6Z,EAAQ,eAAE9T,EAAc,2BAAEkC,EAA0B,mBAAEgD,GAAoBjL,EAgCxG,GA9BAga,qBAAU,KACNH,EAASM,IAAIC,MAAMvZ,SAASgZ,EAAS4R,oBAAoBC,MACzD7R,EAAS4R,oBAAoBnR,WACtB,KACHT,EAASM,IAAIC,MAAMuR,YAAY9R,EAAS4R,oBAAoBC,MAC5D7R,EAAS4R,oBAAoBjR,YAAY,IAE9C,IAEHR,qBAAU,KACN,IAAKjU,EACD,MAAO,OAGX,MAAM0U,EAAqBA,KACvB,MAAMmR,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAC7E8T,EAAS4R,oBAAoBnG,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QAC3GP,EAAS4R,oBAAoBM,YAAYlS,EAASgS,UAAUG,kBAAkBJ,IAC9E/R,EAAS4R,oBAAoBQ,mBAAmBL,EAAQplB,SAAS,EAOrE,OAJAiU,IAEAZ,EAASa,OAAO/Y,GAAG,SAAU8Y,GAEtB,IAAMZ,EAASa,OAAOH,IAAI,SAAUE,EAAmB,GAE/D,CAAC1U,IAGAA,EAAgB,CAEhB,MAAM6lB,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAE7E8T,EAAS4R,oBAAoBS,OAC7BrS,EAAS4R,oBAAoBnG,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QAC3GP,EAAS4R,oBAAoBM,YAAYlS,EAASgS,UAAUG,kBAAkBJ,IAC9E/R,EAAS4R,oBAAoBQ,mBAAmBL,EAAQplB,UAExDqT,EAAS4R,oBAAoBU,SAAQ,CAACC,EAAIC,KACtC,MAAMhB,EAASxR,EAASa,OAAO4R,WAAW,CAAEtrB,EAAGurB,iBAAMH,GAAKjrB,EAAGorB,iBAAMF,KAE7DpmB,EAAa,IAAKgF,EAAmBlF,IAC3CE,EAAWG,UAAYmmB,iBAAMtmB,EAAWG,UAAYilB,EAAOrqB,GAC3DiF,EAAWI,UAAYkmB,iBAAMtmB,EAAWI,UAAYglB,EAAOlqB,GAE3D8G,EAA2B,CAAE3K,OAAQyI,EAAgBE,cAAa,GAE1E,MAEI4T,EAAS4R,oBAAoBe,OAC7B3S,EAAS4R,oBAAoBU,QAAQ,MAGzC,OACInW,eAAA2D,YAAA,GAAK,ICoBA8S,GAAa3V,aAfDxM,IACd,CACHvE,eAAgBuE,EAAMvM,KAAKgI,eAC3BD,SAAUwE,EAAMvM,KAAK+H,SACrBmF,mBAAoBX,EAAMW,mBAC1BM,qBAAsBjB,EAAMiB,qBAC5BK,8BAA+BtB,EAAMsB,8BACrCZ,gBAAiBV,EAAMU,gBACvByB,cAAenC,EAAMmC,cACrBR,aAAc3B,EAAM2B,aACpBC,mBAAoB5B,EAAM4B,sBAO9B,CAAEjE,8BAFoB6O,EA9EE9W,IAAmF,IAAlF,SAAE6Z,EAAQ,eAAE9T,EAAc,2BAAEkC,EAA0B,mBAAEgD,GAAoBjL,EA+BrG,GA7BAga,qBAAU,KACNH,EAASM,IAAIC,MAAMvZ,SAASgZ,EAAS6S,cAAchB,MACnD7R,EAAS6S,cAAcpS,WAChB,KACHT,EAASM,IAAIC,MAAMuR,YAAY9R,EAAS6S,cAAchB,MACtD7R,EAAS6S,cAAclS,YAAY,IAExC,IAEHR,qBAAU,KACN,IAAKjU,EACD,MAAO,OAGX,MAAM0U,EAAqBA,KACvB,MAAMmR,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAC7E8T,EAAS6S,cAAcpH,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QACrGP,EAAS6S,cAAcX,YAAYlS,EAASgS,UAAUG,kBAAkBJ,GAAS,EAOrF,OAJAnR,IAEAZ,EAASa,OAAO/Y,GAAG,SAAU8Y,GAEtB,IAAMZ,EAASa,OAAOH,IAAI,SAAUE,EAAmB,GAE/D,CAAC1U,IAGAA,EAAgB,CAEhB,MAAM6lB,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAE7E8T,EAAS6S,cAAcR,OACvBrS,EAAS6S,cAAcpH,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QACrGP,EAAS6S,cAAcX,YAAYlS,EAASgS,UAAUG,kBAAkBJ,IAExE/R,EAAS6S,cAAcP,SAAQ,CAACC,EAAIC,KAChC,MAAMrrB,EAAIorB,EAAK,IACTjrB,EAAIkrB,EAAK,IAETpmB,EAAa,IAAKgF,EAAmBlF,IAC3CE,EAAWK,OAASimB,iBAAMtmB,EAAWK,OAAStF,EAAG,GACjDiF,EAAWM,OAASgmB,iBAAMtmB,EAAWM,OAASpF,EAAG,GAEjD8G,EAA2B,CAAE3K,OAAQyI,EAAgBE,cAAa,GAE1E,MAEI4T,EAAS6S,cAAcF,OACvB3S,EAAS6S,cAAcP,QAAQ,MAGnC,OACInW,eAAA2D,YAAA,GAAK,ICjFAgT,GACH,OADGA,GAEF,QAFEA,GAGD,SAGL,MAAMC,GAKTC,YAAYC,GACRC,KAAKC,SAAWF,EAChBC,KAAKC,SAASC,KAAKnf,aAAa,UAAW6e,IAC3CI,KAAKC,SAAS3S,OAAOvM,aAAa,UAAW6e,IAC7CI,KAAKC,SAASE,OAAOpf,aAAa,UAAW6e,IAE7CI,KAAKI,eAAkB5vB,MACvBwvB,KAAKK,qBAAuB,GAC5BL,KAAKM,cAAgBN,KAAKM,cAAcC,KAAKP,KACjD,CAKAQ,gBAAgBjd,GACZyc,KAAKI,eAAiB7c,GAAW/S,OACrC,CAEA+c,WACIyS,KAAKC,SAASC,KAAKpH,iBAAiB,QAASkH,KAAKM,eAClDN,KAAKC,SAAS3S,OAAOwL,iBAAiB,QAASkH,KAAKM,eACpDN,KAAKC,SAASE,OAAOrH,iBAAiB,QAASkH,KAAKM,cACxD,CAEA7S,aACIuS,KAAKC,SAASC,KAAKlH,oBAAoB,QAASgH,KAAKM,eACrDN,KAAKC,SAAS3S,OAAO0L,oBAAoB,QAASgH,KAAKM,eACvDN,KAAKC,SAASE,OAAOnH,oBAAoB,QAASgH,KAAKM,cAC3D,CAKAA,cAAcrf,GACV,MAAMiN,EAASjN,EAAME,OAAOiQ,aAAa,WAEzC,GAAI4O,KAAKK,uBAAyBnS,EAI9B,OAHAjN,EAAME,OAAOwP,UAAUC,OAAO,YAC9BoP,KAAKK,qBAAuB,QAC5BL,KAAKI,eAAe,IAIpBlS,IACA8R,KAAKK,qBAAuBnS,EAE5Bve,OAAOyR,OAAO4e,KAAKC,UAAU1uB,SAAQkvB,GAAUA,EAAO9P,UAAUC,OAAO,cACvE3P,EAAME,OAAOwP,UAAUM,IAAI,YAC3B+O,KAAKI,eAAelS,GAE5B,EClCJ,MA8EawS,GAAgB3W,aAfJxM,IACd,CACHvE,eAAgBuE,EAAMvM,KAAKgI,eAC3BD,SAAUwE,EAAMvM,KAAK+H,SACrBmF,mBAAoBX,EAAMW,mBAC1BM,qBAAsBjB,EAAMiB,qBAC5BK,8BAA+BtB,EAAMsB,8BACrCZ,gBAAiBV,EAAMU,gBACvByB,cAAenC,EAAMmC,cACrBR,aAAc3B,EAAM2B,aACpBC,mBAAoB5B,EAAM4B,sBAO9B,CAAEjE,8BAFuB6O,EA9EE9W,IAAmF,IAAlF,SAAE6Z,EAAQ,eAAE9T,EAAc,2BAAEkC,EAA0B,mBAAEgD,GAAoBjL,EAgCxG,GA9BAga,qBAAU,KACNH,EAASM,IAAIC,MAAMvZ,SAASgZ,EAAS6T,cAAchC,MACnD7R,EAAS6T,cAAcpT,WAChB,KACHT,EAASM,IAAIC,MAAMuR,YAAY9R,EAAS6T,cAAchC,MACtD7R,EAAS6T,cAAclT,YAAY,IAExC,IAEHR,qBAAU,KACN,IAAKjU,EACD,MAAO,OAGX,MAAM0U,EAAqBA,KACvB,MAAMmR,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAC7E8T,EAAS6T,cAAcpI,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,OAAO,EAShH,OAJAK,IAEAZ,EAASa,OAAO/Y,GAAG,SAAU8Y,GAEtB,IAAMZ,EAASa,OAAOH,IAAI,SAAUE,EAAmB,GAE/D,CAAC1U,IAGAA,EAAgB,CAEhB,MAAM6lB,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAE7E8T,EAAS6T,cAAcxB,OACvBrS,EAAS6T,cAAcpI,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QAIrGP,EAAS6T,cAAcvB,SAASwB,IAG5B,MAAM1nB,EAAa,IAAKgF,EAAmBlF,IAC3CE,EAAWO,SAAW+lB,iBAAMtmB,EAAWO,SAAqBmnB,GpDvEvB,IAAM5b,KAAKsF,IoDuEoB,GAEpEpP,EAA2B,CAAE3K,OAAQyI,EAAgBE,cAAa,GAE1E,MAEI4T,EAAS6T,cAAclB,OACvB3S,EAAS6T,cAAcvB,QAAQ,MAGnC,OACInW,eAAA2D,YAAA,GAAK,ICOAiU,GAAgB9W,aAfJxM,IACd,CACHvE,eAAgBuE,EAAMvM,KAAKgI,eAC3BD,SAAUwE,EAAMvM,KAAK+H,SACrBmF,mBAAoBX,EAAMW,mBAC1BM,qBAAsBjB,EAAMiB,qBAC5BK,8BAA+BtB,EAAMsB,8BACrCZ,gBAAiBV,EAAMU,gBACvByB,cAAenC,EAAMmC,cACrBR,aAAc3B,EAAM2B,aACpBC,mBAAoB5B,EAAM4B,sBAO9B,CAAEjE,8BAFuB6O,EAhEE9W,IAAmF,IAAlF,SAAE6Z,EAAQ,eAAE9T,EAAc,2BAAEkC,EAA0B,mBAAEgD,GAAoBjL,EA8BxG,GA5BAga,qBAAU,KACNH,EAASM,IAAIC,MAAMvZ,SAASgZ,EAASgU,cAAcnC,MAC5C,KACH7R,EAASM,IAAIC,MAAMuR,YAAY9R,EAASgU,cAAcnC,KAAK,IAEhE,IAEH1R,qBAAU,KACN,IAAKjU,EACD,MAAO,OAGX,MAAM0U,EAAqBA,KACvB,MAAMmR,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAC7E8T,EAASgU,cAAcvI,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QACrGP,EAASgU,cAAc9B,YAAYlS,EAASgS,UAAUG,kBAAkBJ,IACxE/R,EAASgU,cAAcC,aAAalC,EAAS/R,EAASa,OAAOqT,WAAW,EAO5E,OAJAtT,IAEAZ,EAASa,OAAO/Y,GAAG,SAAU8Y,GAEtB,IAAMZ,EAASa,OAAOH,IAAI,SAAUE,EAAmB,GAE/D,CAAC1U,IAGAA,EAAgB,CAChB,MAAM6lB,EAAU/R,EAASgS,UAAUlrB,eAAekZ,EAASM,IAAIC,MAAO3C,OAAO1R,IAC7E8T,EAASgU,cAAcvI,YAAYzL,EAASgS,UAAUC,yBAAyBF,EAAS/R,EAASM,IAAIC,QACrGP,EAASgU,cAAc9B,YAAYlS,EAASgS,UAAUG,kBAAkBJ,IACxE/R,EAASgU,cAAcC,aAAalC,EAAS/R,EAASa,OAAOqT,YAC7DlU,EAASgU,cAAc3B,MAC3B,MAEIrS,EAASgU,cAAcrB,OAG3B,OACIxW,eAAA2D,YAAA,GAAK,ICzDPqU,GAAuB,CACzB,CAACrB,IAA+B5W,GAAUC,eAACwV,GAAa,CAAC3R,SAAU9D,EAAM8D,WACzE,CAAC8S,IAAgC5W,GAAUC,eAACyW,GAAU,CAAC5S,SAAU9D,EAAM8D,WACvE,CAAC8S,IAAiC5W,GAAUC,eAACyX,GAAa,CAAC5T,SAAU9D,EAAM8D,YAMlEoU,GAA6BlY,IACtC,MAAOmY,EAAiBC,GAAsBlX,mBAAS,IAWvD,OATA+C,qBAAU,KACNjE,EAAM8D,SAASuU,aAAab,iBAAiBhwB,GAAS4wB,EAAmB5wB,KACzEwY,EAAM8D,SAASuU,aAAa9T,WAErB,KACHvE,EAAM8D,SAASuU,aAAa5T,aAC5BzE,EAAM8D,SAASuU,aAAab,gBAAgB,KAAK,IAEtD,IAOCnX,eANJ,CAMKiY,IAAQ,CAAC/jB,MAAOA,GAAM6L,SAAA,CACnBH,eAAC4X,GAAa,CAAC/T,SAAU9D,EAAM8D,WAE3BmU,GAAqBE,IAAoBF,GAAqBE,GAAiBnY,KAE5E,EC9BZ,MAAMuY,WAA6Bxe,QAAMye,aAM5C1B,YAAY2B,EAAQC,EAAQC,GACxBC,QAEA5B,KAAK6B,QAAUJ,EACfzB,KAAK8B,QAAUJ,EACf1B,KAAK+B,OAASJ,EAEd3B,KAAKgC,aAAc,EACnBhC,KAAKiC,YAAa,EAElBjC,KAAKkC,gBAAkB,CAAEjuB,EAAG,EAAGG,EAAG,GAClC4rB,KAAKmC,kBAAoB,CAAEluB,EAAG,EAAGG,EAAG,GAEpC4rB,KAAKoC,aAAe,EAEpBpC,KAAKqC,cAAgBrC,KAAKqC,cAAc9B,KAAKP,MAC7CA,KAAKsC,aAAetC,KAAKsC,aAAa/B,KAAKP,MAC3CA,KAAKuC,aAAevC,KAAKuC,aAAahC,KAAKP,MAC3CA,KAAKwC,WAAaxC,KAAKwC,WAAWjC,KAAKP,MACvCA,KAAKyC,SAAWzC,KAAKyC,SAASlC,KAAKP,KACvC,CAEAzS,WACIyS,KAAK8B,QAAQ7Q,IAAI+O,KAAK0C,QAAS1C,MAC/BA,KAAK6B,QAAQ/I,iBAAiB,aAAckH,KAAKqC,eACjDrC,KAAK6B,QAAQ/I,iBAAiB,YAAakH,KAAKsC,cAChDtC,KAAK6B,QAAQ/I,iBAAiB,YAAakH,KAAKuC,cAChDvC,KAAK6B,QAAQ/I,iBAAiB,UAAWkH,KAAKwC,YAC9CxC,KAAK6B,QAAQ/I,iBAAiB,QAASkH,KAAKyC,SAChD,CAEAhV,aACIuS,KAAK8B,QAAQlR,OAAOoP,KAAK0C,QAAS1C,MAClCA,KAAK6B,QAAQ7I,oBAAoB,aAAcgH,KAAKqC,eACpDrC,KAAK6B,QAAQ7I,oBAAoB,YAAagH,KAAKsC,cACnDtC,KAAK6B,QAAQ7I,oBAAoB,YAAagH,KAAKuC,cACnDvC,KAAK6B,QAAQ7I,oBAAoB,UAAWgH,KAAKwC,YACjDxC,KAAK6B,QAAQ7I,oBAAoB,QAASgH,KAAKyC,SACnD,CAEAE,cACI3C,KAAK6B,QAAQ7V,MAAM4W,OAAS,UAC5B5C,KAAKkC,gBAAkB,CAAEjuB,EAAG,EAAGG,EAAG,GAClC4rB,KAAKmC,kBAAoB,CAAEluB,EAAG,EAAGG,EAAG,GACpC4rB,KAAKoC,aAAe,EACpBpC,KAAKgC,aAAc,CACvB,CAEAzC,WAAUtsB,GAAY,IAAX,EAAEgB,EAAC,EAAEG,GAAGnB,EACf,MAAO,CACHgB,EAAGA,EAAI+rB,KAAKoC,aACZhuB,EAAGA,EAAI4rB,KAAKoC,aAEpB,CAEApB,WACI,OAAOhB,KAAKoC,YAChB,CAEAM,UACS1C,KAAKgC,cAGVhC,KAAKgC,aAAc,EAEnBhC,KAAK6C,KAAK,SAAU,CAChBpY,MAAO,CAAExW,EAAG+rB,KAAKoC,aAAchuB,EAAG4rB,KAAKoC,cACvC3uB,SAAU,IAAKusB,KAAKkC,mBAE5B,CAEAI,aAAarhB,GAELA,EAAM6hB,SAzFS,IAyFE7hB,EAAMwf,OACvBT,KAAK2C,cAIL3C,KAAKiC,YA9FU,IA8FIhhB,EAAMwf,SAI7BT,KAAKiC,YAAa,EAClBjC,KAAKmC,kBAAoB,CAAEluB,EAAGgN,EAAMhN,EAAGG,EAAG6M,EAAM7M,GAChD4rB,KAAK6B,QAAQ7V,MAAM4W,OAAS,OAChC,CAEAL,aAAathB,GACT,IAAK+e,KAAKiC,WAIN,YAHIjC,KAAK6B,QAAQ7V,MAAM4W,OAAOxb,SAAS,UACnC4Y,KAAK6B,QAAQ7V,MAAM4W,OAAS,YAKhC5C,KAAK6B,QAAQ7V,MAAM4W,OAAOxb,SAAS,UACnC4Y,KAAK6B,QAAQ7V,MAAM4W,OAAS,QAGhC,MAAM3uB,EAAI+rB,KAAKkC,gBAAgBjuB,GAAKgN,EAAMhN,EAAI+rB,KAAKmC,kBAAkBluB,GAC/DG,EAAI4rB,KAAKkC,gBAAgB9tB,GAAK6M,EAAM7M,EAAI4rB,KAAKmC,kBAAkB/tB,GAErE4rB,KAAKkC,gBAAgBjuB,EAAIA,EACzB+rB,KAAKkC,gBAAgB9tB,EAAIA,EAEzB4rB,KAAKmC,kBAAoB,CAAEluB,EAAGgN,EAAMhN,EAAGG,EAAG6M,EAAM7M,GAChD4rB,KAAKgC,aAAc,CACvB,CAEAQ,WAAWvhB,GACF+e,KAAKiC,aAIVjC,KAAKiC,YAAa,EAClBjC,KAAK6B,QAAQ7V,MAAM4W,OAAS,UAChC,CAEAP,gBACIrC,KAAKiC,YAAa,EAClBjC,KAAK6B,QAAQ7V,MAAM4W,OAAS,SAChC,CAMAH,SAASxhB,GACLA,EAAM8P,iBAEN,MAAMgS,EAAgB/d,KAAKwK,KAAKvO,EAAM+hB,YAEhCC,EAAsBjD,KAAKoC,aAC3Bc,EAAalD,KAAK6B,QAAQhF,wBAC1BjE,EAAqB3X,EAAMhN,EAAIivB,EAAWzK,KAAOyK,EAAWzqB,MAAQ,EAApEmgB,EAA0E3X,EAAM7M,EAAI8uB,EAAW1K,IAAM0K,EAAWxqB,OAAS,EACzHyqB,EAAWnD,KAAKoC,aAtJX,IAsJwCW,EAEnD/C,KAAKoC,aAAegB,iBAAMD,EAAUnD,KAAK+B,OAAOjd,IAAKkb,KAAK+B,OAAOhd,KACjE,MAAMse,EAAYJ,EAAsBjD,KAAKoC,aAC7CpC,KAAKkC,gBAAgBjuB,GAAK+rB,KAAKkC,gBAAgBjuB,EAAIovB,EAAYrD,KAAKoC,aAAexJ,EAAkByK,EACrGrD,KAAKkC,gBAAgB9tB,GAAK4rB,KAAKkC,gBAAgB9tB,EAAIivB,EAAYrD,KAAKoC,aAAexJ,EAAkByK,EAErGrD,KAAKgC,aAAc,EACnBhC,KAAK6B,QAAQ7V,MAAM4W,OAASG,EAAgB,EAAI,UAAY,UAChE,EChKG,MAAMO,WAA6BvgB,QAAMye,aAO5C1B,YAAYyD,EAAiBC,EAAUrW,GACnCyU,QAEA5B,KAAK7S,KAAO,IAAKA,GAEjB6S,KAAKyD,UAAYD,EACjBxD,KAAK0D,iBAAmBH,EACxBvD,KAAK2D,YAAc,IAAKxW,GAExB6S,KAAK4D,UAAY,IAAIC,gBAAe,IAAM7D,KAAK1S,UACnD,CAEAC,WACIyS,KAAK4D,UAAUE,QAAQ9D,KAAK0D,kBAC5B1D,KAAK1S,QACT,CAEAG,aACIuS,KAAK4D,UAAUG,UAAU/D,KAAK0D,iBAClC,CAEApW,SACI,MAAM0W,EAAW,CAAEvrB,MAAOunB,KAAK0D,iBAAiBxK,YAAaxgB,OAAQsnB,KAAK0D,iBAAiBvK,eACrF,MAAE1gB,EAAK,OAAEC,GAAWsnB,KAAK2D,YAEzBM,EAAkBD,EAAStrB,OAC3BwrB,EAAiBF,EAASvrB,MAG1B0rB,EAAW,CAAE1rB,MAAO,EAAGC,OAAQ,GADlBurB,EAAkBC,GAIjCC,EAAS1rB,MAAgB,EAARA,EACjB0rB,EAASzrB,OAAUA,GAAUurB,EAAkBC,GAAmB,IAElEC,EAASzrB,OAAkB,EAATA,EAClByrB,EAAS1rB,MAASA,GAASyrB,EAAiBD,GAAoB,GAGpEjE,KAAKyD,UAAUnW,OAAO6W,EAAS1rB,MAAO0rB,EAASzrB,QAC/CsnB,KAAKyD,UAAU9E,KAAK3S,MAAMvT,MAAK,GAAAhG,OAAMyxB,EAAc,MACnDlE,KAAKyD,UAAU9E,KAAK3S,MAAMtT,OAAM,GAAAjG,OAAMwxB,EAAe,MAErDjE,KAAK7S,KAAOgX,EAEZnE,KAAK6C,KAAK,SAAU,IAAKsB,GAC7B,ECtDG,MAAMC,GACTtE,cACIE,KAAKrB,KAAO,IAAI9rB,YAChBmtB,KAAKqE,QAAU,IAAIxwB,WACnBmsB,KAAKrB,KAAK7qB,SAASksB,KAAKqE,QAC5B,CAEAlF,OACIa,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAqmB,OACIO,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAmf,YAAY+L,GACRtE,KAAKrB,KAAK1qB,EAAIqwB,EAAMrwB,EACpB+rB,KAAKrB,KAAKvqB,EAAIkwB,EAAMlwB,CACxB,CAEA4qB,YAAY4B,GACRZ,KAAKqE,QAAQ5qB,SAAWmnB,CAC5B,CAEAG,aAAalC,EAAS0F,GAClBvE,KAAKqE,QAAQtwB,QAEb,MAAME,EAAI4qB,EAAQ2F,iBAAmB3F,EAAQ2F,iBAAiBvwB,EAAIswB,OAAkCnzB,IAAnBytB,EAAQhU,QAAwBgU,EAAQpmB,MAAQomB,EAAQhU,OAAO5W,EAAIswB,EAAc,EAC5JnwB,EAAIyqB,EAAQ2F,iBAAmB3F,EAAQ2F,iBAAiBpwB,EAAImwB,OAAkCnzB,IAAnBytB,EAAQhU,QAAwBgU,EAAQnmB,OAASmmB,EAAQhU,OAAOzW,EAAImwB,EAAc,EAC7J9rB,GAASomB,EAAQpU,MAAQoU,EAAQpmB,OAASomB,EAAQpU,MAAMxW,EAAI,GAAK4qB,EAAQpmB,MAAQ,GAAK,EAAI,GAAKomB,EAAQpmB,OAAS8rB,EAChH7rB,GAAUmmB,EAAQpU,MAAQoU,EAAQnmB,QAAUmmB,EAAQpU,MAAMrW,EAAI,GAAKyqB,EAAQnmB,OAAS,GAAK,EAAI,GAAKmmB,EAAQnmB,QAAU6rB,EAE1HvE,KAAKqE,QAAQrwB,UAAU,EAAG,UACrBE,OAAOD,EAAGG,GACVD,OAAOF,EAAIwE,EAAOrE,GAClBD,OAAOF,EAAIwE,EAAOrE,EAAIsE,GACtBvE,OAAOF,EAAGG,EAAIsE,GACdvE,OAAOF,EAAGG,GACVE,SACT,ECvCJ,MAAMmwB,GACM,QADNA,GAEM,QAFNA,GAGO,SAGN,MAAMC,GACT5E,YAAY4B,GAER1B,KAAKrB,KAAO,IAAI9rB,YAChBmtB,KAAKrB,KAAKvlB,SAAU,EAEpB,MAAM+T,EAAO,IACPwX,EAAY,GAElB3E,KAAK4E,aAAc,IAAI/wB,YAAWG,UAAU,EAAG,OAC1CE,OAAO,EAAG,GACVC,OAAO,GAAG,KACVD,OAAO,GAAG,KACVC,QAAO,MAAgB,KACvBA,OAAO,GAAG,KACVA,OAAOwwB,MAAe,KACtB5Z,UAAU,OACV8Z,YAAY,CAAC,GAAG,KAAO,MAAgB,IAAmBF,MAAe,MACzErwB,UAGL0rB,KAAK8E,aAAc,IAAIjxB,YAAWG,UAAU,EAAG,KAC1CE,OAAO,EAAG,GACVC,OAAOgZ,EAAM,GACbjZ,OAAOiZ,EAAM,GACbhZ,OAAOgZ,KAAkB,MACzBhZ,OAAOgZ,EAAM,GACbhZ,OAAOgZ,IAAkBwX,MACzB5Z,UAAU,KACV8Z,YAAY,CAAC1X,EAAM,EAAGA,KAAkB,KAAgBA,IAAkBwX,OAC1ErwB,UAEL,MAAMywB,EAAgB,CAAC,MAAU,IAAU,IAAU,OAGrD/E,KAAKgF,QAAU,IAAInxB,WACnBmsB,KAAKgF,QAAQvxB,SAASC,IAAI,IAAK,IAE/B,MAAMuxB,EAAY,CAAC,EAAE,IAAK,IAAK,CAAC,GAAI,IAAK,EAAE,GAAI,GAAI,CAAC,EAAG,IAEvD,IAAK,IAAIrzB,EAAI,EAAGA,EAAImzB,EAAc5zB,OAAQS,IACtCouB,KAAKgF,QAAQja,UAAUga,EAAcnzB,IACrCouB,KAAKgF,QAAQ3wB,SAAS4wB,EAAUrzB,GAAG,GAAIqzB,EAAUrzB,GAAG,GAAI,GAAI,IAGhEouB,KAAKgF,QAAQ1wB,UAEb0rB,KAAKrB,KAAK7qB,SAASksB,KAAK4E,YAAa5E,KAAK8E,YAAa9E,KAAKgF,SAE5DhF,KAAKkF,cAAgB,CACjB,CAACT,IAAyB,IAAIU,SAAOhY,MAAsB,EAAGwX,GAC9D,CAACF,IAAyB,IAAIU,SAAO,GAAG,MAAuBR,GAC/D,CAACF,IAA0B,IAAIhwB,YAAU,GAAI,GAAI,GAAI,KAIzDurB,KAAKiC,YAAa,EAClBjC,KAAKoF,YAAc,GACnBpF,KAAKqF,kBAAoB,CAAEpxB,EAAG,EAAGG,EAAG,GACpC4rB,KAAKsF,QAAU,CAAErxB,EAAG,EAAGG,EAAG,GAC1B4rB,KAAKuF,iBAAmB,EAExBvF,KAAKrB,KAAKnqB,QAAU,IAAIC,aAAW,IAAK,IAAK,IAAK,KAElDurB,KAAKrB,KAAK6G,qBAAsB,EAChCxF,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKsC,aAActC,MAC7CA,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKuC,aAAcvC,MAC7CA,KAAKrB,KAAK/pB,GAAG,UAAWorB,KAAKwC,WAAYxC,MACzCA,KAAKrB,KAAK/pB,GAAG,iBAAkBorB,KAAKwC,WAAYxC,MAEhDA,KAAKyF,eAAgB,EACrBzF,KAAK8B,QAAUJ,EAEf1B,KAAK0F,SAAW,CAACrG,EAAIC,KAAL,CACpB,CAEAF,QAAQ7b,GACJyc,KAAK0F,SAAWniB,GAAU,EAAC8b,EAAIC,KAAL,EAC9B,CAEAH,OACIa,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAqmB,OACIO,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAmU,WACIyS,KAAKrB,KAAKpqB,aAAc,EACxByrB,KAAK8B,QAAQ7Q,IAAI+O,KAAK0C,QAAS1C,KACnC,CAEAvS,aACIuS,KAAK8B,QAAQlR,OAAOoP,KAAK0C,QAAS1C,MAClCA,KAAKrB,KAAKpqB,aAAc,CAC5B,CAMAgkB,YAAY+L,GACRtE,KAAKrB,KAAK1qB,EAAIqwB,EAAMrwB,EACpB+rB,KAAKrB,KAAKvqB,EAAIkwB,EAAMlwB,CACxB,CAMA4qB,YAAY4B,GACRZ,KAAKrB,KAAKllB,SAAWmnB,CACzB,CAMA1B,mBAAmB0B,GACfZ,KAAKuF,iBAAmB3E,CAC5B,CAEA0B,aAAarhB,GACT,GAAI+e,KAAKiC,WACL,OAGJ,MAAM,EAAEhuB,EAAC,EAAEG,GAAM6M,EAAMyE,KAAKigB,iBAAiB3F,KAAKrB,MAC5CiH,EAAWj2B,OAAOyO,KAAK4hB,KAAKkF,eAAehzB,MAAK0X,GAAOoW,KAAKkF,cAActb,GAAKic,SAAS5xB,EAAGG,UAEhFhD,IAAbw0B,IACA5F,KAAKiC,YAAa,EAClBjC,KAAKoF,YAAcQ,EACnB5F,KAAKqF,kBAAoB,IAAKpkB,EAAMyE,KAAKogB,QAEjD,CAEAvD,aAAathB,GACT,IAAK+e,KAAKiC,WACN,OAGJ,MAAMhuB,EAAIgN,EAAMyE,KAAKogB,OAAO7xB,EAAI+rB,KAAKqF,kBAAkBpxB,EACjDG,EAAK6M,EAAMyE,KAAKogB,OAAO1xB,EAAI4rB,KAAKqF,kBAAkBjxB,EAExD,IAAIirB,EAAK,EACLC,EAAK,EAELU,KAAKoF,cAAgBX,IACrBpF,EAAKprB,EACLqrB,EAAKrrB,EAAI+Q,KAAK+gB,IAAI/F,KAAKuF,mBAElBvF,KAAKoF,cAAgBX,IAC1BpF,GAAMjrB,EAAI4Q,KAAK+gB,IAAI/F,KAAKuF,kBACxBjG,EAAKlrB,IAGLirB,EAAKprB,EACLqrB,EAAKlrB,GAGT4rB,KAAKqF,kBAAoB,IAAKpkB,EAAMyE,KAAKogB,QAEzC9F,KAAKsF,QAAQrxB,GAAKorB,EAClBW,KAAKsF,QAAQlxB,GAAKkrB,EAClBU,KAAKyF,eAAgB,CACzB,CAEAjD,WAAWvhB,GACF+e,KAAKiC,aAIVjC,KAAKiC,YAAa,EACtB,CAEAS,UACS1C,KAAKyF,gBAIVzF,KAAKyF,eAAgB,EAErBzF,KAAK0F,SAAS1F,KAAKsF,QAAQrxB,EAAG+rB,KAAKsF,QAAQlxB,GAE3C4rB,KAAKsF,QAAU,CAAErxB,EAAG,EAAGG,EAAG,GAC9B,EC1LG,MAAM4xB,GACTlG,YAAY4B,GAER1B,KAAKrB,KAAO,IAAI9rB,YAChBmtB,KAAKrB,KAAKvlB,SAAU,EAEpB4mB,KAAKiG,aAAe,GACpBjG,KAAKkG,aAAe,GAEpB,MAAMC,EAAM,IAAItyB,WAChBsyB,EAAInyB,UAAU,EAAG,OACjBmyB,EAAIA,IAAI,EAAG,EAAGnG,KAAKiG,aAAc,EAAa,EAAVjhB,KAAKsF,IAAQ,GACjD6b,EAAInyB,UAAU,EAAG,KACjBmyB,EAAIA,IAAI,EAAG,EAAGnG,KAAKkG,aAAc,EAAa,EAAVlhB,KAAKsF,IAAQ,GACjD6b,EAAIpb,UAAU,SAAU,GACxBob,EAAInb,WAAW,EAAG,EAAG,GACrBmb,EAAI7xB,UAEJ0rB,KAAKrB,KAAK7qB,SAASqyB,GAEnBnG,KAAKoG,mBAAqB,EAC1BpG,KAAKqG,aAAe,IAAIxyB,WACxBmsB,KAAKrB,KAAK7qB,SAASksB,KAAKqG,cAExBrG,KAAKiC,YAAa,EAClBjC,KAAKqF,kBAAoB,CAAEpxB,EAAG,EAAGG,EAAG,GACpC4rB,KAAKsG,YAAc,EACnBtG,KAAKuG,UAAY,EAEjBvG,KAAKrB,KAAKnqB,QAAU,IAAI2wB,SAAO,EAAG,EAAG,KAErCnF,KAAKrB,KAAK6G,qBAAsB,EAChCxF,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKsC,aAActC,MAC7CA,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKuC,aAAcvC,MAC7CA,KAAKrB,KAAK/pB,GAAG,UAAWorB,KAAKwC,WAAYxC,MACzCA,KAAKrB,KAAK/pB,GAAG,iBAAkBorB,KAAKwC,WAAYxC,MAEhDA,KAAKyF,eAAgB,EACrBzF,KAAK8B,QAAUJ,EAEf1B,KAAK0F,SAAY9E,KACrB,CAMAxB,QAAQ7b,GACJyc,KAAK0F,SAAWniB,GAAWqd,OAC/B,CAEAzB,OACIa,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAqmB,OACIO,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAmU,WACIyS,KAAKrB,KAAKpqB,aAAc,EACxByrB,KAAK8B,QAAQ7Q,IAAI+O,KAAK0C,QAAS1C,KACnC,CAEAvS,aACIuS,KAAK8B,QAAQlR,OAAOoP,KAAK0C,QAAS1C,MAClCA,KAAKrB,KAAKpqB,aAAc,CAC5B,CAEAgkB,YAAY+L,GACRtE,KAAKrB,KAAK1qB,EAAIqwB,EAAMrwB,EACpB+rB,KAAKrB,KAAKvqB,EAAIkwB,EAAMlwB,CACxB,CAEA4qB,YAAY4B,GACRZ,KAAKrB,KAAKllB,SAAWmnB,CACzB,CAEA0B,aAAarhB,GACT,GAAI+e,KAAKiC,WACL,OAGJ,MAAM,EAAEhuB,EAAC,EAAEG,GAAM6M,EAAMyE,KAAKigB,iBAAiB3F,KAAKrB,MAE5C6H,EAAQxhB,KAAKwhB,MAAMvyB,EAAGG,GAExBoyB,EAAQxG,KAAKkG,cAAgBM,EAAQxG,KAAKiG,eAC1CjG,KAAKiC,YAAa,EAClBjC,KAAKqF,kBAAoB,CAAEpxB,IAAGG,KAC9B4rB,KAAKuG,UAAYvhB,KAAKyhB,MAAMryB,EAAGH,GAC/B+rB,KAAKoG,mBAAqBpG,KAAKuG,UAEvC,CAEAhE,aAAYtvB,GAAY,IAAX,KAAEyS,GAAMzS,EACjB,IAAK+sB,KAAKiC,WACN,OAGJ,MAAM,EAAEhuB,EAAC,EAAEG,GAAMsR,EAAKigB,iBAAiB3F,KAAKrB,MAEtC+H,EAAkB1hB,KAAKyhB,MAAMryB,EAAGH,GAEtC+rB,KAAKqG,aAAatyB,QACbgX,UAAU,SAAU,IACpB7W,OAAO,EAAG,GACViyB,IAAI,EAAG,EAAGnG,KAAKkG,aAAclG,KAAKoG,mBAAoBM,GAAiB,GACvEvyB,OAAO,EAAG,GACVG,UAEL0rB,KAAKsG,YAAcI,EAAkB1G,KAAKuG,UAE1CvG,KAAKuG,UAAYG,EACjB1G,KAAKqF,kBAAoB,CAAEpxB,IAAGG,KAC9B4rB,KAAKyF,eAAgB,CACzB,CAEAjD,WAAWvhB,GACF+e,KAAKiC,aAIVjC,KAAKqG,aAAatyB,QAClBisB,KAAKoG,mBAAqB,EAC1BpG,KAAKuG,UAAY,EACjBvG,KAAKiC,YAAa,EACtB,CAEAS,UACS1C,KAAKyF,gBAIVzF,KAAKyF,eAAgB,EAErBzF,KAAK0F,SAAS1F,KAAKsG,aACnBtG,KAAKsG,YAAc,EACvB,EChJJ,MAAM7B,GACM,QADNA,GAEM,QAFNA,GAGO,SAGN,MAAMkC,GACT7G,YAAY4B,GAER1B,KAAKrB,KAAO,IAAI9rB,YAChBmtB,KAAKrB,KAAKvlB,SAAU,EAEpB,MAAM+T,EAAO,IACPyZ,EAAc,GAEpB5G,KAAK4E,aAAc,IAAI/wB,YAAWG,UAAU,EAAG,OAC1CE,OAAO,EAAG,GACVC,OAAO,GAAG,KACV4W,UAAU,OACV1W,UAAS,IAAkB,IAA4BuyB,EAAaA,GACpEtyB,UAGL0rB,KAAK8E,aAAc,IAAIjxB,YAAWG,UAAU,EAAG,KAC1CE,OAAO,EAAG,GACVC,OAAOgZ,EAAM,GACbpC,UAAU,KACV1W,SAAS8Y,KAAwB,GAAkByZ,EAAaA,GAChEtyB,UAGL,MAAMywB,EAAgB,CAAC,MAAU,IAAU,IAAU,OAGrD/E,KAAKgF,QAAU,IAAInxB,WACnBmsB,KAAKgF,QAAQvxB,SAASC,IAAI,IAAK,IAG/B,MAAMuxB,EAAY,CAAC,EAAE,IAAK,IAAK,CAAC,GAAI,IAAK,EAAE,GAAI,GAAI,CAAC,EAAG,IAEvD,IAAK,IAAIrzB,EAAI,EAAGA,EAAImzB,EAAc5zB,OAAQS,IACtCouB,KAAKgF,QAAQja,UAAUga,EAAcnzB,IACrCouB,KAAKgF,QAAQ3wB,SAAS4wB,EAAUrzB,GAAG,GAAIqzB,EAAUrzB,GAAG,GAAI,GAAI,IAGhEouB,KAAKgF,QAAQ1wB,UAEb0rB,KAAKrB,KAAK7qB,SAASksB,KAAK4E,YAAa5E,KAAK8E,YAAa9E,KAAKgF,SAE5DhF,KAAKkF,cAAgB,CACjB,CAACT,IAAyB,IAAIU,SAAOhY,EAAM,EAAGyZ,GAC9C,CAACnC,IAAyB,IAAIU,SAAO,GAAG,IAAOyB,GAC/C,CAACnC,IAA0B,IAAIhwB,YAAU,GAAI,GAAI,GAAI,KAGzDurB,KAAKiC,YAAa,EAClBjC,KAAKoF,YAAc,GACnBpF,KAAKqF,kBAAoB,CAAEpxB,EAAG,EAAGG,EAAG,GACpC4rB,KAAKsF,QAAU,CAAErxB,EAAG,EAAGG,EAAG,GAE1B4rB,KAAKrB,KAAKnqB,QAAU,IAAIC,aAAW,IAAK,IAAK,IAAK,KAElDurB,KAAKrB,KAAK6G,qBAAsB,EAChCxF,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKsC,aAActC,MAC7CA,KAAKrB,KAAK/pB,GAAG,YAAaorB,KAAKuC,aAAcvC,MAC7CA,KAAKrB,KAAK/pB,GAAG,UAAWorB,KAAKwC,WAAYxC,MACzCA,KAAKrB,KAAK/pB,GAAG,iBAAkBorB,KAAKwC,WAAYxC,MAEhDA,KAAKyF,eAAgB,EACrBzF,KAAK8B,QAAUJ,EAEf1B,KAAK0F,SAAW,CAACrG,EAAIC,KAAL,CACpB,CAEAF,QAAQ7b,GACJyc,KAAK0F,SAAWniB,GAAU,EAAC8b,EAAIC,KAAL,EAC9B,CAEAH,OACIa,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAqmB,OACIO,KAAKrB,KAAKvlB,SAAU,CACxB,CAEAmU,WACIyS,KAAKrB,KAAKpqB,aAAc,EACxByrB,KAAK8B,QAAQ7Q,IAAI+O,KAAK0C,QAAS1C,KACnC,CAEAvS,aACIuS,KAAK8B,QAAQlR,OAAOoP,KAAK0C,QAAS1C,MAClCA,KAAKrB,KAAKpqB,aAAc,CAC5B,CAEAgkB,YAAY+L,GACRtE,KAAKrB,KAAK1qB,EAAIqwB,EAAMrwB,EACpB+rB,KAAKrB,KAAKvqB,EAAIkwB,EAAMlwB,CACxB,CAEA4qB,YAAY4B,GACRZ,KAAKrB,KAAKllB,SAAWmnB,CACzB,CAEA0B,aAAarhB,GACT,GAAI+e,KAAKiC,WACL,OAGJ,MAAM,EAAEhuB,EAAC,EAAEG,GAAM6M,EAAMyE,KAAKigB,iBAAiB3F,KAAKrB,MAC5CiH,EAAWj2B,OAAOyO,KAAK4hB,KAAKkF,eAAehzB,MAAK0X,GAAOoW,KAAKkF,cAActb,GAAKic,SAAS5xB,EAAGG,UAEhFhD,IAAbw0B,IACA5F,KAAKiC,YAAa,EAClBjC,KAAKoF,YAAcQ,EACnB5F,KAAKqF,kBAAoB,CAAEpxB,IAAGG,KAEtC,CAEAmuB,aAAYtvB,GAAY,IAAX,KAAEyS,GAAMzS,EACjB,IAAK+sB,KAAKiC,WACN,OAGJ,MAAMqC,EAAQ5e,EAAKigB,iBAAiB3F,KAAKrB,MAEzC,IAAIU,EAAK,EACLC,EAAK,EAELU,KAAKoF,cAAgBX,GACrBpF,EAAKiF,EAAMrwB,EAAI+rB,KAAKqF,kBAAkBpxB,EAEjC+rB,KAAKoF,cAAgBX,GAC1BnF,GAA6C,GAAvCgF,EAAMlwB,EAAI4rB,KAAKqF,kBAAkBjxB,IAKvCirB,EAAKiF,EAAMrwB,EAAI+rB,KAAKqF,kBAAkBpxB,EACtCqrB,GAA6C,GAAvCgF,EAAMlwB,EAAI4rB,KAAKqF,kBAAkBjxB,GACnCirB,GAAM,EACNA,EAAKC,EAEAA,GAAM,EACXA,EAAKD,EAGLA,EAAKC,EAAKta,KAAKF,IAAIua,EAAIC,IAI/BU,KAAKqF,kBAAoBf,EAEzBtE,KAAKsF,QAAQrxB,GAAKorB,EAClBW,KAAKsF,QAAQlxB,GAAKkrB,EAElBU,KAAKyF,eAAgB,CACzB,CAEAjD,WAAWvhB,GACF+e,KAAKiC,aAIVjC,KAAKiC,YAAa,EACtB,CAEAS,UACS1C,KAAKyF,gBAIVzF,KAAKyF,eAAgB,EAErBzF,KAAK0F,SAAS1F,KAAKsF,QAAQrxB,EAAG+rB,KAAKsF,QAAQlxB,GAE3C4rB,KAAKsF,QAAU,CAAErxB,EAAG,EAAGG,EAAG,GAC9B,EC9KJyyB,gBAAcC,UAAUt0B,KAAO,KAYxB,MAAMoB,GAAiBA,CAACirB,EAASrsB,KACpC,IAAK,IAAIZ,EAAI,EAAGm1B,EAAIlI,EAAQzV,SAASjY,OAAQS,EAAIm1B,EAAGn1B,IAChD,GAAIitB,EAAQzV,SAASxX,GAAGY,OAASA,EAC7B,OAAOqsB,EAAQzV,SAASxX,GAKhC,IAAK,IAAIA,EAAI,EAAGm1B,EAAIlI,EAAQzV,SAASjY,OAAQS,EAAIm1B,EAAGn1B,IAAK,CACrD,MAAM6I,EAAQokB,EAAQzV,SAASxX,GAE/B,IAAK6I,EAAM7G,eACP,SAGJ,MAAMuN,EAASvN,GAAe6G,EAAOjI,GAErC,GAAI2O,EACA,OAAOA,CAEf,CAEA,OAAO,IAAI,EAaF4d,GAA2BA,CAACF,EAASmI,KAC9C,MAAMC,EAAiBpI,EAAQqI,SAAS,IAAIC,SAE5C,OADsBH,EAAiBI,QAAQH,EAC3B,EAWXhI,GAAoB,SAACJ,GAAwC,IAClEwI,IADqDn2B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GACf2tB,EAAQplB,SAAW,EAEzD6tB,EAAkBzI,EAAQ0I,OAC9B,KAAOD,GACHD,GAAkBC,EAAgB7tB,SAClC6tB,EAAkBA,EAAgBC,OAGtC,OAAOF,CACX,EC/CO,MAAMG,GAAMA,KACjBrW,OAAO2H,iBAAiB,eAAgB7X,GAAUA,EAAM8P,mBAExD,MAAOjE,EAAU2a,GAAevd,mBAAS,MACnCwd,EAAYnZ,iBAAO,MACnBoZ,EAAqBpZ,iBAAO,MAC5BqZ,EAAcrZ,iBAAO,MACrBsZ,EAAoBtZ,iBAAO,OAC1BuZ,EAAyBC,GAA4B7d,oBAAS,GAC/DmX,EAAe,CACnBnB,KAAM3R,iBAAO,MACbjB,OAAQiB,iBAAO,MACf4R,OAAQ5R,iBAAO,OAGjBtB,qBAAU,KACR,MAAMG,EAAM,IAAI4a,cAAY,CAC1BpM,gBAAiB,SACjB+C,KAAM+I,EAAUhZ,UAGlB+Y,EAAY,CACVra,MACAO,OAAQ,IAAI4T,GAAqBnU,EAAIuR,KAAMvR,EAAIsU,OAAQ,CAAE5c,IAAK,EAAI,EAAGC,IAAK,IAC1EuI,OAAQ,IAAIgW,GAAqBqE,EAAmBjZ,QAAStB,EAAIoW,SAAU,CAAE/qB,MAAO,KAAMC,OAAQ,OAClGooB,cAAe,IAAIsD,GACnB1F,oBAAqB,IAAIgG,GAAwBtX,EAAIsU,QACrD/B,cAAe,IAAIgH,GAAkBvZ,EAAIsU,QACzCf,cAAe,IAAIqF,GAAkB5Y,EAAIsU,QACzCL,aAAc,IAAIxB,GAAgB,CAChCK,KAAMmB,EAAanB,KAAKxR,QACxBpB,OAAQ+T,EAAa/T,OAAOoB,QAC5ByR,OAAQkB,EAAalB,OAAOzR,UAE9BoQ,UAAW,CACTlrB,kBACAmrB,4BACAE,uBAEF,GAED,IAEH,MAAMgJ,EAAqB7Z,IACzB,IAAK0Z,EAA2B,OAChC,MAAMnO,EAAU3U,KAAKD,IAAI,IAAKC,KAAKF,IAAIqM,OAAOoI,YAAc,IAAKnL,EAAEuL,UACnEiO,EAAYlZ,QAAQ1C,MAAMtT,OAAM,GAAAjG,OAAM0e,OAAOoI,YAAcI,EAAO,MAClEgO,EAAmBjZ,QAAQ1C,MAAMtT,OAAM,GAAAjG,OAAMknB,EAAO,KAAI,EAG1D,OACEtQ,gBAAA,OACE6e,UAAWA,IAAMH,GAAyB,GAC1CI,YAAaF,EAAkB7e,SAAA,CAC/BH,eAACa,GAAM,IACPb,eAAA,OAAKpY,GAAG,aAAYuY,SAClBH,eAACiT,GAAc,MAEjB7S,gBAAA,OAAKyE,IAAK6Z,EAAoB92B,GAAG,eAAcuY,SAAA,CAC7CH,eAAA,UAAQ6E,IAAK4Z,IAEE,OAAb5a,EAAoB,KAClBzD,gBAAC+e,QAAK,CAAChb,IAAKN,EAASM,IAAIhE,SAAA,CACvBH,eAACqY,IAAQ,CAAC/jB,MAAOA,GAAM6L,SACrBH,eAAC4D,GAAY,CAACC,SAAUA,MAE1B7D,eAACiY,GAAyB,CAACpU,SAAUA,UAK7CzD,gBAAA,OAAKxY,GAAG,gBAAeuY,SAAA,CACrBH,eAAA,SAAO6E,IAAKuT,EAAanB,KAAM1vB,KAAK,QAAQ0Y,UAAU,cAAcrF,ICvG7D,mzBDwGPoF,eAAA,SAAO6E,IAAKuT,EAAa/T,OAAQ9c,KAAK,QAAQ0Y,UAAU,cAAcrF,IExG/D,uhBFyGPoF,eAAA,SAAO6E,IAAKuT,EAAalB,OAAQ3vB,KAAK,QAAQ0Y,UAAU,cAAcrF,IGzG/D,koCH2GToF,eAAA,OAAKpY,GAAG,cAAauY,SACnBH,eAAC0O,GAAe,MAElBtO,gBAAA,OAAKxY,GAAG,eAAeid,IAAK8Z,EAAYxe,SAAA,CACtCH,eAAA,OAAKpY,GAAG,mBAAmBid,IAAK+Z,EAC9BQ,YAAaA,IAAMN,GAAyB,GAC5CI,YAAaF,IAEfhf,eAACoP,GAAc,OAEjBpP,eAACqU,GAAgB,IACjBrU,eAACmR,GAAqB,MAClB,EI5GVkO,IAASC,OACPtf,eAACqY,IAAQ,CAAC/jB,MAAOA,GAAM6L,SACrBH,eAACuf,IAAMC,WAAU,CAAArf,SACfH,eAACue,GAAG,QAGR3mB,SAAS6nB,eAAe,Q","file":"static/js/main.a1a2b2cb.chunk.js","sourcesContent":["export const TREE_ACTIONS = Object.freeze({\r\n    SET_SELECTED_NODE_ID: \"SET_SELECTED_NODE_ID\",\r\n    SET_COPY_NODE_ID: \"SET_COPY_NODE_ID\",\r\n    // moving nodes in the tree hierarchy\r\n    INSERT_BEFORE_NODE: \"INSERT_BEFORE_NODE\",\r\n    MOVE_NODE: \"MOVE_NODE\",\r\n    APPEND_NODE: \"APPEND_NODE\",\r\n\r\n    // modification of nodes\r\n    UPDATE_NODE_NAME: \"UPDATE_NODE_NAME\",\r\n    DELETE_NODE: \"DELETE_NODE\",\r\n    CREATE_NODE: \"CREATE_NODE\",\r\n\r\n    IMPORT_TREE_DATA: \"IMPORT_TREE_DATA\"\r\n});\r\n","import { TREE_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * Whenever a node is selected in the tree, we want to make the rest to be aware of that.\r\n * @param {number | null} nodeID \r\n */\r\nexport const setSelectedNodeIDAction = (nodeID) => {\r\n    return { type: TREE_ACTIONS.SET_SELECTED_NODE_ID, payload: nodeID }\r\n};\r\n\r\n\r\n/**\r\n * Set node id to be copied.\r\n * @param {number | null} nodeID \r\n */\r\nexport const setCopyNodeIDAction = (nodeID) => {\r\n    return { type: TREE_ACTIONS.SET_COPY_NODE_ID, payload: nodeID }\r\n};\r\n\r\n/**\r\n * Append node is used just to append newly created nodes\r\n * @param {{\r\n * referenceID: number;\r\n * nodeData: import(\"../../data/NodeData\").INodeData;\r\n * }} payload \r\n */\r\nexport const appendNodeAction = (payload) => {\r\n    return { type: TREE_ACTIONS.APPEND_NODE, payload }\r\n};\r\n\r\n/**\r\n * Move node is used when we move (re-append) a node into a new parent\r\n * @param {{\r\n * referenceID: number;\r\n * nodeData: import(\"../../data/NodeData\").INodeData;\r\n * }} payload \r\n */\r\nexport const moveNodeAction = (payload) => {\r\n    return { type: TREE_ACTIONS.MOVE_NODE, payload }\r\n};\r\n\r\n/**\r\n * This function is called when we want to move (re-append) a node. But,\r\n * unlike `moveNodeAction` function this one inserts the node before the reference one\r\n * @param {{\r\n * referenceID: number;\r\n * nodeData: import(\"../../data/NodeData\").INodeData;\r\n * }} payload \r\n */\r\nexport const insertBeforeNodeAction = (payload) => {\r\n    return { type: TREE_ACTIONS.INSERT_BEFORE_NODE, payload }\r\n};\r\n\r\n/**\r\n * When we update any params of the selected node (find node by nodeID)\r\n * @param {{nodeID: number, name: string }} payload \r\n * @returns \r\n */\r\nexport const updateNodeNameAction = (payload) => {\r\n    return { type: TREE_ACTIONS.UPDATE_NODE_NAME, payload }\r\n};\r\n\r\n/**\r\n * To delete a node from a tree by its nodeID\r\n * @param {number} id\r\n */\r\nexport const deleteNodeAction = (id) => {\r\n    return { type: TREE_ACTIONS.DELETE_NODE, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * To create a new node in a tree\r\n * @param {number} parentID the parent's node ID we need to append a new node to\r\n * @param {number} id new node id\r\n */\r\nexport const createNodeAction = (parentID, id) => {\r\n    return { type: TREE_ACTIONS.CREATE_NODE, payload: { nodeID: id, referenceID: parentID } }\r\n};\r\n\r\n/**\r\n * @param {import(\"../../data/NodeData\").INodeData | null} treeData the parent's node ID we need to append a new node to\r\n */\r\nexport const importTreeDataAction = (treeData) => {\r\n    return { type: TREE_ACTIONS.IMPORT_TREE_DATA, payload: { treeData, selectedNodeID: null } }\r\n};","/**\r\n * \r\n * @param {import(\"../data/NodeData\").INodeData} tree \r\n * @returns {number[]}\r\n */\r\nexport const collectAllIds = (tree, memo = []) => {\r\n\r\n    memo.push(tree.id);\r\n    tree.nodes.forEach((node) => collectAllIds(node, memo));\r\n\r\n    return memo;\r\n};\r\n\r\n/**\r\n * \r\n * @param {number} childId \r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree\r\n * @returns {import(\"../data/NodeData\").INodeData | null} \r\n */\r\nexport const getParent = function (childId, tree) {\r\n    // check first if the root element is a parent of a child\r\n    if (isParent(childId, tree)) {\r\n        return tree;\r\n    }\r\n\r\n    for (let i = 0; i < tree.nodes.length; i++) {\r\n        const result = getParent(childId, tree.nodes[i]);\r\n        if (result) {\r\n            return result;\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * This method is traversing through all the children and children of the children as well\r\n * \r\n * @param {number} childId \r\n * @param {import(\"../data/NodeData\").INodeData} node\r\n * @returns {boolean} \r\n */\r\nexport const isChild = function (childId, node) {\r\n    if (node.nodes.some(node => node.id === childId)) {\r\n        return true;\r\n    }\r\n    for (let i = 0; i < node.nodes.length; i++) {\r\n        if (isChild(childId, node.nodes[i])) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * \r\n * @param {number} childId \r\n * @param {import(\"../data/NodeData\").INodeData} node \r\n * @returns {boolean} \r\n */\r\nexport const isParent = function (childId, node) {\r\n    return node.nodes.some(node => node.id === childId);\r\n}\r\n\r\n/**\r\n * @param {number} nodeId \r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree\r\n * @returns {import(\"../data/NodeData\").INodeData | null} \r\n */\r\nexport const getNodeByID = function (nodeId, tree) {\r\n    // check whether the searched node is the root node \r\n    if (tree.id === nodeId) {\r\n        return tree;\r\n    }\r\n    // check first if the root element has the node we need\r\n    const result = tree.nodes.find(node => node.id === nodeId);\r\n    if (result) {\r\n        return result;\r\n    }\r\n\r\n    for (let i = 0; i < tree.nodes.length; i++) {\r\n        const result = getNodeByID(nodeId, tree.nodes[i]);\r\n        if (result) {\r\n            return result;\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * This function is not pure, its modifies the node data! \r\n * @param {number} nodeId \r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree\r\n * @returns {boolean} - whether a node has been removed or not\r\n */\r\nexport const removeNode = function (nodeId, tree) {\r\n\r\n    if (isParent(nodeId, tree)) {\r\n        tree.nodes = tree.nodes.filter(node => node.id !== nodeId);\r\n        return true;\r\n    }\r\n\r\n    for (let i = 0; i < tree.nodes.length; i++) {\r\n        const result = removeNode(nodeId, tree.nodes[i]);\r\n        if (result) {\r\n            return result;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * This function is not pure, its modifies the node / tree data! \r\n * @param {import(\"../data/NodeData\").INodeData} node - a target node\r\n * @param {number} referenceID - the parent's node ID we need to append a new node to \r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree\r\n * @returns {boolean} - whether a node has been appended or not\r\n */\r\nexport const appendNode = function (node, referenceID, tree) {\r\n    const targetNode = getNodeByID(referenceID, tree);\r\n\r\n    if (targetNode) {\r\n        targetNode.nodes = [...targetNode.nodes, node];\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * This function is not pure, its modifies the node / tree data! \r\n * @param {import(\"../data/NodeData\").INodeData} node - a target node\r\n * @param {number} referenceID - the node's ID before which we need to insert a new node\r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree\r\n * @returns {boolean} - whether a node has been inserted or not\r\n */\r\nexport const insertBefore = function (node, referenceID, tree) {\r\n    const parentNode = getParent(referenceID, tree);\r\n\r\n    if (parentNode) {\r\n        for (let i = 0; i < parentNode.nodes.length; i++) {\r\n            if (parentNode.nodes[i].id !== referenceID) {\r\n                continue;\r\n            }\r\n            const copy = [...parentNode.nodes];\r\n            copy.splice(i, 0, node);\r\n            parentNode.nodes = copy;\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n *If you are not sure whether a selected node has parents, you should try `changeNodeName` function first\r\n * \r\n * @param {import(\"../data/NodeData\").INodeData} node - root node\r\n * @param {string} name \r\n * @returns {boolean} - whether a node has been updated or not\r\n */\r\nexport const changeRootNodeName = (node, name) => {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    node.name = name;\r\n    return true;\r\n}\r\n\r\n/**\r\n * Unlike the `changeRootNodeName` this function will try to find a node's parent element.\r\n * That is needed to process a child node and replace it in the parent's children array;\r\n * \r\n * @param {import(\"../data/NodeData\").INodeData} tree - can be a node or an entire tree \r\n * @param {number} referenceID - the ID of the node which will get a new name\r\n * @param {string} name \r\n * @returns {boolean} - whether a node has been updated or not\r\n */\r\nexport const changeNodeName = function (tree, referenceID, name) {\r\n\r\n    const parentNode = getParent(referenceID, tree);\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n\r\n    const childIndex = parentNode.nodes.findIndex((child) => child.id === referenceID);\r\n    const child = { ...parentNode.nodes[childIndex], name };\r\n    parentNode.nodes.splice(childIndex, 1, child);\r\n\r\n    return true;\r\n}","/**\r\n * @typedef {{\r\n * id: number;\r\n * name: string;\r\n * nodes: INodeData[];\r\n * }} INodeData\r\n */\r\n\r\n/**\r\n * \r\n * @param {number} id \r\n * @param {INodeData[]} [nodes = []]\r\n * @returns {INodeData} \r\n */\r\nexport const createNode = (id, name = `node_${id}`, nodes = []) => {\r\n    return {\r\n        id: id,\r\n        name: name,\r\n        nodes: nodes,\r\n    }\r\n}","\r\nimport { Container, Graphics, Rectangle } from \"pixi.js\";\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\n\r\nexport const DEFAULT_CELL_SIZE = 50;\r\nexport const DEFAULT_GRID_SIZE = 100;\r\nexport const GRID_GRAPHICS_DISPLAY_OBJECT_NAME = '__grid_graphics';\r\n\r\nexport const behavior = {\r\n    customDisplayObject: () => new Container(),\r\n    customApplyProps: (instance, _, { id, cellSize, gridSize, color, lineWidth, onSelect }) => {\r\n\r\n        // cellSize size of each square in the grid\r\n        // gridSize the length of a side of the square\r\n\r\n        if (cellSize === undefined) { cellSize = DEFAULT_CELL_SIZE; }\r\n        if (gridSize === undefined) { gridSize = DEFAULT_GRID_SIZE; }\r\n\r\n        const totalWidth = cellSize * gridSize;\r\n        const totalHeight = cellSize * gridSize;\r\n\r\n        instance.name = id;\r\n        instance.position.set(-totalWidth / 2, -totalHeight / 2)\r\n\r\n        let graphics = instance.getChildByName(GRID_GRAPHICS_DISPLAY_OBJECT_NAME);\r\n        if (!graphics) {\r\n            graphics = new Graphics();\r\n            graphics.name = GRID_GRAPHICS_DISPLAY_OBJECT_NAME;\r\n            instance.addChild(graphics);\r\n        }\r\n\r\n        graphics.clear();\r\n\r\n        // grid\r\n        graphics.lineStyle(lineWidth, color);\r\n\r\n        for (let x = 0; x < gridSize; x++) {\r\n            if (x === gridSize / 2) { continue; }\r\n            graphics.moveTo(x * cellSize, 0);\r\n            graphics.lineTo(x * cellSize, totalWidth);\r\n        }\r\n\r\n        for (let y = 0; y < gridSize; y++) {\r\n            if (y === gridSize / 2) { continue; }\r\n            graphics.moveTo(0, y * cellSize);\r\n            graphics.lineTo(totalHeight, y * cellSize);\r\n        }\r\n\r\n        // y axis\r\n        graphics.lineStyle(lineWidth, 0x00ff00);\r\n        graphics.moveTo(totalWidth / 2, 0);\r\n        graphics.lineTo(totalWidth / 2, totalHeight);\r\n\r\n        // x axis\r\n        graphics.moveTo(0, totalHeight / 2);\r\n        graphics.lineTo(totalWidth, totalHeight / 2);\r\n\r\n        // rectangle around\r\n        graphics.drawRect(0, 0, totalWidth, totalHeight);\r\n        graphics.endFill();\r\n\r\n        if (!graphics.interactive) {\r\n            graphics.hitArea = new Rectangle(-Number.MAX_SAFE_INTEGER / 2, -Number.MAX_SAFE_INTEGER / 2, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\r\n            graphics.interactive = true;\r\n            graphics.on(\"mousedown\", () => {\r\n                onSelect(null);\r\n            }, this);\r\n        }\r\n    }\r\n};\r\nexport const CGrid = CustomPIXIComponent(behavior, \"CGrid\");","export const ROOT_NODE_ID = 1;\r\n\r\n// I haven't decided if the editor will support some extra COMPONENTS like collision  box or mask etc\r\nexport const AVAILABLE_COMPONENTS = Object.freeze({\r\n    MASK: \"MASK\",\r\n    HIT_AREA: \"HIT_AREA\"\r\n});\r\n\r\nexport const ENTITY_TYPES = Object.freeze({\r\n    CONTAINER: \"CONTAINER\",\r\n    SPRITE: \"SPRITE\",\r\n    GRAPHICS: \"GRAPHICS\",\r\n    NINE_SLICE_SPRITE: \"NINE_SLICE_SPRITE\",\r\n    TEXT: \"TEXT\"\r\n\r\n\r\n    // ANIMATED_SPRITE: \"ANIMATED_SPRITE\",\r\n});\r\n\r\n/**\r\n * @typedef {{\r\n *  type: ENTITY_TYPES[keyof ENTITY_TYPES];\r\n *  components: Array<keyof AVAILABLE_COMPONENTS>\r\n * }} IEntityData\r\n */\r\n\r\n/**\r\n * @param {keyof ENTITY_TYPES} type \r\n * @param {Array<keyof AVAILABLE_COMPONENTS>} properties\r\n * \r\n * @returns IEntityData \r\n */\r\nexport const getEntityType = (type, components = []) => {\r\n    return {\r\n        type,\r\n        components\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef {{\r\n * visible: boolean;\r\n * alpha: number;\r\n * positionX: number;\r\n * positionY: number;\r\n * scaleX: number;\r\n * scaleY: number;\r\n * rotation: number;\r\n * cellSize?: number;\r\n * gridSize?: number;\r\n * }} IBasePropertyData\r\n */\r\n\r\n/**\r\n * @returns IBasePropertyData\r\n */\r\nexport const getBaseProperties = () => {\r\n    return {\r\n        visible: true,\r\n        alpha: 1,\r\n        positionX: 0,\r\n        positionY: 0,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        rotation: 0,\r\n        cellSize: undefined,\r\n        gridSize: undefined,\r\n    }\r\n};\r\n\r\n/**\r\n * @typedef {{\r\n * anchorX: number; \r\n * anchorY: number;\r\n * resourceID: number | null;\r\n * resourceName: string | null;\r\n * }} ISpriteProperties\r\n */\r\n\r\n/**\r\n * @returns ISpriteProperties\r\n */\r\nexport const getSpriteProperties = () => {\r\n    return {\r\n        anchorX: 0,\r\n        anchorY: 0,\r\n        resourceID: null,\r\n        resourceName: null,\r\n    }\r\n};\r\n\r\n// TEXT ================================\r\n\r\nexport const FONT_FAMILIES = Object.freeze({\r\n    ARIAL: \"Arial\",\r\n    ARIAL_BLACK: \"Arial Black\",\r\n    COMIC_SANS_MS: \"Comic Sans MS\",\r\n    COURIER_NEW: \"Courier New\",\r\n    GEORGIA: \"Georgia\",\r\n    HELVETICA: \"Helvetica\",\r\n    IMPACT: \"Impact\",\r\n    TAHOMA: \"Tahoma\",\r\n    TIMES_NEW_ROMAN: \"Times New Roman\",\r\n    VERDANA: \"Verdana\",\r\n});\r\n\r\nexport const FONT_STYLE = Object.freeze({\r\n    NORMAL: \"normal\",\r\n    ITALIC: \"italic\",\r\n    OBLIQUE: \"oblique\",\r\n});\r\n\r\nexport const FONT_VARIANT = Object.freeze({\r\n    NORMAL: \"normal\",\r\n    SMALL_CAPS: \"small-caps\",\r\n});\r\n\r\nexport const FONT_WEIGHT = Object.freeze({\r\n    NORMAL: \"normal\",\r\n    BOLD: \"bold\",\r\n    BOLDER: \"bolder\",\r\n    LIGHTER: \"lighter\",\r\n    WEIGHT_100: 100,\r\n    WEIGHT_200: 200,\r\n    WEIGHT_300: 300,\r\n    WEIGHT_400: 400,\r\n    WEIGHT_500: 500,\r\n    WEIGHT_600: 600,\r\n    WEIGHT_700: 700,\r\n    WEIGHT_800: 800,\r\n    WEIGHT_900: 900,\r\n});\r\n\r\nexport const FONT_LINE_JOINT = Object.freeze({\r\n    MITER: \"miter\",\r\n    ROUND: \"round\",\r\n    BEVEL: \"bevel\"\r\n});\r\n\r\nexport const TEXT_ALIGN = Object.freeze({\r\n    LEFT: \"left\",\r\n    CENTER: \"center\",\r\n    RIGHT: \"right\"\r\n});\r\n\r\nexport const TEXT_WHITE_SPACE = Object.freeze({\r\n    NORMAL: \"normal\",\r\n    PRE: \"pre\",\r\n    PRE_LINE: \"pre-line\",\r\n});\r\n\r\n\r\n\r\n\r\n/**\r\n * @typedef {{\r\n *  anchorX: number;\r\n *  anchorY: number;\r\n *  fill:  string;\r\n *  text: string;\r\n *  fontFamily: sting;\r\n *  fontSize: number;\r\n *  fontStyle : string;\r\n *  fontVariant : string;\r\n *  fontWeight : string | number;\r\n * \r\n *  // stroke properties are optional and may not exist in the data if disabled\r\n *  hasStroke?: boolean;\r\n *  lineJoin?: string;\r\n *  miterLimit?: number;\r\n *  stroke?: string;\r\n *  strokeThickness?: number;\r\n * \r\n *  // shadow props are optional and may NOT exist in the data if disabled\r\n *  dropShadow: boolean;\r\n *  dropShadowAlpha?: number;\r\n *  dropShadowAngle?: number;\r\n *  dropShadowBlur?: number;\r\n *  dropShadowColor?: string;\r\n *  dropShadowDistance?: number;\r\n * \r\n *  // multi-line props are optional and may NOT exist in the data if disabled\r\n *  align?: string;\r\n *  wordWrap?: boolean;\r\n *  breakWords?: boolean;\r\n *  leading?: number;\r\n *  lineHeight?: number;\r\n *  wordWrapWidth?: number\r\n *  whiteSpace?: string;\r\n * \r\n * }} ITextProperties;\r\n */\r\n\r\nexport const getTextProperties = () => {\r\n    return {\r\n        anchorX: 0,\r\n        anchorY: 0,\r\n        text: \"No text\",\r\n        fill: \"#000000\",\r\n        fontFamily: FONT_FAMILIES.ARIAL,\r\n        fontStyle: FONT_STYLE.NORMAL,\r\n        fontVariant: FONT_VARIANT.NORMAL,\r\n        fontWeight: FONT_WEIGHT.NORMAL,\r\n        fontSize: 40\r\n    };\r\n};\r\n\r\n// GRAPHICS ================================== \r\n\r\nexport const GRAPHICS_TYPES = Object.freeze({\r\n    RECTANGLE: \"RECTANGLE\",\r\n    ROUNDED_RECTANGLE: \"ROUNDED_RECTANGLE\",\r\n    CIRCLE: \"CIRCLE\"\r\n});\r\n\r\n\r\n/**\r\n * @typedef {{ \r\n * x: number;\r\n * y: number; \r\n * color: number; \r\n * alpha: number; \r\n * }} IBaseGraphicsProperties;\r\n */\r\n\r\n/**\r\n * @typedef {{ width: number; height: number; } & IBaseGraphicsProperties} IRectangleProperties;\r\n */\r\n\r\n/**\r\n * @typedef {{ cornerRadius: number; } & IRectangleProperties } IRoundedRectangleProperties;\r\n */\r\n\r\n/**\r\n * @typedef {{ radius: number; } & IBaseGraphicsProperties} ICircleProperties;\r\n */\r\n\r\n/**\r\n * @typedef {IRectangleProperties | IRoundedRectangleProperties | ICircleProperties} IGraphicsPropertiesCombination;\r\n */\r\n\r\n/**\r\n * @type IBaseGraphicsProperties\r\n */\r\nconst baseGraphicsProps = {\r\n    x: 0,\r\n    y: 0,\r\n    color: \"0x000000\",\r\n    alpha: 1\r\n};\r\n\r\n/**\r\n * @returns IRectangleProperties\r\n */\r\nconst getRectangleProperties = () => {\r\n    return {\r\n        width: 100,\r\n        height: 100,\r\n        ...baseGraphicsProps\r\n    }\r\n};\r\n\r\n/**\r\n * @returns IRoundedRectangleProperties\r\n */\r\nconst getRoundedRectangleProperties = () => {\r\n    return {\r\n        width: 100,\r\n        height: 100,\r\n        cornerRadius: 20,\r\n        ...baseGraphicsProps\r\n    }\r\n};\r\n\r\n/**\r\n * @returns ICircleProperties\r\n */\r\nconst getCircleProperties = () => {\r\n    return {\r\n        radius: 50,\r\n        ...baseGraphicsProps\r\n    }\r\n}\r\n/**\r\n * @param {keyof GRAPHICS_TYPES} type\r\n * @returns IGraphicsPropertiesCombination\r\n */\r\nexport const getGraphicsProperties = (type) => {\r\n    if (type === GRAPHICS_TYPES.RECTANGLE) { return getRectangleProperties(); }\r\n    if (type === GRAPHICS_TYPES.ROUNDED_RECTANGLE) { return getRoundedRectangleProperties(); }\r\n    if (type === GRAPHICS_TYPES.CIRCLE) { return getCircleProperties(); }\r\n    throw new Error(\"Graphics type is not found: \" + type);\r\n}\r\n\r\n// 9 SLICE SPRITE ==============================\r\n\r\n/**\r\n * @typedef {{\r\n * A: number; \r\n * B: number; \r\n * C: number; \r\n * D: number;\r\n * anchorX: number; \r\n * anchorY: number;\r\n * width: number; \r\n * height: number;\r\n * resourceID: number | null;\r\n * }} INineSliceSpriteProperties\r\n */\r\n\r\n/**\r\n * @returns INineSliceSpriteProperties\r\n */\r\nexport const getNineSliceSpriteProperties = () => {\r\n    return {\r\n        A: 5,\r\n        B: 5,\r\n        C: 5,\r\n        D: 5,\r\n        anchorX: 0,\r\n        anchorY: 0,\r\n        width: 50,\r\n        height: 50,\r\n        resourceID: null\r\n    }\r\n}","import { DEFAULT_CELL_SIZE, DEFAULT_GRID_SIZE } from \"../components/preview/custom/CGrid\";\r\nimport { createNode } from \"./NodeData\";\r\nimport { ENTITY_TYPES, ROOT_NODE_ID, getBaseProperties, getEntityType } from \"./StoreData\";\r\n\r\n/* \r\n    By default, (for new projects) \r\n    We have a rood node in the tree which is an entity type of container and, thus, has base properties\r\n*/\r\nexport const defaultStoreData = {\r\n    tree: {\r\n        treeData: createNode(ROOT_NODE_ID, \"Scene\", []),\r\n        selectedNodeID: null\r\n    },\r\n    entitiesList: {\r\n        [ROOT_NODE_ID]: getEntityType(ENTITY_TYPES.CONTAINER, [])\r\n    },\r\n    properties: {\r\n        base: {\r\n            [ROOT_NODE_ID]: { ...getBaseProperties(), cellSize: DEFAULT_CELL_SIZE, gridSize: DEFAULT_GRID_SIZE }\r\n        },\r\n        sprite: {},\r\n        nineSliceSprite: {},\r\n        graphics: {},\r\n        text: {}\r\n    }\r\n}","import { TREE_ACTIONS } from \"./actionTypes\";\r\nimport { removeNode, appendNode, insertBefore, changeNodeName, changeRootNodeName } from \"../../tools/treeTools\";\r\nimport { createNode } from \"../../data/NodeData\";\r\nimport { defaultStoreData } from \"../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../data/MockStreData\";\r\n\r\n/**\r\n * @typedef {{\r\n * treeData: import(\"../../data/NodeData\").INodeData | null;\r\n * selectedNodeID: null | number;\r\n * copyNodeID: null | number;\r\n * }} ITreeState;\r\n */\r\n\r\n/**\r\n * @typeof ITreeState\r\n */\r\nconst STATE = defaultStoreData.tree\r\n// const STATE = mockStoreData.tree\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {*} payload \r\n * @returns {ITreeState}\r\n */\r\nconst processInsertBeforeNodeAction = (state, payload) => {\r\n    const treeData = { ...state.treeData }\r\n    const newState = { ...state, treeData };\r\n    // remove the dragged node from tree\r\n    if (!removeNode(payload.nodeData.id, newState.treeData)) {\r\n        throw new Error(`Tree Reducer: the node with id ${payload.referenceID} has not been removed!`);\r\n    }\r\n    // insert the dragged node into new place\r\n    insertBefore(payload.nodeData, payload.referenceID, newState.treeData);\r\n    return newState;\r\n};\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {*} payload \r\n * @returns {ITreeState}\r\n */\r\nconst processMoveNodeAction = (state, payload) => {\r\n    const treeData = { ...state.treeData }\r\n    const newState = { ...state, treeData };\r\n    // remove the dragged node from tree\r\n    if (!removeNode(payload.nodeData.id, newState.treeData)) {\r\n        throw new Error(`Tree Reducer: the node with id ${payload.referenceID} has not been removed!`);\r\n    }\r\n    // insert the dragged node into new place\r\n    appendNode(payload.nodeData, payload.referenceID, newState.treeData);\r\n    return newState;\r\n};\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {*} payload \r\n * @returns {ITreeState}\r\n */\r\nconst processSelectNodeIDAction = (state, payload) => {\r\n    const newState = { ...state, selectedNodeID: payload };\r\n    return newState;\r\n};\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {*} payload \r\n * @returns {ITreeState}\r\n */\r\nconst processCopyNodeIDAction = (state, payload) => {\r\n    const newState = { ...state, copyNodeID: payload };\r\n    return newState;\r\n};\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {*} payload \r\n * @returns {ITreeState}\r\n */\r\nconst processUpdateNodeNameAction = (state, payload) => {\r\n    const treeData = { ...state.treeData }\r\n    const newState = { ...state, treeData };\r\n\r\n    if (!changeNodeName(newState.treeData, payload.nodeID, payload.name)) {\r\n        // if the the function above didn't work, I assume we selected the root node\r\n        if (!changeRootNodeName(newState.treeData, payload.name)) {\r\n            throw new Error(`Tree Reducer: can't update the the node with id ${payload.referenceID} `);\r\n        }\r\n    }\r\n    return newState;\r\n}\r\n\r\nconst processDeleteNodeNameAction = (state, payload) => {\r\n    const treeData = { ...state.treeData }\r\n\r\n    const newState = {\r\n        ...state,\r\n        treeData,\r\n        // just in case if a currently selected node is the one we are removing.\r\n        // otherwise we will have errors in other components\r\n        selectedNodeID: payload.nodeID === state.selectedNodeID ? null : state.selectedNodeID,\r\n        copyNodeID: payload.nodeID === state.copyNodeID ? null : state.copyNodeID,\r\n    };\r\n\r\n    if (!removeNode(payload.nodeID, newState.treeData)) {\r\n        throw new Error(`Tree Reducer: the node with id ${payload.referenceID} has not been removed!`);\r\n    }\r\n    return newState;\r\n}\r\n\r\nconst processCreateNodeAction = (state, payload) => {\r\n    const treeData = { ...state.treeData }\r\n    const newState = { ...state, treeData };\r\n\r\n    appendNode(createNode(payload.nodeID), payload.referenceID, newState.treeData);\r\n\r\n    return newState;\r\n}\r\n\r\nconst processImportTreeData = (state, payload) => {\r\n    return { ...payload }\r\n}\r\n\r\n/**\r\n * \r\n * @param {ITreeState} state \r\n * @param {{type: string; payload: any}} data \r\n * @returns {ITreeState}\r\n */\r\nexport const treeReducer = (state = STATE, { type, payload }) => {\r\n    switch (type) {\r\n        case TREE_ACTIONS.SET_SELECTED_NODE_ID:\r\n            return processSelectNodeIDAction(state, payload);\r\n\r\n        case TREE_ACTIONS.SET_COPY_NODE_ID:\r\n            return processCopyNodeIDAction(state, payload);\r\n\r\n        case TREE_ACTIONS.INSERT_BEFORE_NODE:\r\n            return processInsertBeforeNodeAction(state, payload);\r\n\r\n        case TREE_ACTIONS.MOVE_NODE:\r\n            return processMoveNodeAction(state, payload);\r\n\r\n        case TREE_ACTIONS.APPEND_NODE: return state;\r\n\r\n        case TREE_ACTIONS.UPDATE_NODE_NAME:\r\n            return processUpdateNodeNameAction(state, payload);\r\n\r\n        case TREE_ACTIONS.CREATE_NODE:\r\n            return processCreateNodeAction(state, payload);\r\n\r\n        case TREE_ACTIONS.DELETE_NODE:\r\n            return processDeleteNodeNameAction(state, payload);\r\n\r\n        case TREE_ACTIONS.IMPORT_TREE_DATA:\r\n            return processImportTreeData(state, payload);\r\n\r\n        default: return state;\r\n    }\r\n};\r\n\r\n\r\n","import { createNode } from \"./NodeData\";\r\nimport { ENTITY_TYPES, ROOT_NODE_ID, getBaseProperties, getEntityType, getSpriteProperties } from \"./StoreData\";\r\n\r\nexport const mockStoreData = {\r\n    tree: {\r\n        treeData: createNode(ROOT_NODE_ID, \"Scene\", [\r\n            createNode(123, \"Header\", [\r\n                createNode(645, \"LogoSprite\", []),\r\n            ]),\r\n            createNode(222, \"Footer\", [\r\n\r\n            ])\r\n        ]),\r\n        selectedNodeID: null\r\n    },\r\n    entitiesList: {\r\n        [ROOT_NODE_ID]: getEntityType(ENTITY_TYPES.CONTAINER, []),\r\n        [123]: getEntityType(ENTITY_TYPES.CONTAINER, []),\r\n        [222]: getEntityType(ENTITY_TYPES.CONTAINER, []),\r\n        [645]: getEntityType(ENTITY_TYPES.SPRITE, []),\r\n    },\r\n    properties: {\r\n        base: {\r\n            [ROOT_NODE_ID]: getBaseProperties(),\r\n            [123]: getBaseProperties(),\r\n            [222]: getBaseProperties(),\r\n            [645]: getBaseProperties(),\r\n        },\r\n        sprite: {\r\n            ...getSpriteProperties(645)\r\n        },\r\n        nineSliceSprite: {\r\n\r\n        },\r\n        graphics: {\r\n\r\n        },\r\n        text: {\r\n\r\n        }\r\n    }\r\n}","export const BASE_PROPERTIES_ACTIONS = Object.freeze({\r\n    UPDATE_BASE_PROPERTIES: \"UPDATE_BASE_PROPERTIES\",\r\n    INIT_BASE_PROPERTIES: \"INIT_BASE_PROPERTIES\",\r\n    REMOVE_BASE_PROPERTIES: \"REMOVE_BASE_PROPERTIES\",\r\n    IMPORT_BASE_PROPERTIES: \"IMPORT_BASE_PROPERTIES\"\r\n});\r\n","import { BASE_PROPERTIES_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * @param {number} id \r\n */\r\nexport const initBasePropertiesAction = (id) => {\r\n    return { type: BASE_PROPERTIES_ACTIONS.INIT_BASE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {number} id \r\n */\r\nexport const removeBasePropertiesAction = (id) => {\r\n    return { type: BASE_PROPERTIES_ACTIONS.REMOVE_BASE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IActionPayload} payload \r\n */\r\nexport const updateBasePropertiesAction = (payload) => {\r\n    return { type: BASE_PROPERTIES_ACTIONS.UPDATE_BASE_PROPERTIES, payload }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IBasePropertiesListState} payload \r\n */\r\nexport const importBasePropertiesAction = (payload) => {\r\n    return { type: BASE_PROPERTIES_ACTIONS.IMPORT_BASE_PROPERTIES, payload }\r\n};","import { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\nimport { getBaseProperties } from \"../../../data/StoreData\";\r\nimport { BASE_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @typedef {{ \r\n *  nodeID: number;\r\n *  properties: Partial<import(\"../../../data/StoreData\").IBasePropertyData>\r\n * }} IActionPayload \r\n */\r\n\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: import(\"../../../data/StoreData\").IBasePropertyData }} IBasePropertiesListState;\r\n */\r\n\r\n\r\n/**\r\n * By default the root node has the base properties\r\n * @typeof IBasePropertiesListState\r\n */\r\nconst STATE = defaultStoreData.properties.base;\r\n// const STATE = mockStoreData.properties.base;\r\n\r\n/**\r\n * \r\n * @param {IBasePropertiesListState} state \r\n * @param {{type: string; payload: { nodeID: id } | IActionPayload | IBasePropertiesListState}} data \r\n * @returns {IBasePropertiesListState}\r\n */\r\nexport const basePropertiesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === BASE_PROPERTIES_ACTIONS.INIT_BASE_PROPERTIES) {\r\n        const newState = { ...state, [payload.nodeID]: getBaseProperties() };\r\n        return newState;\r\n    }\r\n\r\n    else if (type === BASE_PROPERTIES_ACTIONS.REMOVE_BASE_PROPERTIES) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n\r\n    else if (type === BASE_PROPERTIES_ACTIONS.UPDATE_BASE_PROPERTIES) {\r\n        const { nodeID, properties } = payload;\r\n        const newState = { ...state };\r\n        const newNodeProps = { ...newState[nodeID], ...properties };\r\n        newState[nodeID] = newNodeProps;\r\n        return newState;\r\n    }\r\n\r\n    else if (type === BASE_PROPERTIES_ACTIONS.IMPORT_BASE_PROPERTIES) {\r\n        Object.keys(payload).forEach(k => {\r\n            payload[k].visible = payload[k].visible ?? true;\r\n            payload[k].alpha = payload[k].alpha ?? 1;\r\n        });\r\n        return { ...payload }\r\n    }\r\n    else {\r\n        return state;\r\n    }\r\n};\r\n\r\n\r\n","export const SPRITE_PROPERTIES_ACTIONS = Object.freeze({\r\n    UPDATE_SPRITE_PROPERTIES: \"UPDATE_SPRITE_PROPERTIES\",\r\n    INIT_SPRITE_PROPERTIES: \"INIT_SPRITE_PROPERTIES\",\r\n    REMOVE_SPRITE_PROPERTIES: \"REMOVE_SPRITE_PROPERTIES\",\r\n    IMPORT_SPRITE_PROPERTIES: \"IMPORT_SPRITE_PROPERTIES\",\r\n});\r\n","import { SPRITE_PROPERTIES_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const initSpritePropertiesAction = (id) => {\r\n    return { type: SPRITE_PROPERTIES_ACTIONS.INIT_SPRITE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const removeSpritePropertiesAction = (id) => {\r\n    return { type: SPRITE_PROPERTIES_ACTIONS.REMOVE_SPRITE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IActionPayload} payload\r\n */\r\nexport const updateSpritePropertiesAction = (payload) => {\r\n    return { type: SPRITE_PROPERTIES_ACTIONS.UPDATE_SPRITE_PROPERTIES, payload }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").ISpritePropertiesListState} payload\r\n */\r\nexport const importSpritePropertiesAction = (payload) => {\r\n    return { type: SPRITE_PROPERTIES_ACTIONS.IMPORT_SPRITE_PROPERTIES, payload }\r\n};","import { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../../data/MockStreData\";\r\nimport { getSpriteProperties } from \"../../../data/StoreData\";\r\nimport { SPRITE_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n\r\n/**\r\n * @typedef {{ nodeID: number;} & { properties: Partial<import(\"../../../data/StoreData\").ISpriteProperties>}} IActionPayload \r\n */\r\n\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: import(\"../../../data/StoreData\").ISpriteProperties }} ISpritePropertiesListState;\r\n */\r\n\r\n\r\n/**\r\n * @typeof ISpritePropertiesListState\r\n */\r\nconst STATE = defaultStoreData.properties.sprite;\r\n// const STATE = mockStoreData.properties.sprite;\r\n\r\n/**\r\n * \r\n * @param {ISpritePropertiesListState} state \r\n * @param {{type: string; payload: { nodeID: id } | IActionPayload | ISpritePropertiesListState}} data \r\n * @returns {ISpritePropertiesListState}\r\n */\r\nexport const spritePropertiesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === SPRITE_PROPERTIES_ACTIONS.INIT_SPRITE_PROPERTIES) {\r\n        const newState = { ...state, [payload.nodeID]: getSpriteProperties() };\r\n        return newState;\r\n    }\r\n    else if (type === SPRITE_PROPERTIES_ACTIONS.REMOVE_SPRITE_PROPERTIES) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n    else if (type === SPRITE_PROPERTIES_ACTIONS.UPDATE_SPRITE_PROPERTIES) {\r\n        const { nodeID, properties } = payload;\r\n        const newState = { ...state };\r\n        const newNodeProps = { ...newState[nodeID], ...properties };\r\n        newState[nodeID] = newNodeProps;\r\n        return newState;\r\n    }\r\n    else if (type === SPRITE_PROPERTIES_ACTIONS.IMPORT_SPRITE_PROPERTIES) {\r\n        return { ...payload }\r\n    }\r\n    else {\r\n        return state;\r\n    }\r\n\r\n};\r\n\r\n\r\n","export const ENTITY_TYPES_LIST_ACTIONS = Object.freeze({\r\n    INIT_ENTITY: \"INIT_ENTITY\",\r\n    REMOVE_ENTITY: \"REMOVE_ENTITY\",\r\n    IMPORT_ENTITY_DATA: \"IMPORT_ENTITY_DATA\",\r\n\r\n    // I haven't decided if the editor will support some extra COMPONENTS like collision  box or mask etc\r\n    // ADD_EXTRA_ENTITY_COMPONENTS: \"ADD_EXTRA_ENTITY_COMPONENTS\",\r\n    // REMOVE_EXTRA_ENTITY_COMPONENTS: \"REMOVE_EXTRA_ENTITY_COMPONENTS\",\r\n});\r\n","import { ENTITY_TYPES } from \"../../data/StoreData\";\r\nimport { ENTITY_TYPES_LIST_ACTIONS } from \"./actionTypes\"\r\n\r\n\r\n/**\r\n * @param {number} id \r\n * @param {ENTITY_TYPES[keyof ENTITY_TYPES]} entityType \r\n */\r\nexport const initEntityAction = (id, entityType) => {\r\n    return {type: ENTITY_TYPES_LIST_ACTIONS.INIT_ENTITY, payload: {nodeID: id, entityType}};\r\n}\r\n\r\n/**\r\n * @param {number} id \r\n */\r\nexport const removeEntityAction = (id) => {\r\n    return { type: ENTITY_TYPES_LIST_ACTIONS.REMOVE_ENTITY, payload: {nodeID: id} }\r\n};\r\n\r\n/**\r\n * @param {import (\"./reducer\").IEntityTypesListState} payload \r\n */\r\nexport const importEntityDataAction = (payload) => {\r\n    return { type: ENTITY_TYPES_LIST_ACTIONS.IMPORT_ENTITY_DATA, payload }\r\n};\r\n\r\n// I haven't decided if the editor will support some extra props like collision  box or mask etc\r\n   \r\n\r\n// /**\r\n//  * \r\n//  */\r\n// export const addEntityPropsAction = (payload) => {\r\n//     return { type: ENTITY_TYPES_LIST_ACTIONS.ADD_EXTRA_ENTITY_COMPONENTS, payload }\r\n// };\r\n\r\n// /**\r\n//  * \r\n//  */\r\n// export const removeEntityPropsAction = (payload) => {\r\n//     return { type: ENTITY_TYPES_LIST_ACTIONS.REMOVE_EXTRA_ENTITY_COMPONENTS, payload }\r\n// };","import { defaultStoreData } from \"../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../data/MockStreData\";\r\nimport { ENTITY_TYPES, getEntityType } from \"../../data/StoreData\";\r\nimport { ENTITY_TYPES_LIST_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @typedef {{nodeID: number; entityType: ENTITY_TYPES[keyof ENTITY_TYPES]}} IActionPayload \r\n */\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: import(\"../../data/StoreData\").IEntityData }} IEntityTypesListState;\r\n */\r\n\r\n\r\n/**\r\n * @typeof IEntityTypesListState\r\n */\r\nconst STATE = defaultStoreData.entitiesList;\r\n// const STATE = mockStoreData.entitiesList;\r\n\r\n/**\r\n * \r\n * @param {IEntityTypesListState} state \r\n * @param {{type: string; payload: {nodeID: id} | IActionPayload | }} data \r\n * @returns {IEntityTypesListState}\r\n */\r\nexport const entityTypesListReducer = (state = STATE, { type, payload }) => {\r\n\r\n    if (type === ENTITY_TYPES_LIST_ACTIONS.INIT_ENTITY) {\r\n        return { ...state, [payload.nodeID]: getEntityType(payload.entityType, []) };\r\n    }\r\n    else if (type === ENTITY_TYPES_LIST_ACTIONS.IMPORT_ENTITY_DATA) {\r\n        return { ...payload };\r\n    }\r\n    else if (type === ENTITY_TYPES_LIST_ACTIONS.REMOVE_ENTITY) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n    // I haven't decided if the editor will support some extra COMPONENTS like collision  box or mask etc\r\n\r\n    // else if (type === ENTITY_TYPES_LIST_ACTIONS.ADD_EXTRA_ENTITY_COMPONENTS) {\r\n    //     const newState = { ...state };\r\n    //     newState[payload.nodeID].properties.push(payload.property);\r\n    //     return newState;\r\n    // }\r\n    // else if (type === ENTITY_TYPES_LIST_ACTIONS.REMOVE_EXTRA_ENTITY_COMPONENTS) {\r\n    //     const newState = { ...state };\r\n    //     newState[payload.nodeID].properties = newState[payload.nodeID].properties\r\n    //         .filter(val => val !== payload.property);\r\n    //     return newState;\r\n    // }\r\n    else {\r\n        return state;\r\n    }\r\n};","export const RESOURCE_ACTIONS = Object.freeze({\r\n    ADD_RESOURCES: \"ADD_RESOURCES\",\r\n    REMOVE_RESOURCE: \"REMOVE_RESOURCE\",\r\n    IMPORT_RESOURCES: \"IMPORT_RESOURCES\"\r\n});\r\n","import { RESOURCE_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @typedef {{ [id: number]: File }} IResourcesListState;\r\n */\r\n\r\n/**\r\n * @typeof IResourcesListState\r\n */\r\nconst STATE = {};\r\n\r\n/**\r\n * \r\n * @param {IResourcesListState} state \r\n * @param {{type: string; payload: {id: number; file: File} | Array<{id: number, file: File}}} data \r\n * @returns {IResourcesListState}\r\n */\r\nexport const resourcesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === RESOURCE_ACTIONS.ADD_RESOURCES) {\r\n        const newState = { ...state };\r\n        payload.forEach(({ id, file }) => newState[id] = file);\r\n        return newState;\r\n    }\r\n\r\n    else if (type === RESOURCE_ACTIONS.REMOVE_RESOURCE) {\r\n        const newState = { ...state };\r\n        delete newState[payload.id];\r\n        return newState;\r\n    }\r\n\r\n    else if (type === RESOURCE_ACTIONS.IMPORT_RESOURCES) {\r\n        return { ...payload };\r\n    }\r\n\r\n    else {\r\n        return state;\r\n    }\r\n};\r\n\r\n\r\n","export const GRAPHICS_PROPERTIES_ACTIONS = Object.freeze({\r\n    UPDATE_GRAPHICS_PROPERTIES: \"UPDATE_GRAPHICS_PROPERTIES\",\r\n    INIT_GRAPHICS_PROPERTIES: \"INIT_GRAPHICS_PROPERTIES\",\r\n    REMOVE_GRAPHICS_PROPERTIES: \"REMOVE_GRAPHICS_PROPERTIES\",\r\n    IMPORT_GRAPHICS_PROPERTIES: \"IMPORT_GRAPHICS_PROPERTIES\",\r\n    CHANGE_GRAPHICS_TYPE: \"CHANGE_GRAPHICS_TYPE\",\r\n});\r\n","import { GRAPHICS_TYPES } from \"../../../data/StoreData\";\r\nimport { GRAPHICS_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {keyof GRAPHICS_TYPES} type\r\n */\r\nexport const initGraphicsPropertiesAction = (id, type) => {\r\n    return { type: GRAPHICS_PROPERTIES_ACTIONS.INIT_GRAPHICS_PROPERTIES, payload: { nodeID: id, type } }\r\n};\r\n\r\n/**\r\n * @param {number} id \r\n */\r\nexport const removeGraphicsPropertiesAction = (id) => {\r\n    return { type: GRAPHICS_PROPERTIES_ACTIONS.REMOVE_GRAPHICS_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IUpdateActionPayload} payload \r\n */\r\nexport const updateGraphicsPropertiesAction = (payload) => {\r\n    return { type: GRAPHICS_PROPERTIES_ACTIONS.UPDATE_GRAPHICS_PROPERTIES, payload }\r\n};\r\n\r\n/**\r\n * @param {number} id \r\n * @param {keyof GRAPHICS_TYPES} type\r\n */\r\nexport const changeGraphicsTypeAction = (id, type) => {\r\n    return { type: GRAPHICS_PROPERTIES_ACTIONS.CHANGE_GRAPHICS_TYPE, payload: { nodeID: id, type } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IGraphicsPropertiesListState} payload \r\n */\r\nexport const importGraphicsPropertiesAction = (payload) => {\r\n    return { type: GRAPHICS_PROPERTIES_ACTIONS.IMPORT_GRAPHICS_PROPERTIES, payload }\r\n};","import { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../../data/MockStreData\";\r\nimport { GRAPHICS_TYPES, getBaseProperties, getGraphicsProperties } from \"../../../data/StoreData\";\r\nimport { GRAPHICS_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n\r\n\r\n/**\r\n * @typedef {{\r\n* nodeID: number;\r\n* type: keyof GRAPHICS_TYPES;\r\n* }} IInitActionPayload; \r\n*/\r\n\r\n/**\r\n * @typedef {{\r\n* nodeID: number;\r\n* type: keyof GRAPHICS_TYPES;\r\n* }} IChangeTypeActionPayload; \r\n*/\r\n\r\n/**\r\n * @typedef {{\r\n * nodeID: number;\r\n * properties: import(\"../../../data/StoreData\").IGraphicsPropertiesCombination;\r\n * }} IUpdateActionPayload; \r\n */\r\n\r\n/**\r\n * @typedef {{\r\n*  nodeID: number;\r\n* }} IRemoveActionPayload; \r\n*/\r\n\r\n/**\r\n * @typedef {{\r\n * type: keyof GRAPHICS_TYPES;\r\n * properties: import(\"../../../data/StoreData\").IGraphicsPropertiesCombination;\r\n * }} IGraphicsData \r\n */\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: IGraphicsData }} IGraphicsPropertiesListState;\r\n */\r\n\r\n\r\n/**\r\n * By default the root node has the base properties\r\n * @typeof IGraphicsPropertiesListState\r\n */\r\nconst STATE = defaultStoreData.properties.graphics;\r\n// const STATE = mockStoreData.properties.graphics;\r\n\r\n/**\r\n * \r\n * @param {IGraphicsPropertiesListState} state \r\n * @param {{type: string;} & (IUpdateActionPayload | IInitActionPayload | IRemoveActionPayload | IChangeTypeActionPayload) } data \r\n * @returns {IGraphicsPropertiesListState}\r\n */\r\nexport const graphicsPropertiesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === GRAPHICS_PROPERTIES_ACTIONS.INIT_GRAPHICS_PROPERTIES) {\r\n        return { ...state, [payload.nodeID]: { type: payload.type, ...getGraphicsProperties(payload.type) } };\r\n    }\r\n    else if (type === GRAPHICS_PROPERTIES_ACTIONS.CHANGE_GRAPHICS_TYPE) {\r\n        // because I will use the same id, it will replace the properties for a new type\r\n        return { ...state, [payload.nodeID]: { type: payload.type, ...getGraphicsProperties(payload.type) } };\r\n    }\r\n    else if (type === GRAPHICS_PROPERTIES_ACTIONS.REMOVE_GRAPHICS_PROPERTIES) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n\r\n    else if (type === GRAPHICS_PROPERTIES_ACTIONS.UPDATE_GRAPHICS_PROPERTIES) {\r\n        const { nodeID, properties } = payload;\r\n        const newState = { ...state };\r\n        const newNodeProps = { ...newState[nodeID], ...properties };\r\n        newState[nodeID] = newNodeProps;\r\n        return newState;\r\n    }\r\n\r\n    else if (type === GRAPHICS_PROPERTIES_ACTIONS.IMPORT_GRAPHICS_PROPERTIES) {\r\n        return { ...payload }\r\n    }\r\n    else {\r\n        return state;\r\n    }\r\n};\r\n\r\n\r\n","export const NINE_SLICE_SPRITE_PROPERTIES_ACTIONS = Object.freeze({\r\n    UPDATE_NINE_SLICE_SPRITE_PROPERTIES: \"UPDATE_NINE_SLICE_SPRITE_PROPERTIES\",\r\n    INIT_NINE_SLICE_SPRITE_PROPERTIES: \"INIT_NINE_SLICE_SPRITE_PROPERTIES\",\r\n    REMOVE_NINE_SLICE_SPRITE_PROPERTIES: \"REMOVE_NINE_SLICE_SPRITE_PROPERTIES\",\r\n    IMPORT_NINE_SLICE_SPRITE_PROPERTIES: \"IMPORT_NINE_SLICE_SPRITE_PROPERTIES\",\r\n});\r\n","import { NINE_SLICE_SPRITE_PROPERTIES_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const initNineSliceSpritePropertiesAction = (id) => {\r\n    return { type: NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.INIT_NINE_SLICE_SPRITE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const removeNineSliceSpritePropertiesAction = (id) => {\r\n    return { type: NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.REMOVE_NINE_SLICE_SPRITE_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IActionPayload} payload\r\n */\r\nexport const updateNineSliceSpritePropertiesAction = (payload) => {\r\n    return { type: NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.UPDATE_NINE_SLICE_SPRITE_PROPERTIES, payload }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").INineSliceSpritePropertiesListState} payload\r\n */\r\nexport const importNineSliceSpritePropertiesAction = (payload) => {\r\n    return { type: NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.IMPORT_NINE_SLICE_SPRITE_PROPERTIES, payload }\r\n};","import { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../../data/MockStreData\";\r\nimport { getNineSliceSpriteProperties } from \"../../../data/StoreData\";\r\nimport { NINE_SLICE_SPRITE_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @typedef {{ nodeID: number;} & {properties: Partial<import(\"../../../data/StoreData\").INineSliceSpriteProperties>}} IActionPayload \r\n */\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: import(\"../../../data/StoreData\").INineSliceSpriteProperties }} INineSliceSpritePropertiesListState;\r\n */\r\n\r\n\r\n/**\r\n * @typeof INineSliceSpritePropertiesListState\r\n */\r\nconst STATE = defaultStoreData.properties.nineSliceSprite;\r\n// const STATE = mockStoreData.properties.nineSliceSprite;\r\n\r\n/**\r\n * \r\n * @param {INineSliceSpritePropertiesListState} state \r\n * @param {{type: string; payload: { nodeID: id } | IActionPayload | INineSliceSpritePropertiesListState}} data \r\n * @returns {INineSliceSpritePropertiesListState}\r\n */\r\nexport const nineSliceSpritePropertiesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.INIT_NINE_SLICE_SPRITE_PROPERTIES) {\r\n        return { ...state, [payload.nodeID]: getNineSliceSpriteProperties() };\r\n    }\r\n    else if (type === NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.REMOVE_NINE_SLICE_SPRITE_PROPERTIES) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n    else if (type === NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.UPDATE_NINE_SLICE_SPRITE_PROPERTIES) {\r\n        const { nodeID, properties } = payload;\r\n        const newState = { ...state };\r\n        const newNodeProps = { ...newState[nodeID], ...properties };\r\n        newState[nodeID] = newNodeProps;\r\n        return newState;\r\n    }\r\n    else if (type === NINE_SLICE_SPRITE_PROPERTIES_ACTIONS.IMPORT_NINE_SLICE_SPRITE_PROPERTIES) {\r\n        return { ...payload }\r\n    }\r\n    else {\r\n        return state;\r\n    }\r\n\r\n};\r\n\r\n\r\n","export const TEXT_PROPERTIES_ACTIONS = Object.freeze({\r\n    UPDATE_TEXT_PROPERTIES: \"UPDATE_TEXT_PROPERTIES\",\r\n    INIT_TEXT_PROPERTIES: \"INIT_TEXT_PROPERTIES\",\r\n    REMOVE_TEXT_PROPERTIES: \"REMOVE_TEXT_PROPERTIES\",\r\n    IMPORT_TEXT_PROPERTIES: \"IMPORT_TEXT_PROPERTIES\",\r\n});\r\n","import { TEXT_PROPERTIES_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const initTextPropertiesAction = (id) => {\r\n    return { type: TEXT_PROPERTIES_ACTIONS.INIT_TEXT_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {number} id\r\n */\r\nexport const removeTextPropertiesAction = (id) => {\r\n    return { type: TEXT_PROPERTIES_ACTIONS.REMOVE_TEXT_PROPERTIES, payload: { nodeID: id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IActionPayload} payload\r\n */\r\nexport const updateTextPropertiesAction = (payload) => {\r\n    return { type: TEXT_PROPERTIES_ACTIONS.UPDATE_TEXT_PROPERTIES, payload }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").ITextPropertiesListState} payload\r\n */\r\nexport const importTextPropertiesAction = (payload) => {\r\n    return { type: TEXT_PROPERTIES_ACTIONS.IMPORT_TEXT_PROPERTIES, payload }\r\n};","import { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\nimport { mockStoreData } from \"../../../data/MockStreData\";\r\nimport { getTextProperties } from \"../../../data/StoreData\";\r\nimport { TEXT_PROPERTIES_ACTIONS } from \"./actionTypes\";\r\n\r\n/**\r\n * @typedef {{ nodeID: number;} & {properties: import(\"../../../data/StoreData\").ITextProperties}} IActionPayload \r\n */\r\n\r\n/**\r\n * @typedef {{ [nodeID: number]: import(\"../../../data/StoreData\").ITextProperties }} ITextPropertiesListState;\r\n */\r\n\r\n\r\n/**\r\n * @typeof ITextPropertiesListState\r\n * \r\n */\r\nconst STATE = defaultStoreData.properties.text;\r\n// const STATE = mockStoreData.properties.text;\r\n\r\n/**\r\n * \r\n * @param {ITextPropertiesListState} state \r\n * @param {{type: string; payload: { nodeID: id } | IActionPayload | ITextPropertiesListState}} data \r\n * @returns {ITextPropertiesListState}\r\n */\r\nexport const textPropertiesListReducer = (state = STATE, { type, payload }) => {\r\n    if (type === TEXT_PROPERTIES_ACTIONS.INIT_TEXT_PROPERTIES) {\r\n        return { ...state, [payload.nodeID]: getTextProperties() };\r\n    }\r\n    else if (type === TEXT_PROPERTIES_ACTIONS.REMOVE_TEXT_PROPERTIES) {\r\n        const newState = { ...state };\r\n        delete newState[payload.nodeID];\r\n        return newState;\r\n    }\r\n    else if (type === TEXT_PROPERTIES_ACTIONS.UPDATE_TEXT_PROPERTIES) {\r\n        const newState = { ...state };\r\n        newState[payload.nodeID] = payload.properties;\r\n        return newState;\r\n    }\r\n    else if (type === TEXT_PROPERTIES_ACTIONS.IMPORT_TEXT_PROPERTIES) {\r\n        return { ...payload }\r\n    }\r\n    else {\r\n        return state;\r\n    }\r\n};\r\n\r\n\r\n","import { createStore, combineReducers } from 'redux';\r\nimport { treeReducer } from \"./tree\";\r\nimport { basePropertiesListReducer } from \"./properties/base\";\r\nimport { spritePropertiesListReducer } from \"./properties/sprite\";\r\nimport { entityTypesListReducer } from \"./entityTypes\";\r\nimport { resourcesListReducer } from \"./resources\";\r\nimport { graphicsPropertiesListReducer } from './properties/graphics';\r\nimport { nineSliceSpritePropertiesListReducer } from './properties/nineSliceSprite';\r\nimport { textPropertiesListReducer } from './properties/text';\r\n\r\n/**\r\n * @typedef {{\r\n * tree: import(\"./tree\").ITreeState;\r\n * basePropertiesList: import(\"./properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"./properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"./properties/nineSliceSprite\").INineSliceSpritePropertiesListState\r\n * graphicsList: import(\"./properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"./properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"./entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"./resources\").IResourcesListState;\r\n * }} IStore\r\n */\r\n\r\n/**\r\n * @typedef {{getState: () => IStore}} Store\r\n */\r\n\r\n/**\r\n * @type Store\r\n */\r\nconst store = createStore(combineReducers({\r\n    // tree of nodes hierarchy\r\n    tree: treeReducer,\r\n    // contains the data about the components each entity has\r\n    entityTypesList: entityTypesListReducer,\r\n    // map of id to base properties for nodes which have it\r\n    basePropertiesList: basePropertiesListReducer,\r\n    // map of id to sprite properties for nodes which have it\r\n    spritePropertiesList: spritePropertiesListReducer,\r\n    // map of id to 9 slice sprite properties for nodes which have it\r\n    nineSliceSpritePropertiesList: nineSliceSpritePropertiesListReducer,\r\n    // all graphics data\r\n    graphicsList: graphicsPropertiesListReducer,\r\n    //\r\n    textPropertiesList: textPropertiesListReducer,\r\n    // all the Files loaded by a user\r\n    resourcesList: resourcesListReducer\r\n}));\r\n\r\nexport default store;","\r\n//@TODO change all url: string to be data: string because it is confusing sometimes\r\n\r\n/**\r\n * Generic function to convert a File object\r\n * @param {File} file \r\n * @param {\"base64\" | \"text\"} type \r\n * @param {(data: {name: string, url: string})=> void} onLoad\r\n * @param {(error: unknown)=> void} [orError]\r\n */\r\nconst convertFileTo = (file, type, onLoad, orError = (err) => console.error(err)) => {\r\n    const reader = new FileReader();\r\n    reader.onerror = orError;\r\n    reader.onload = () => onLoad({ name: file.name, url: reader.result });\r\n    const method = type === \"base64\" ? \"readAsDataURL\" : \"readAsText\";\r\n    reader[method](file);\r\n}\r\n\r\n/**\r\n * @param {File[]} files \r\n * @param {(data: Array<{name: string, url: string}>)=> void} cb\r\n */\r\nexport const convertImageFilesToBase64 = (files, cb) => {\r\n\r\n    const convertFile = (file) => {\r\n        return new Promise((res, rej) => {\r\n            convertFileTo(file, \"base64\", res, rej)\r\n        });\r\n    };\r\n\r\n    Promise.all(files.map(convertFile))\r\n        .then(cb)\r\n        .catch(err => console.error(err));\r\n}\r\n\r\n/**\r\n * @param {File} file \r\n * @param {(data: {name: string, url: string})=> void} onLoad\r\n */\r\nexport const convertImageFileToBase64 = (file, onLoad) => {\r\n    convertFileTo(file, \"base64\", onLoad);\r\n}\r\n\r\n\r\n/**\r\n * @param {File[]} files \r\n * @param {(data: Array<{name: string, url: string}>)=> void} cb\r\n */\r\nexport const convertJSONFilesToText = (files, cb) => {\r\n    const convertFile = (file) => {\r\n        return new Promise((res, rej) => {\r\n            convertFileTo(file, \"text\", res, rej)\r\n        });\r\n    };\r\n\r\n    Promise.all(files.map(convertFile))\r\n        .then(cb)\r\n        .catch(err => console.error(err));\r\n}\r\n\r\n/**\r\n * @param {File} file\r\n * @param {(data: {name: string, url: string})=> void} cb\r\n */\r\nexport const convertJSONFileToText = (file, cb) => {\r\n    convertFileTo(file, \"text\", cb);\r\n}\r\n\r\n/**\r\n * @param {string} acceptFileTypes\r\n * @param {boolean} isMultiple\r\n * @param {(files: File[]) => void} onLoaded\r\n * @returns HTMLInputElement\r\n */\r\nconst createLoader = (acceptFileTypes, isMultiple, onLoaded) => {\r\n    const input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"file\");\r\n    input.setAttribute(\"accept\", acceptFileTypes);\r\n    input.setAttribute(\"multiple\", isMultiple);\r\n    input.onchange = (event) => {\r\n        const files = event.target.files ? Object.values(event.target.files) : [];\r\n        onLoaded(files)\r\n    }\r\n    return input;\r\n}\r\n\r\n/**\r\n * @param {string} acceptFileTypes\r\n * @param {(files: File[]) => void} onLoaded\r\n * @returns HTMLInputElement\r\n */\r\nexport const createImagesLoader = (onLoaded) => {\r\n    return createLoader(\"image/png, image/jpeg, image/jpg\", true, onLoaded);\r\n}\r\n\r\n/**\r\n * @param {string} acceptFileTypes\r\n * @param {(files: File[]) => void} onLoaded\r\n * @returns HTMLInputElement\r\n */\r\nexport const createJSONLoader = (onLoaded) => {\r\n    return createLoader(\"application/json\", true, onLoaded);\r\n};\r\n\r\n/**\r\n * \r\n * @param {{name: string, url: string}} param0 \r\n * @param {{(file: File) => void}} onComplete \r\n */\r\nexport const base64ImageToFile = ({ name, url }, onComplete) => {\r\n    const mimeType = url.match(/:(.*?);/)[1];\r\n    fetch(url)\r\n        .then((response) => response.arrayBuffer())\r\n        .then((buffer) => new File([buffer], name, { type: mimeType }))\r\n        .then(onComplete);\r\n};\r\n\r\n/**\r\n * I have tested and it works with strings and Files. I think that is enough for now\r\n * @param {File | string} content \r\n * @param {string} fileName \r\n * @param {string} contentType \r\n */\r\nconst exportFile = (content, fileName, contentType) => {\r\n    const a = document.createElement(\"a\");\r\n    const file = new Blob([content], { type: contentType });\r\n    a.href = URL.createObjectURL(file);\r\n    a.download = fileName;\r\n    a.click();\r\n}\r\n\r\n/**\r\n * The function will export the stringified object as text from the browser\r\n * @param {sting} stringifiedContent \r\n * @param {string} fileName \r\n */\r\nexport const exportJSONFile = (stringifiedContent, fileName) => {\r\n    exportFile(stringifiedContent, fileName, \"text/plain\");\r\n}\r\n\r\n/**\r\n * The function will export a File as an image from the browser\r\n * @param {Fill} content \r\n * @param {string} fileName \r\n */\r\nexport const exportImageFile = (content, fileName) => {\r\n    exportFile(content, fileName, \"image/png, image/jpeg, image/jpg\");\r\n};\r\n\r\n/**\r\n * The function will export a File as zip from the browser\r\n * @param {Fill} content \r\n * @param {string} fileName \r\n */\r\nexport const exportZipFile = (content, fileName) => {\r\n    exportFile(content, fileName, \"application/x-zip\");\r\n}\r\n","import { Texture, utils, BaseTexture } from \"pixi.js\";\r\nimport { convertImageFilesToBase64 } from \"../tools/resourcesTools\";\r\n\r\n/**\r\n * Because I use the pixi as the renderer in this editor I need to preload the resources to the pixi texture cache\r\n * That is why I use this middle ware to make it easier to remove the pixi from the project if I need\r\n * @param {Loader} pixiLoader \r\n * @param {{[key: string]: Texture}} textureCache \r\n * @returns {{\r\n * loadAssets: (assets: File[] | File, onFinish?: () => void) => void;\r\n * removeAssets: (assets: File[] | File) => void;\r\n * }}\r\n */\r\nconst pixiLoaderMiddleware = (textureCache, baseTextureCache) => {\r\n\r\n    return {\r\n        loadAssets(assets, onFinish = () => { }) {\r\n            if (!Array.isArray(assets)) {\r\n                assets = [assets]\r\n            }\r\n\r\n            convertImageFilesToBase64(assets, (convertedAssets) => {\r\n                convertedAssets.forEach(({ name, url }) => {\r\n                    const image = new Image();\r\n                    image.src = url;\r\n\r\n                    const baseTexture = new BaseTexture(image);\r\n                    const texture = new Texture(baseTexture);\r\n\r\n                    BaseTexture.addToCache(texture, name);\r\n                    Texture.addToCache(texture, name);\r\n                });\r\n                onFinish();\r\n            });\r\n        },\r\n\r\n        removeAssets(assets) {\r\n            if (!Array.isArray(assets)) {\r\n                assets = [assets]\r\n            }\r\n\r\n            assets.forEach((file) => {\r\n                textureCache[file.name].destroy(true);\r\n                baseTextureCache[file.name].destroy(true);\r\n                delete textureCache[file.name];\r\n                delete baseTextureCache[file.name];\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Middleware\r\n */\r\nexport const pixiLoader = pixiLoaderMiddleware(utils.TextureCache, utils.BaseTextureCache);","\r\nconst UIDStore = {};\r\n\r\nconst getRndInteger = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n/**\r\n * Each time a project imports other project we need to record used ids to avoid clashes \r\n * @param {number[]} ids \r\n */\r\nexport const recordUsedUIDs = (ids) => {\r\n    ids.forEach((id) => UIDStore[id] = true);\r\n}\r\n\r\nexport const cleanUpUsedUIDsMap = () => {\r\n    for (const key in UIDStore) {\r\n        delete UIDStore[key];\r\n    }\r\n}\r\n\r\nexport const getUID = function () {\r\n    let id = getRndInteger(10000, 99990);\r\n\r\n    while (UIDStore[id]) {\r\n        id = getRndInteger(10000, 99990);\r\n    }\r\n    UIDStore[id] = true;\r\n\r\n    return id;\r\n}","/**\r\n * @param {Array<[string, File]>} queue \r\n * @param {{[id: string]: {name: string; url: string;}}} memo \r\n * @param {(file: File, cb: (data: {name: string; url: string;}) => void) => void} strategy\r\n * @param {(data: {[id: string]: {name: string; url: string;}}) => void} onFinish \r\n * @returns \r\n */\r\nexport const convertResourcesRecursively = (queue, memo, strategy, onFinish) => {\r\n    if (queue.length === 0) {\r\n        onFinish(memo);\r\n        return;\r\n    }\r\n\r\n    const [id, file] = queue.shift();\r\n\r\n    strategy(file, (data) => {\r\n        memo[id] = data;\r\n        convertResourcesRecursively(queue, memo, strategy, onFinish);\r\n    });\r\n}","export const VERSION = \"0.0.1\";","import { after } from \"lodash\";\r\nimport { VERSION } from \"../../../VERSION\";\r\nimport { convertImageFileToBase64, exportImageFile, exportJSONFile, exportZipFile } from \"../../../tools/resourcesTools\";\r\nimport { convertResourcesRecursively } from \"./common\";\r\nimport JSZip from \"jszip\";\r\n\r\nexport const FILE_TYPES = {\r\n    MAIN: \"data-main\",\r\n    RESOURCES: \"data-resources-base64\"\r\n};\r\n\r\nconst FILE_DESCRIPTION = {\r\n    MAIN: \"This file is a bundle and contains the tree hierarchy, entity types each node represents, base and sprite properties\",\r\n    RESOURCES: \"This file contains the resources. The resources are in base64 format\",\r\n};\r\n\r\nconst FILE_NAMES = {\r\n    MAIN_SUFFIX: \".json\",\r\n    RESOURCES_SUFFIX: \"_assets.json\",\r\n    IMAGES_ARCHIVE_SUFFIX: \".zip\",\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store/properties/sprite\").ISpritePropertiesListState & import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState} data \r\n * @param {import(\"../../../store/resources\").IResourcesListState} resourcesList \r\n */\r\nconst collectUsedResources = (data, resourcesList) => {\r\n    return Object.values(data)\r\n        .reduce((acc, { resourceID }) => {\r\n            if (resourceID && resourcesList[resourceID]) { acc.push([resourceID, resourcesList[resourceID]]) }\r\n            return acc;\r\n        }, []);\r\n}\r\n/**\r\n * To save resources which are used and export them in the map in base 64 format\r\n * @param {import(\"../../../store\").Store} store \r\n * @param {string} fileName\r\n * @param {() => void} onFinish \r\n */\r\nconst exportResourcesAsBase64 = (store, fileName, onFinish) => {\r\n    const { resourcesList, spritePropertiesList, nineSliceSpritePropertiesList } = store.getState();\r\n\r\n    const resourcesToExport = collectUsedResources({ ...spritePropertiesList, ...nineSliceSpritePropertiesList }, resourcesList);\r\n\r\n    /**\r\n     * @param {{[id: string]: { name: string; url: string;}}} resources \r\n     */\r\n    const onResourcesConverted = (resources) => {\r\n        exportJSONFile(\r\n            JSON.stringify({\r\n                meta: {\r\n                    version: VERSION,\r\n                    type: FILE_TYPES.RESOURCES,\r\n                    description: FILE_DESCRIPTION.RESOURCES\r\n                },\r\n                resources\r\n            }, null, 2),\r\n            fileName + FILE_NAMES.RESOURCES_SUFFIX\r\n        );\r\n        onFinish();\r\n    };\r\n\r\n    convertResourcesRecursively(resourcesToExport, {}, convertImageFileToBase64, onResourcesConverted);\r\n};\r\n\r\n/**\r\n * To make a bundle with all the data and save it as json file\r\n * @param {import(\"../../../store\").Store } store \r\n * @param {string} fileName \r\n * @param {() => void} onFinish\r\n */\r\nconst exportMainData = (store, fileName, onFinish) => {\r\n    const {\r\n        tree,\r\n        entityTypesList,\r\n        basePropertiesList,\r\n        spritePropertiesList,\r\n        nineSliceSpritePropertiesList,\r\n        graphicsList,\r\n        textPropertiesList\r\n    } = store.getState();\r\n\r\n    exportJSONFile(\r\n        JSON.stringify({\r\n            meta: {\r\n                version: VERSION,\r\n                type: FILE_TYPES.MAIN,\r\n                description: FILE_DESCRIPTION.MAIN\r\n            },\r\n            treeData: tree.treeData,\r\n            entityTypesList,\r\n            basePropertiesList,\r\n            spritePropertiesList,\r\n            nineSliceSpritePropertiesList,\r\n            graphicsList,\r\n            textPropertiesList\r\n        }, null, 2),\r\n        fileName + FILE_NAMES.MAIN_SUFFIX\r\n    );\r\n\r\n    onFinish();\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store\").Store} store\r\n * @param {string} fileName  \r\n * @param {() => void} [onFinish]\r\n */\r\nexport const exportData = (store, fileName, onFinish = () => { }) => {\r\n    if (!fileName) {\r\n        onFinish();\r\n        return;\r\n    }\r\n    const callback = after(2, onFinish);\r\n    exportMainData(store, fileName, callback);\r\n    exportResourcesAsBase64(store, fileName, callback);\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").Store} store\r\n * @param {string} fileName  \r\n * @param {() => void} [onFinish]\r\n */\r\nexport const exportUsedImages = (store, fileName, onFinish = () => { }) => {\r\n    if (!fileName) {\r\n        onFinish();\r\n        return;\r\n    }\r\n    const { resourcesList, spritePropertiesList, nineSliceSpritePropertiesList } = store.getState();\r\n    const resourcesToExport = collectUsedResources({ ...spritePropertiesList, ...nineSliceSpritePropertiesList }, resourcesList);\r\n    const usedFiles = [];\r\n    const zip = new JSZip();\r\n    resourcesToExport\r\n        .filter(([id, _]) => usedFiles.includes(id) ? false : Boolean(usedFiles.push(id)))\r\n        .forEach(([_, file]) => {\r\n            zip.file(file.name, file);\r\n        });\r\n    zip.generateAsync({ type: \"blob\" }).then(function (content) {\r\n        exportZipFile(content, fileName + FILE_NAMES.IMAGES_ARCHIVE_SUFFIX)\r\n        onFinish();\r\n    });\r\n}\r\n","import { pixiLoader } from \"../../../middlewares/pixiLoaderMiddleware\";\r\nimport { base64ImageToFile, convertJSONFilesToText, createJSONLoader } from \"../../../tools/resourcesTools\";\r\nimport { collectAllIds } from \"../../../tools/treeTools\";\r\nimport { recordUsedUIDs } from \"../../../tools/uidGenerator\";\r\nimport { convertResourcesRecursively } from \"./common\";\r\nimport { FILE_TYPES } from \"./exportLogic\";\r\n\r\nexport const importMainDataInStrictOrder = (data, actions) => {\r\n    // @TODO fix the data structure to avoid issues like one described below\r\n    // I have to set the tree data to null first so the other components like PreviewPanel doesn't trow errors\r\n    // when creating the UI. It does it because it depends of the tree to recursively build the UI\r\n    // At the end I set the tree data\r\n\r\n    actions.importTreeDataAction(null);\r\n    actions.importEntityDataAction(data.entityTypesList);\r\n    actions.importBasePropertiesAction(data.basePropertiesList);\r\n    actions.importSpritePropertiesAction(data.spritePropertiesList);\r\n    actions.importNineSliceSpritePropertiesAction(data.nineSliceSpritePropertiesList);\r\n    actions.importGraphicsPropertiesAction(data.graphicsList);\r\n    actions.importTextPropertiesAction(data.textPropertiesList);\r\n    actions.importTreeDataAction(data.treeData);\r\n};\r\n\r\n/**\r\n * \r\n * @param {*} dataFiles \r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions \r\n */\r\nconst importMainFile = (convertedFiles, actions) => {\r\n    const mainDataFile = convertedFiles.find(({ meta }) => meta.type === FILE_TYPES.MAIN);\r\n\r\n    if (mainDataFile) {\r\n        recordUsedUIDs(collectAllIds(mainDataFile.treeData, []));\r\n        importMainDataInStrictOrder(mainDataFile, actions);\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n * @param {*} dataFiles \r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions\r\n * @param {()=> void} onFinish\r\n */\r\nconst importResources = (convertedFiles, actions, onFinish) => {\r\n    const resourcesDataFile = convertedFiles.find(({ meta }) => meta.type === FILE_TYPES.RESOURCES);\r\n\r\n    if (resourcesDataFile) {\r\n        /**\r\n         * \r\n         * @param {{[id: string]: { name: string; url: string;}}} convertedResources \r\n         */\r\n        const onResourcesConverted = (convertedResources) => {\r\n\r\n            recordUsedUIDs(Object.keys(convertedResources));\r\n\r\n            pixiLoader.loadAssets(Object.values(convertedResources), () => {\r\n                actions.importResourcesAction(convertedResources);\r\n                onFinish();\r\n            })\r\n        };\r\n\r\n        convertResourcesRecursively(Object.entries(resourcesDataFile.resources), {}, base64ImageToFile, onResourcesConverted);\r\n    }\r\n    else {\r\n        onFinish();\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n * @param {File[]} files \r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions \r\n */\r\nconst parseAndImportFiles = (files, actions) => {\r\n\r\n    /** */\r\n    const onFilesConverted = (convertedFiles) => {\r\n        convertedFiles = convertedFiles.map((file) => JSON.parse(file.url));\r\n        // first we must import all the resources and then data\r\n        importResources(convertedFiles, actions, () => importMainFile(convertedFiles, actions));\r\n    };\r\n\r\n    convertJSONFilesToText(files, onFilesConverted);\r\n};\r\n\r\n/**\r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions \r\n */\r\nexport const importData = (actions) => {\r\n    const jsonLoader = createJSONLoader((files) => {\r\n        parseAndImportFiles(files, actions);\r\n    });\r\n    jsonLoader.click();\r\n};","import React from \"react\";\r\nimport \"./modalPopup.css\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * isVisible: boolean;\r\n * onClose: ()=> void;\r\n * onConfirm: ()=> void;\r\n * onReject: ()=> void;\r\n * }} ModalPopupDependencies\r\n */\r\n\r\n/**\r\n* @param { ModalPopupDependencies } props \r\n*/\r\nexport const ModalPopup = (props) => {\r\n    return (\r\n        <div id=\"modal\" className={props.isVisible ? \"shown\" : \"\"}>\r\n            <div id=\"modal-content\">\r\n                <span className=\"closeCrossButton\" onClick={props.onClose}>&times;</span>\r\n                <div>\r\n                    <p className=\"modalMessage\">Do you want to save the current project?</p>\r\n                </div>\r\n                <div id=\"modal-buttons\">\r\n                    <button className=\"confirmButton\" onClick={props.onConfirm}>Yes</button>\r\n                    <button className=\"cancelButton\" onClick={props.onReject}>No</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","import { cleanUpUsedUIDsMap } from \"../../../tools/uidGenerator\";\r\nimport { exportData } from \"./exportLogic\";\r\nimport { cloneDeep } from \"lodash\"\r\nimport { importMainDataInStrictOrder } from \"./importLogic\";\r\nimport { defaultStoreData } from \"../../../data/DefaultStoreData\";\r\n\r\n/**\r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions \r\n */\r\nexport const createNewProject = (actions) => {\r\n\r\n    cleanUpUsedUIDsMap();\r\n\r\n    const data = cloneDeep(defaultStoreData);\r\n\r\n    importMainDataInStrictOrder({\r\n        treeData: data.tree.treeData,\r\n        entityTypesList: data.entitiesList,\r\n        basePropertiesList: data.properties.base,\r\n        spritePropertiesList: data.properties.sprite,\r\n        nineSliceSpritePropertiesList: data.properties.nineSliceSprite,\r\n        graphicsList: data.properties.graphics,\r\n        textPropertiesList: data.properties.text,\r\n    }, actions);\r\n    actions.importResourcesAction({});\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} store \r\n * @param {import(\"../Header\").HeaderComponentDependencies} actions \r\n */\r\nexport const exportDataAndCreateNew = (store, actions, fileName) => {\r\n    exportData(store, fileName, () => createNewProject(actions));\r\n};\r\n","import React, { useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./header.css\";\r\n\r\nimport store from \"../../store\";\r\nimport { importEntityDataAction } from \"../../store/entityTypes\";\r\nimport { importBasePropertiesAction } from \"../../store/properties/base\";\r\nimport { importSpritePropertiesAction } from \"../../store/properties/sprite\";\r\nimport { importNineSliceSpritePropertiesAction } from \"../../store/properties/nineSliceSprite\";\r\nimport { importGraphicsPropertiesAction } from \"../../store/properties/graphics\";\r\nimport { importTextPropertiesAction } from \"../../store/properties/text\";\r\nimport { importResourcesAction } from \"../../store/resources\";\r\nimport { importTreeDataAction } from \"../../store/tree\";\r\nimport { importData } from \"./features/importLogic\";\r\nimport { exportUsedImages, exportData } from \"./features/exportLogic\";\r\nimport { ModalPopup } from \"./ModalPopup\";\r\nimport { createNewProject, exportDataAndCreateNew } from \"./features/createNewProjectLogic\";\r\n\r\n/**\r\n * @typedef {{\r\n * importEntityDataAction: typeof importEntityDataAction; \r\n * importBasePropertiesAction: typeof importBasePropertiesAction; \r\n * importSpritePropertiesAction: typeof importSpritePropertiesAction; \r\n * importResourcesAction: typeof importResourcesAction; \r\n * importTreeDataAction: typeof importTreeDataAction;\r\n * importNineSliceSpritePropertiesAction: typeof importNineSliceSpritePropertiesAction;\r\n * importGraphicsPropertiesAction: typeof importGraphicsPropertiesAction;\r\n * importTextPropertiesAction: typeof importTextPropertiesAction;\r\n * }} HeaderComponentDependencies\r\n */\r\n\r\n/**\r\n* Each node must have base properties\r\n* @param { HeaderComponentDependencies} props \r\n*/\r\nexport const HeaderComponent = (props) => {\r\n    const [isModalVisible, setModalVisibility] = useState(false);\r\n\r\n    return (\r\n        <header>\r\n            <div id=\"processor-options\">\r\n                <span>File</span>\r\n                <div id=\"options\">\r\n                    <span onClick={() => setModalVisibility(true)}>New Project</span>\r\n                    <span onClick={() => importData(props)}>Import Scene Files</span>\r\n                    <span onClick={() => exportData(store, store.getState().tree.treeData.name)}>Export Scene Files</span>\r\n                    <span onClick={() => exportUsedImages(store, store.getState().tree.treeData.name)}>Export Used Images</span>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <span>Docs</span>\r\n                <span>About</span>\r\n                <span>Report Bug</span>\r\n            </div>\r\n            <ModalPopup\r\n                isVisible={isModalVisible}\r\n                onClose={() => setModalVisibility(false)}\r\n                onConfirm={() => {\r\n                    setModalVisibility(false);\r\n                    exportDataAndCreateNew(store, props, store.getState().tree.treeData.name);\r\n                }}\r\n                onReject={() => {\r\n                    setModalVisibility(false);\r\n                    createNewProject(props);\r\n                }}\r\n            />\r\n        </header>\r\n    );\r\n};\r\n\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {}\r\n};\r\n\r\nexport const Header = connect(\r\n    mapStateToProps,\r\n    {\r\n        importEntityDataAction,\r\n        importBasePropertiesAction,\r\n        importSpritePropertiesAction,\r\n        importResourcesAction,\r\n        importTreeDataAction,\r\n        importNineSliceSpritePropertiesAction,\r\n        importGraphicsPropertiesAction,\r\n        importTextPropertiesAction\r\n    }\r\n)(HeaderComponent)","import { RESOURCE_ACTIONS } from \"./actionTypes\"\r\n\r\n/**\r\n * @param {Array<{id: number, file: File}} payload\r\n */\r\nexport const addResourceAction = (payload) => {\r\n    return { type: RESOURCE_ACTIONS.ADD_RESOURCES, payload }\r\n};\r\n\r\n/**\r\n * @param {number} id \r\n */\r\nexport const removeResourceAction = (id) => {\r\n    return { type: RESOURCE_ACTIONS.REMOVE_RESOURCE, payload: { id } }\r\n};\r\n\r\n/**\r\n * @param {import(\"./reducer\").IResourcesListState} payload \r\n */\r\nexport const importResourcesAction = (payload) => {\r\n    return { type: RESOURCE_ACTIONS.IMPORT_RESOURCES, payload }\r\n};","export const toRadians = (degrees) => degrees * (Math.PI / 180);\r\nexport const toDegrees = (radians) => radians * (180 / Math.PI);","\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\nimport { Container } from \"pixi.js\";\r\nimport { toRadians } from \"../../../tools/math\";\r\n\r\nexport const behavior = {\r\n    customDisplayObject: () => new Container(),\r\n    customApplyProps: (instance, oldProps, newProps) => {\r\n        instance.visible = newProps.visible;\r\n        instance.alpha = newProps.alpha;\r\n        instance.position.set(newProps.positionX, newProps.positionY);\r\n        instance.scale.set(newProps.scaleX, newProps.scaleY);\r\n        instance.rotation = toRadians(newProps.rotation);\r\n        instance.name = String(newProps.id);\r\n    }\r\n};\r\nexport const CContainer = CustomPIXIComponent(behavior, \"CContainer\");","\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\nimport { Sprite, Rectangle } from \"pixi.js\";\r\nimport { toRadians } from \"../../../tools/math\";\r\n\r\nexport const behavior = {\r\n    customDisplayObject: () => new Sprite(),\r\n    customApplyProps: (instance, oldProps, newProps) => {\r\n\r\n        instance.texture = newProps.texture;\r\n\r\n        instance.visible = newProps.visible;\r\n        instance.alpha = newProps.alpha;\r\n        instance.position.set(newProps.positionX, newProps.positionY);\r\n        instance.scale.set(newProps.scaleX, newProps.scaleY);\r\n        instance.anchor.set(newProps.anchorX, newProps.anchorY);\r\n        instance.rotation = toRadians(newProps.rotation);\r\n        instance.name = String(newProps.id);\r\n\r\n        if (!instance.interactive) {\r\n            instance.interactive = true;\r\n            instance.on(\"mousedown\", () => {\r\n                newProps.onSelect(newProps.id);\r\n            }, this);\r\n        }\r\n    }\r\n};\r\nexport const CSprite = CustomPIXIComponent(behavior, \"CSprite\");","\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\nimport { Graphics } from \"pixi.js\";\r\nimport { toRadians } from \"../../../tools/math\";\r\nimport { GRAPHICS_TYPES } from \"../../../data/StoreData\";\r\n\r\nexport const behavior = {\r\n    customDisplayObject: () => new Graphics(),\r\n    customApplyProps: (instance, oldProps, newProps) => {\r\n\r\n        instance.clear();\r\n        instance.beginFill(newProps.color, newProps.alpha);\r\n\r\n        if (newProps.type === GRAPHICS_TYPES.CIRCLE) {\r\n            instance.drawCircle(newProps.x, newProps.y, newProps.radius);\r\n        }\r\n        else if (newProps.type === GRAPHICS_TYPES.RECTANGLE) {\r\n            instance.drawRect(newProps.x, newProps.y, newProps.width, newProps.height);\r\n        }\r\n        else if (newProps.type === GRAPHICS_TYPES.ROUNDED_RECTANGLE) {\r\n            instance.drawRoundedRect(newProps.x, newProps.y, newProps.width, newProps.height, newProps.cornerRadius);\r\n        }\r\n        else {\r\n            throw new Error(\"There is no graphics for this type: \" + newProps.type);\r\n        }\r\n        instance.endFill();\r\n\r\n        instance.visible = newProps.visible;\r\n        instance.alpha = newProps.alpha;\r\n        instance.position.set(newProps.positionX, newProps.positionY);\r\n        instance.scale.set(newProps.scaleX, newProps.scaleY);\r\n        instance.rotation = toRadians(newProps.rotation);\r\n        instance.name = String(newProps.id);\r\n\r\n        if (!instance.interactive) {\r\n            instance.interactive = true;\r\n            instance.on(\"mousedown\", () => {\r\n                newProps.onSelect(newProps.id);\r\n            }, this);\r\n        }\r\n    }\r\n};\r\nexport const CGraphics = CustomPIXIComponent(behavior, \"CGraphics\");","\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\nimport { mesh, Container } from \"pixi.js\";\r\nimport { toRadians } from \"../../../tools/math\";\r\n\r\nexport const behavior = {\r\n    // I set 0.4 because the texture will be EMPTY at the start and it has size of 1x1\r\n    customDisplayObject: (props) => {\r\n        const wrapper = new Container();\r\n        // I have to wrap it with a container because when I set the pivot of the NineSlicePlane\r\n        // to mimic anchor value, the origin of it will move as well (((\r\n        // that will cause the Gizmo component to work incorrectly\r\n        wrapper.nineSlicePlane = new mesh.NineSlicePlane(props.texture, 0.4, 0.4, 0.4, 0.4);\r\n        wrapper.addChild(wrapper.nineSlicePlane);\r\n\r\n        return wrapper;\r\n    },\r\n    customApplyProps: (instance, oldProps, newProps) => {\r\n\r\n        instance.nineSlicePlane.texture = newProps.texture;\r\n        instance.nineSlicePlane.width = newProps.width;\r\n        instance.nineSlicePlane.height = newProps.height;\r\n\r\n        instance.nineSlicePlane.leftWidth = newProps.A;\r\n        instance.nineSlicePlane.topHeight = newProps.C;\r\n        instance.nineSlicePlane.rightWidth = newProps.B;\r\n        instance.nineSlicePlane.bottomHeight = newProps.D;\r\n\r\n        instance.nineSlicePlane.pivot.set(newProps.anchorX * newProps.width, newProps.anchorY * newProps.height);\r\n\r\n        instance.visible = newProps.visible;\r\n        instance.alpha = newProps.alpha;\r\n        instance.position.set(newProps.positionX, newProps.positionY);\r\n        instance.scale.set(newProps.scaleX, newProps.scaleY);\r\n        instance.rotation = toRadians(newProps.rotation);\r\n        instance.name = String(newProps.id);\r\n\r\n        if (!instance.interactive) {\r\n            instance.interactive = true;\r\n            instance.on(\"mousedown\", () => {\r\n                newProps.onSelect(newProps.id);\r\n            }, this);\r\n        }\r\n    }\r\n};\r\nexport const CNineSlicePlane = CustomPIXIComponent(behavior, \"CNineSlicePlane\");","\r\nimport { CustomPIXIComponent } from \"react-pixi-fiber\";\r\nimport { Text } from \"pixi.js\";\r\nimport { toRadians } from \"../../../tools/math\";\r\n\r\nexport const behavior = {\r\n    customDisplayObject: () => new Text(\"\", {}),\r\n    customApplyProps: (instance, oldProps, newProps) => {\r\n\r\n        const { baseProps, textProps } = newProps;\r\n        const { text, anchorX, anchorY, ...style } = textProps;\r\n\r\n        if (style[\"dropShadowAngle\"] !== undefined) {\r\n            style[\"dropShadowAngle\"] = toRadians(style[\"dropShadowAngle\"]);\r\n        };\r\n\r\n        instance.text = text;\r\n        instance.style = style;\r\n\r\n        instance.visible = baseProps.visible;\r\n        instance.alpha = baseProps.alpha;\r\n        instance.position.set(baseProps.positionX, baseProps.positionY);\r\n        instance.scale.set(baseProps.scaleX, baseProps.scaleY);\r\n        instance.anchor.set(anchorX, anchorY);\r\n        instance.rotation = toRadians(baseProps.rotation);\r\n        instance.name = String(newProps.id);\r\n\r\n        if (!instance.interactive) {\r\n            instance.interactive = true;\r\n            instance.on(\"mousedown\", () => {\r\n                newProps.onSelect(newProps.id);\r\n            }, this);\r\n        }\r\n    }\r\n};\r\nexport const CText = CustomPIXIComponent(behavior, \"CText\");","import React from \"react\";\r\nimport { ENTITY_TYPES } from \"../../../data/StoreData\";\r\nimport { CContainer } from \"./CContainer\";\r\nimport { CSprite } from \"./CSprite\";\r\nimport { CGraphics } from \"./CGraphics\";\r\nimport { CNineSlicePlane } from \"./CNineSlicePlane\";\r\nimport { Texture } from \"pixi.js\";\r\nimport { CText } from \"./CText\";\r\n\r\n/**\r\n *\r\n * @param {import(\"../../../data/NodeData\").INodeData} nodeData\r\n * @param {import(\"../../../store/properties/base\").IBasePropertiesListState} basePropertiesList\r\n * @param {import(\"../../../store/properties/sprite\").ISpritePropertiesListState} spritePropertiesList\r\n * @param {import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState} nineSliceSpritePropertiesList\r\n * @param {import(\"../../../store/entityTypes\").IEntityTypesListState} entityTypesList\r\n * @param {import(\"../../../store/resources\").IResourcesListState} resourcesList\r\n * @param {import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState} graphicsList\r\n */\r\nexport const createPixiTree = (nodeData, dependencies, onSelect) => {\r\n    const {\r\n        basePropertiesList,\r\n        spritePropertiesList,\r\n        entityTypesList,\r\n        resourcesList,\r\n        graphicsList,\r\n        nineSliceSpritePropertiesList,\r\n        textPropertiesList\r\n    } = dependencies;\r\n\r\n    const entity = entityTypesList[nodeData.id];\r\n    const baseProps = basePropertiesList[nodeData.id];\r\n\r\n    if (entity.type === ENTITY_TYPES.CONTAINER) {\r\n        return (\r\n            <CContainer key={nodeData.id} id={nodeData.id} {...{ onSelect, ...baseProps }}>\r\n                {nodeData.nodes.map((node) => createPixiTree(node, dependencies, onSelect))}\r\n            </CContainer >\r\n        );\r\n    }\r\n    if (entity.type === ENTITY_TYPES.SPRITE) {\r\n        const spriteProps = spritePropertiesList[nodeData.id];\r\n        const resource = resourcesList[spriteProps.resourceID];\r\n        const texture = resource ? Texture.from(resource.name) : Texture.EMPTY;\r\n\r\n        return (\r\n            <CSprite key={nodeData.id} id={nodeData.id} {...{ texture, onSelect, ...baseProps, ...spriteProps }}>\r\n                {nodeData.nodes.map((node) => createPixiTree(node, dependencies, onSelect))}\r\n            </CSprite>\r\n        );\r\n    }\r\n    if (entity.type === ENTITY_TYPES.GRAPHICS) {\r\n        const graphicsProps = graphicsList[nodeData.id];\r\n        return (\r\n            <CGraphics key={nodeData.id} id={nodeData.id} {...{ onSelect, ...baseProps, ...graphicsProps }}>\r\n                {nodeData.nodes.map((node) => createPixiTree(node, dependencies, onSelect))}\r\n            </CGraphics>\r\n        );\r\n    }\r\n    if (entity.type === ENTITY_TYPES.NINE_SLICE_SPRITE) {\r\n        const nineSliceProps = nineSliceSpritePropertiesList[nodeData.id];\r\n        const resource = resourcesList[nineSliceProps.resourceID];\r\n        const texture = resource ? Texture.from(resource.name) : Texture.EMPTY;\r\n\r\n        return (\r\n            <CNineSlicePlane key={nodeData.id} id={nodeData.id} {...{ texture, onSelect, ...baseProps, ...nineSliceProps }}>\r\n                {nodeData.nodes.map((node) => createPixiTree(node, dependencies, onSelect))}\r\n            </CNineSlicePlane>\r\n        );\r\n    }\r\n    if (entity.type === ENTITY_TYPES.TEXT) {\r\n        const textProps = textPropertiesList[nodeData.id];\r\n\r\n        return (\r\n            <CText key={nodeData.id} id={nodeData.id} {...{ onSelect, baseProps, textProps }}>\r\n                {nodeData.nodes.map((node) => createPixiTree(node, dependencies, onSelect))}\r\n            </CText>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setSelectedNodeIDAction } from \"../../store/tree\";\r\nimport { createPixiTree } from \"./custom/createPixiTree\";\r\n\r\n/**\r\n * @typedef {{\r\n * treeData: import(\"../../store/tree\").ITreeState[\"treeData\"];\r\n * basePropertiesList: import(\"../../store/properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"../../store/properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * graphicsList: import(\"../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"../../store/properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"../../store/entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"../../store/resources\").IResourcesListState;\r\n * }} MainSceneComponentDependencies\r\n */\r\n\r\n/**\r\n * @param { MainSceneComponentDependencies} props \r\n */\r\nconst MainSceneComponent = ({ treeData, setSelectedNodeIDAction, ...dependencies }) => {\r\n    const onSelect = (id) => setSelectedNodeIDAction(id);\r\n    return (\r\n        <>\r\n            {treeData ? createPixiTree(treeData, dependencies, onSelect) : null}\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        treeData: store.tree.treeData,\r\n        basePropertiesList: store.basePropertiesList,\r\n        spritePropertiesList: store.spritePropertiesList,\r\n        nineSliceSpritePropertiesList: store.nineSliceSpritePropertiesList,\r\n        entityTypesList: store.entityTypesList,\r\n        resourcesList: store.resourcesList,\r\n        graphicsList: store.graphicsList,\r\n        textPropertiesList: store.textPropertiesList\r\n    };\r\n};\r\n\r\nexport const MainScene = connect(\r\n    mapStateToProps,\r\n    { setSelectedNodeIDAction }\r\n)(MainSceneComponent)","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ROOT_NODE_ID } from \"../../data/StoreData\";\r\nimport { setSelectedNodeIDAction } from \"../../store/tree\";\r\nimport { MainScene } from \"./MainScene\";\r\nimport { CContainer } from \"./custom/CContainer\";\r\nimport { CGrid } from \"./custom/CGrid\";\r\n\r\nexport const PreviewPanelComponent = ({ basePropertiesList, setSelectedNodeIDAction, services }) => {\r\n\r\n    const [cameraData, setCameraData] = useState({\r\n        positionX: 0,\r\n        positionY: 0,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n    });\r\n\r\n    useEffect(() => {\r\n        const handleResizeUpdate = (size) => {\r\n            // I could have used useState and pass x,y to the <Stage/> but that makes an extra rendering call I don't need\r\n            services.app.stage.position.set(size.width / 2, size.height / 2)\r\n        };\r\n        services.resize.on(\"update\", handleResizeUpdate);\r\n        services.resize.activate();\r\n\r\n        return () => {\r\n            services.resize.off(\"update\", handleResizeUpdate);\r\n            services.resize.deactivate();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const handleCameraUpdate = ({ scale, position }) => {\r\n            setCameraData({\r\n                positionX: position.x,\r\n                positionY: position.y,\r\n                scaleX: scale.x,\r\n                scaleY: scale.y,\r\n            });\r\n        };\r\n\r\n        services.camera.on(\"update\", handleCameraUpdate);\r\n        services.camera.activate();\r\n\r\n        return () => {\r\n            services.camera.off(\"update\", handleCameraUpdate);\r\n            services.camera.deactivate();\r\n        }\r\n    }, []);\r\n\r\n    const onSelect = (id) => setSelectedNodeIDAction(id);\r\n\r\n    return (\r\n        <CContainer {...{ id: \"CameraContainer\", rotation: 0, visible: true, alpha: 1, ...cameraData }}>\r\n            <CGrid id=\"CGrid\"\r\n                cellSize={basePropertiesList[ROOT_NODE_ID].cellSize}\r\n                gridSize={basePropertiesList[ROOT_NODE_ID].gridSize}\r\n                color={0xc2c2c2}\r\n                lineWidth={2}\r\n                onSelect={onSelect} />\r\n            <MainScene />\r\n        </CContainer>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        basePropertiesList: store.basePropertiesList,\r\n    };\r\n};\r\n\r\nexport const PreviewPanel = connect(\r\n    mapStateToProps,\r\n    { setSelectedNodeIDAction }\r\n)(PreviewPanelComponent)","import React, { forwardRef, useImperativeHandle, useRef } from \"react\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataID: string;\r\n *  value: string;\r\n *  className?: string;\r\n *  middleware?: (event: InputEvent) => InputEvent;\r\n *  onBlur?: (event: InputEvent) => InputEvent;\r\n *  onChange: (dataID: string, value: number | string) => void;\r\n * }} TextInputDependencies\r\n */\r\n\r\n/**\r\n * @param {TextInputDependencies} props\r\n */\r\nexport const TextInput = forwardRef(({\r\n    label,\r\n    value,\r\n    onChange,\r\n    dataID,\r\n    className = \"\",\r\n    onBlur = (e) => e,\r\n    middleware = (e) => e\r\n}, ref) => {\r\n    const inputRef = useRef();\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        focus() {\r\n            inputRef.current.focus();\r\n            inputRef.current.select();\r\n        },\r\n    }));\r\n\r\n    const onInputChange = (event) => {\r\n        event = middleware(event);\r\n        onChange(dataID, event.target.value);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flexRow\">\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            <input\r\n                ref={inputRef}\r\n                className={`widthTwoThird ${className}`}\r\n                type=\"text\"\r\n                data-id={dataID}\r\n                value={value}\r\n                onBlur={onBlur}\r\n                onChange={onInputChange}\r\n            />\r\n        </div>\r\n    );\r\n});","import React, { useEffect, useRef } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateNodeNameAction } from \"../../../store/tree\";\r\nimport { getNodeByID } from \"../../../tools/treeTools\";\r\n\r\nimport { TextInput } from \"../genericInputs/TextInput\";\r\nimport \"./nameProperty.css\";\r\n\r\nconst INVALID_NAME = \"No name\";\r\n\r\n/**\r\n * @typedef {import(\"../../../store/tree\").ITreeState & {\r\n * updateNodeNameAction: typeof updateNodeNameAction\r\n * }} NamePropertyComponentDependencies\r\n */\r\n\r\n/**\r\n * @param {NamePropertyComponentDependencies} props \r\n */\r\nconst NamePropertyComponent = (props) => {\r\n    const node = getNodeByID(props.selectedNodeID, props.treeData);\r\n    const isInvalid = (node.name.length === 0) || (node.name === INVALID_NAME);\r\n    const nameInputRef = useRef();\r\n\r\n    // update the name value of the selected node\r\n    const onChange = (key, value) => {\r\n        props.updateNodeNameAction({ nodeID: props.selectedNodeID, name: value });\r\n    };\r\n\r\n    // to verify the name value at the end. I must not be empty\r\n    const onBlur = (event) => {\r\n        let value = event.target.value.trim();\r\n        value = value.length === 0 ? INVALID_NAME : value;\r\n\r\n        props.updateNodeNameAction({ nodeID: props.selectedNodeID, name: value });\r\n    };\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => nameInputRef.current.focus());\r\n    }, [props.selectedNodeID]);\r\n\r\n    const type = props.entityTypesList[props.selectedNodeID].type;\r\n    const typeCapitalize = type[0] + type.slice(1).toLowerCase();\r\n\r\n    return (\r\n        <div className=\"properties\">\r\n            <div className=\"flexRow\">\r\n                <span className=\"textCenter colorGray widthFull\">{typeCapitalize}</span>\r\n            </div>\r\n            <TextInput ref={nameInputRef} {\r\n                ...{\r\n                    label: \"Name\",\r\n                    dataID: \"name\",\r\n                    value: node.name,\r\n                    className: isInvalid ? \"invalidName\" : \"\",\r\n                    inputRef: nameInputRef,\r\n                    onChange,\r\n                    onBlur\r\n                }\r\n            } />\r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree, entityTypesList }) => {\r\n    return {\r\n        treeData: tree.treeData,\r\n        entityTypesList: entityTypesList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const NameProperty = connect(\r\n    mapStateToProps,\r\n    { updateNodeNameAction }\r\n)(NamePropertyComponent)","import React, { useState } from \"react\";\r\nimport { parseNumberMiddleware } from \".\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataID: string;\r\n *  step?: number;\r\n *  sign? : sting; // is used for UI to\r\n *  value: number;\r\n *  middleware?: (event: InputEvent) => InputEvent;\r\n *  onChange: (dataID: string, value: number | string) => void;\r\n * }} NumberInputDependencies\r\n */\r\n\r\n/**\r\n * @param {NumberInputDependencies} props\r\n */\r\nexport const NumberInput = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    dataID,\r\n    step = 1,\r\n    max = Number.MAX_SAFE_INTEGER,\r\n    min = Number.MIN_SAFE_INTEGER,\r\n    sign = \"\",\r\n    middleware = (event) => event\r\n}) => {\r\n\r\n    const [isShiftPressed, setShiftPressed] = useState(false);\r\n\r\n    const onInputChange = (event) => {\r\n        event = middleware(event);\r\n        const [key, value] = parseNumberMiddleware(event);\r\n        onChange(key, value);\r\n    };\r\n\r\n    const onKeyPressedReleased = (event) => {\r\n        setShiftPressed(event.shiftKey);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flexRow\"\r\n            onKeyDown={onKeyPressedReleased}\r\n            onKeyUp={onKeyPressedReleased}>\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            <div data-sign={sign} className=\"widthOneThird positionRelative inputAfterElement\">\r\n                <input\r\n                    className=\"widthFull\"\r\n                    type=\"number\"\r\n                    data-id={dataID}\r\n                    step={isShiftPressed ? step * 10 : step}\r\n                    max={max}\r\n                    min={min}\r\n                    value={value}\r\n                    onChange={onInputChange}\r\n                />\r\n            </div>\r\n\r\n            {/* placeholder to make it aligned with the other elements */}\r\n            <span className=\"widthOneThird\"></span>\r\n        </div>\r\n    );\r\n}","import React, { useState } from \"react\";\r\nimport { parseNumberMiddleware } from \".\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataIDs: [string, string];\r\n *  values: [number, number];\r\n *  step?: number;\r\n *  signs? : string[]; // are  used for UI\r\n *  middleware?: (event: InputEvent) => InputEvent;\r\n *  onChange: (dataID: string, value: number | string) => void;\r\n * }} PointInputDependencies\r\n */\r\n\r\n/**\r\n * @param {PointInputDependencies} props\r\n */\r\nexport const PointInput = ({\r\n    label,\r\n    values,\r\n    onChange,\r\n    dataIDs,\r\n    step = 1,\r\n    max = Number.MAX_SAFE_INTEGER,\r\n    min = Number.MIN_SAFE_INTEGER,\r\n    signs = [\"\", \"\"],\r\n    middleware = (event) => event\r\n}) => {\r\n\r\n    const [isShiftPressed, setShiftPressed] = useState(false);\r\n\r\n    const onInputChange = (event) => {\r\n        event = middleware(event);\r\n        const [key, value] = parseNumberMiddleware(event);\r\n        onChange(key, value)\r\n    };\r\n\r\n    const onKeyPressedReleased = (event) => {\r\n        setShiftPressed(event.shiftKey);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flexRow\"\r\n            onKeyDown={onKeyPressedReleased}\r\n            onKeyUp={onKeyPressedReleased}>\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            {[0, 1].map((i) => {\r\n                return (<div key={i} data-sign={signs[i]} className=\"widthOneThird positionRelative inputAfterElement\">\r\n                    <input\r\n                        className=\"widthFull\"\r\n                        type=\"number\"\r\n                        data-id={dataIDs[i]}\r\n                        step={isShiftPressed ? step * 10 : step}\r\n                        max={max}\r\n                        min={min}\r\n                        value={values[i]}\r\n                        onChange={onInputChange}\r\n                    />\r\n                </div>)\r\n            })}\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  selected: string;\r\n *  options: string[];\r\n *  onChange: (dataID: string, value: string) => void;\r\n *  dataID: string;\r\n * }} SelectorInputDependencies\r\n */\r\n\r\n/**\r\n * @param {SelectorInputDependencies} props\r\n */\r\nexport const SelectorInput = ({ label, selected, options, onChange, dataID }) => {\r\n\r\n    const onInputChange = (event) => onChange(dataID, event.target.value);\r\n\r\n    return (\r\n        <div className=\"flexRow\">\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            <select data-id={dataID} value={selected} onChange={onInputChange} className=\"widthTwoThird\">\r\n                {options.map((option) => {\r\n                    return <option key={option} value={option}>{option}</option>\r\n                })}\r\n            </select>\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataID: string;\r\n *  value: string;\r\n *  onChange: (dataID: string, colorCode: string) => void;\r\n * }} ColorInputDependencies\r\n */\r\n\r\n/**\r\n * @param {ColorInputDependencies} props\r\n */\r\nexport const ColorInput = ({ label, value, onChange, dataID }) => {\r\n\r\n    const onColorChange = (event) => onChange(dataID, event.target.value);\r\n\r\n    return (\r\n        <div className=\"flexRow\">\r\n            <span className=\"colorGray textLeft widthOneThird\">{label}</span>\r\n            <input className=\"widthTwoThird\" type=\"color\" data-id={dataID} value={value} onChange={onColorChange} />\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  value: string;\r\n *  dataID: string;\r\n *  onChange: (dataID: strung, resourceID: number) => void;\r\n * }} TextureInputDependencies\r\n */\r\n\r\n/**\r\n * Is used for a single texture only\r\n * @param {TextureInputDependencies} props\r\n */\r\nexport const TextureInput = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    dataID,\r\n}) => {\r\n\r\n    /* for some reason preventDefault() has to be used otherwise onDrop event will not work */\r\n    const onDragOver = (event) => event.preventDefault();\r\n    const onDragEnter = ({ target }) => target.classList.add(\"dragOver\");\r\n    const onDragLeave = ({ target }) => target.classList.remove(\"dragOver\");\r\n\r\n    const onDrop = (event) => {\r\n        onDragLeave(event);\r\n\r\n        // @TODO find another way of doing it. I tried to add it to the dataTransfer.items, but it didn't work\r\n        if (!window[\"__RESOURCE_ID\"]) { return; }\r\n        const resourceID = window[\"__RESOURCE_ID\"];\r\n        delete window[\"__RESOURCE_ID\"];\r\n\r\n        onChange(dataID, resourceID);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flexRow\">\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            <textarea\r\n                className=\"textureInput\"\r\n                disabled\r\n                value={value}\r\n                data-id={dataID}\r\n                onDragOver={onDragOver}\r\n                onDragEnter={onDragEnter}\r\n                onDragLeave={onDragLeave}\r\n                onDrop={onDrop}\r\n            ></textarea>\r\n        </div>\r\n    );\r\n}","export * from \"./NumberInput\";\r\nexport * from \"./PointInput\";\r\nexport * from \"./SelectorInput\";\r\nexport * from \"./TextInput\";\r\nexport * from \"./ColorInput\";\r\nexport * from \"./TextureInput\";\r\n\r\n\r\n/**\r\n * \r\n * @param {InputEvent} event \r\n * @returns  {[string, number | string]}\r\n */\r\nexport const parseNumberMiddleware = (event) => {\r\n    const key = event.target.getAttribute(\"data-id\");\r\n    const parsedValue = parseFloat(event.target.value);\r\n    const value = !Number.isNaN(parsedValue) ? parsedValue : \"\";\r\n    return [key, value];\r\n};\r\n\r\n/**\r\n * Prevents negative numbers\r\n * @param {InputEvent} event \r\n */\r\nexport const negativeNumbersMiddleware = (event) => {\r\n    const key = event.target.getAttribute(\"data-id\");\r\n    if (parseFloat(event.target.value) < 0) {\r\n        event.target.value = Math.abs(event.target.value)\r\n    };\r\n    return event;\r\n}","import React from \"react\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataID: string;\r\n *  value: string;\r\n *  onChange: (dataID: string, value: number | string) => void;\r\n * }} ToggleInputDependencies\r\n */\r\n\r\n/**\r\n * @param {ToggleInputDependencies} props\r\n */\r\nexport const ToggleInput = ({ label, value, onChange, dataID }) => {\r\n\r\n    const onInputChange = (event) => {\r\n        onChange(dataID, event.target.checked);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flexRow justifyContentStart\">\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            <input\r\n                type=\"checkbox\"\r\n                data-id={dataID}\r\n                value={value}\r\n                checked={value}\r\n                onChange={onInputChange}\r\n            />\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateBasePropertiesAction } from \"../../../store/properties/base\";\r\n\r\nimport { ROOT_NODE_ID } from \"../../../data/StoreData\";\r\nimport { NumberInput, PointInput } from \"../genericInputs\";\r\nimport { ToggleInput } from \"../genericInputs/ToggleInput\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * selectedNodeID: number | null;\r\n * basePropertiesList: import(\"../../../store/properties/base\").IBasePropertiesListState;\r\n * updateBasePropertiesAction: typeof updateBasePropertiesAction;\r\n * }} BasePropertiesComponentDependencies\r\n */\r\n\r\n/**\r\n * Each node must have base properties\r\n * @param { BasePropertiesComponentDependencies} props \r\n */\r\nconst BasePropertiesComponent = ({ selectedNodeID, basePropertiesList, updateBasePropertiesAction }) => {\r\n\r\n    const nodeID = selectedNodeID;\r\n    const baseProperty = basePropertiesList[nodeID];\r\n\r\n    const onChange = (key, value) => {\r\n        updateBasePropertiesAction({\r\n            nodeID,\r\n            properties: { ...baseProperty, [key]: value }\r\n        });\r\n    };\r\n\r\n    const onVisibilityToggled = (key, visible) => {\r\n        onChange(\"visible\", visible);\r\n    };\r\n\r\n    const alphaData = {\r\n        label: \"Alpha\",\r\n        dataID: \"alpha\",\r\n        value: baseProperty.alpha,\r\n        step: 0.1,\r\n        max: 1,\r\n        min: 0,\r\n        onChange\r\n    };\r\n\r\n    const positionData = {\r\n        label: \"Position\",\r\n        dataIDs: [\"positionX\", \"positionY\"],\r\n        values: [baseProperty.positionX, baseProperty.positionY],\r\n        signs: [\"X\", \"Y\"],\r\n        onChange\r\n    };\r\n\r\n    const scaleData = {\r\n        label: \"Scale\",\r\n        dataIDs: [\"scaleX\", \"scaleY\"],\r\n        values: [baseProperty.scaleX, baseProperty.scaleY],\r\n        signs: [\"X\", \"Y\"],\r\n        step: 0.1,\r\n        onChange\r\n    };\r\n\r\n    const gridData = {\r\n        label: \"Grid Size\",\r\n        dataIDs: [\"cellSize\", \"gridSize\"],\r\n        values: [baseProperty.cellSize, baseProperty.gridSize],\r\n        signs: [\"Cell\", \"Grid\"],\r\n        min: 0,\r\n        onChange\r\n    };\r\n\r\n    const angleData = {\r\n        label: \"Rotation\",\r\n        dataID: \"rotation\",\r\n        value: baseProperty.rotation,\r\n        sign: \"DEG\",\r\n        onChange\r\n    };\r\n\r\n    return (\r\n        <div className=\"properties propertiesTopOffset\">\r\n            <ToggleInput {...{ label: \"Visible\", dataID: \"\", value: baseProperty.visible, onChange: onVisibilityToggled }} />\r\n            {nodeID === ROOT_NODE_ID && <PointInput {...gridData} />}\r\n            <NumberInput {...alphaData} />\r\n            <PointInput {...positionData} />\r\n            <PointInput {...scaleData} />\r\n            <NumberInput {...angleData} />\r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree, basePropertiesList }) => {\r\n    return {\r\n        basePropertiesList: basePropertiesList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const BaseProperties = connect(\r\n    mapStateToProps,\r\n    { updateBasePropertiesAction }\r\n)(BasePropertiesComponent)","import React from \"react\";\r\nimport { NameProperty } from \"./name\";\r\nimport { BaseProperties } from \"./base\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nexport const isContainerEntity = (id, store) => {\r\n    const entity = store.entityTypesList[id];\r\n    return entity && entity.type === ENTITY_TYPES.CONTAINER;\r\n};\r\n\r\nexport const ContainerEntity = () => {\r\n    return (\r\n        <div>\r\n            <NameProperty />\r\n            <BaseProperties />\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport { parseNumberMiddleware } from \".\";\r\n\r\n/**\r\n * @typedef {{\r\n *  label: string;\r\n *  dataIDs: [string, string];\r\n *  values: [number, number];\r\n * }} SizeDependencies\r\n */\r\n\r\n/**\r\n * @param {SizeDependencies} props\r\n */\r\nexport const Size = ({\r\n    label,\r\n    values,\r\n    dataIDs,\r\n}) => {\r\n    return (\r\n        <div className=\"flexRow\">\r\n            <span className=\"textLeft colorGray widthOneThird\">{label}</span>\r\n            {[0, 1].map((i) => {\r\n                return (<div key={i} className=\"widthOneThird positionRelative inputAfterElement\">\r\n                    <input\r\n                        className=\"widthFull\"\r\n                        type=\"number\"\r\n                        data-id={dataIDs[i]}\r\n                        value={values[i]}\r\n                        disabled={true}\r\n                    />\r\n                </div>)\r\n            })}\r\n        </div>\r\n    );\r\n}","import React, { useEffect } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateSpritePropertiesAction } from \"../../../store/properties/sprite\";\r\n\r\nimport { PointInput } from \"../genericInputs/PointInput\";\r\nimport { TextureInput } from \"../genericInputs\";\r\nimport { Texture } from \"pixi.js\";\r\nimport { Size } from \"../genericInputs/Size\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * selectedNodeID: number | null;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState\r\n * spritePropertiesList: import(\"../../../store/properties/sprite\").ISpritePropertiesListState;\r\n * updateSpritePropertiesAction: typeof updateSpritePropertiesAction;\r\n * }} SpritePropertiesComponentDependencies\r\n */\r\n\r\n/**\r\n * Each node must have base properties\r\n * @param { SpritePropertiesComponentDependencies} props \r\n * @returns\r\n */\r\nconst SpritePropertiesComponent = ({\r\n    selectedNodeID,\r\n    resourcesList,\r\n    spritePropertiesList,\r\n    updateSpritePropertiesAction\r\n}) => {\r\n\r\n    const id = selectedNodeID;\r\n\r\n    const { anchorX, anchorY, resourceID } = spritePropertiesList[id];\r\n\r\n    const resource = resourcesList[resourceID];\r\n    const resourceName = resource ? resource.name : \"\";\r\n\r\n    useEffect(() => {\r\n        // Edge case when a resource get's removed from resources but the id is still in the sprite property\r\n        if (resourceID && !resource) updateSpritePropertiesAction({ nodeID: id, resourceID: null, resourceName: null });\r\n    }, [resource]);\r\n\r\n    const onInputChange = (key, value) => {\r\n        updateSpritePropertiesAction({\r\n            nodeID: id,\r\n            properties: { ...spritePropertiesList[id], [key]: value }\r\n        });\r\n    };\r\n\r\n    const onTextureAdded = (key, value) => {\r\n        updateSpritePropertiesAction({ nodeID: id, properties: { resourceID: value, resourceName: resourcesList[value].name } });\r\n    };\r\n\r\n    const textureData = {\r\n        label: \"Texture\",\r\n        dataID: \"texture\",\r\n        value: resourceName,\r\n        onChange: onTextureAdded,\r\n    };\r\n\r\n    const texture = resource ? Texture.from(resource.name) : Texture.EMPTY;\r\n    const textureSize = {\r\n        label: \"Texture Size\",\r\n        dataIDs: [\"width\", \"height\"],\r\n        values: [texture.width, texture.height],\r\n    };\r\n\r\n    const anchorData = {\r\n        label: \"Anchor\",\r\n        dataIDs: [\"anchorX\", \"anchorY\"],\r\n        values: [anchorX, anchorY],\r\n        signs: [\"X\", \"Y\"],\r\n        step: 0.5,\r\n        onChange: onInputChange\r\n    };\r\n\r\n    return (\r\n        <div className=\"properties propertiesTopOffset\">\r\n            <TextureInput {...textureData} />\r\n            <Size {...textureSize} />\r\n            <PointInput {...anchorData} />\r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree, spritePropertiesList, resourcesList }) => {\r\n    return {\r\n        spritePropertiesList: spritePropertiesList,\r\n        selectedNodeID: tree.selectedNodeID,\r\n        resourcesList: resourcesList\r\n    }\r\n};\r\n\r\nexport const SpriteProperties = connect(\r\n    mapStateToProps,\r\n    { updateSpritePropertiesAction }\r\n)(SpritePropertiesComponent)","import React from \"react\";\r\nimport { NameProperty } from \"./name\";\r\nimport { BaseProperties } from \"./base\";\r\nimport { SpriteProperties } from \"./sprite/SpriteProperties\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nexport const isSpriteEntity = (id, store) => {\r\n    const entity = store.entityTypesList[id];\r\n    return entity && entity.type === ENTITY_TYPES.SPRITE;\r\n};\r\n\r\nexport const SpriteEntity = () => {\r\n    return (\r\n        <div>\r\n            <NameProperty />\r\n            <BaseProperties />\r\n            <SpriteProperties />\r\n        </div>\r\n    )\r\n}","\r\nimport React from \"react\";\r\n\r\nimport { GRAPHICS_TYPES } from \"../../../data/StoreData\";\r\nimport { changeGraphicsTypeAction } from \"../../../store/properties/graphics\";\r\nimport { connect } from \"react-redux\";\r\nimport { SelectorInput } from \"../genericInputs/SelectorInput\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * changeGraphicsTypeAction: typeof changeGraphicsTypeAction;\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * selectedNodeID: number;\r\n * }} GraphicsTypeSelectorComponentDependencies\r\n */\r\n\r\n/**\r\n * @param {GraphicsTypeSelectorComponentDependencies} props \r\n */\r\nexport const GraphicsTypeSelectorComponent = ({ selectedNodeID, graphicsList, changeGraphicsTypeAction }) => {\r\n\r\n    const graphics = graphicsList[selectedNodeID];\r\n\r\n    const onChange = (key, value) => {\r\n        if (graphics.type === value) {\r\n            return; // no need to change tot he same type\r\n        }\r\n        changeGraphicsTypeAction(selectedNodeID, value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"properties propertiesTopOffset\">\r\n            <SelectorInput {...{ label: \"Type\", dataID: \"graphicsType\", selected: graphics.type, options: Object.values(GRAPHICS_TYPES), onChange }} />\r\n        </div>\r\n    )\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ graphicsList, tree }) => {\r\n    return {\r\n        graphicsList: graphicsList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\n\r\nexport const GraphicsTypeSelector = connect(\r\n    mapStateToProps,\r\n    { changeGraphicsTypeAction }\r\n)(GraphicsTypeSelectorComponent);","/**\r\n * Converts \"0x\" color to \"#\" and visa versa\r\n * @param {string} color \r\n * @returns string\r\n */\r\nexport const convertColorFormat = (color) => {\r\n    if (color.startsWith(\"0x\")) {\r\n        // convert to #00000 format\r\n        return \"#\" + color.substring(2);\r\n    }\r\n    if (color.startsWith(\"#\")) {\r\n        // convert to 0x00000 format\r\n        return \"0x\" + color.substring(1);\r\n    }\r\n    return null;\r\n}","\r\nimport React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateGraphicsPropertiesAction } from \"../../../../store/properties/graphics\";\r\nimport { ColorInput, NumberInput, PointInput, negativeNumbersMiddleware } from \"../../genericInputs\";\r\nimport { convertColorFormat } from \"../../../../tools/color\";\r\n\r\n/**\r\n * @typedef {{\r\n* updateGraphicsPropertiesAction: typeof updateGraphicsPropertiesAction;\r\n* graphicsList: import(\"../../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n* selectedNodeID: number;\r\n* }} CirclePropertiesComponentDependencies\r\n*/\r\n\r\n/**\r\n * @param {CirclePropertiesComponentDependencies} props \r\n */\r\nexport const CirclePropertiesComponent = ({ selectedNodeID, graphicsList, updateGraphicsPropertiesAction }) => {\r\n\r\n    const graphics = graphicsList[selectedNodeID];\r\n\r\n    const onChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: value }\r\n        });\r\n    };\r\n\r\n    const onColorChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: convertColorFormat(value) }\r\n        });\r\n    };\r\n\r\n    // I use origin here because position is already used in Base properties component\r\n    const positionData = {\r\n        label: \"Origin\",\r\n        dataIDs: [\"x\", \"y\"],\r\n        values: [graphics.x, graphics.y],\r\n        signs: [\"X\", \"Y\"],\r\n        onChange\r\n    };\r\n    const radiusData = {\r\n        label: \"Radius\",\r\n        dataID: \"radius\",\r\n        value: graphics.radius,\r\n        sign: \"R\",\r\n        middleware: negativeNumbersMiddleware,\r\n        onChange\r\n    };\r\n    const colorData = {\r\n        label: \"Color\",\r\n        dataID: \"color\",\r\n        value: convertColorFormat(graphics.color),\r\n        onChange: onColorChange\r\n    };\r\n    const alphaData = {\r\n        label: \"Alpha\",\r\n        dataID: \"alpha\",\r\n        value: graphics.alpha,\r\n        step: 0.1,\r\n        max: 1,\r\n        min: 0,\r\n        middleware: negativeNumbersMiddleware,\r\n        onChange\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <PointInput {...positionData} />\r\n            <NumberInput {...radiusData} />\r\n            <ColorInput {...colorData} />\r\n            <NumberInput {...alphaData} />\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ graphicsList, tree }) => {\r\n    return {\r\n        graphicsList: graphicsList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const CircleProperties = connect(\r\n    mapStateToProps,\r\n    { updateGraphicsPropertiesAction }\r\n)(CirclePropertiesComponent);","\r\nimport React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateGraphicsPropertiesAction } from \"../../../../store/properties/graphics\";\r\nimport { ColorInput, NumberInput, PointInput } from \"../../genericInputs\";\r\nimport { convertColorFormat } from \"../../../../tools/color\";\r\n\r\n/**\r\n * @typedef {{\r\n* updateGraphicsPropertiesAction: typeof updateGraphicsPropertiesAction;\r\n* graphicsList: import(\"../../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n* selectedNodeID: number;\r\n* }} RectanglePropertiesComponentDependencies\r\n*/\r\n\r\n/**\r\n * @param {RectanglePropertiesComponentDependencies} props \r\n */\r\nexport const RectanglePropertiesComponent = ({ selectedNodeID, graphicsList, updateGraphicsPropertiesAction }) => {\r\n\r\n    const graphics = graphicsList[selectedNodeID];\r\n\r\n    const onChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: value }\r\n        });\r\n    };\r\n\r\n    const onColorChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: convertColorFormat(value) }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    // I use origin here because position is already used in Base properties component\r\n    const positionData = {\r\n        label: \"Origin\",\r\n        dataIDs: [\"x\", \"y\"],\r\n        values: [graphics.x, graphics.y],\r\n        signs: [\"X\", \"Y\"],\r\n        onChange\r\n    };\r\n    const sizeData = {\r\n        label: \"Size\",\r\n        dataIDs: [\"width\", \"height\"],\r\n        values: [graphics.width, graphics.height],\r\n        signs: [\"W\", \"H\"],\r\n        onChange\r\n    };\r\n    const colorData = {\r\n        label: \"Color\",\r\n        dataID: \"color\",\r\n        value: convertColorFormat(graphics.color),\r\n        onChange: onColorChange\r\n    };\r\n    const alphaData = {\r\n        label: \"Alpha\",\r\n        dataID: \"alpha\",\r\n        value: graphics.alpha,\r\n        step: 0.1,\r\n        max: 1,\r\n        min: 0,\r\n        onChange\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <PointInput {...positionData} />\r\n            <PointInput {...sizeData} />\r\n            <ColorInput {...colorData} />\r\n            <NumberInput {...alphaData} />\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ graphicsList, tree }) => {\r\n    return {\r\n        graphicsList: graphicsList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const RectangleProperties = connect(\r\n    mapStateToProps,\r\n    { updateGraphicsPropertiesAction }\r\n)(RectanglePropertiesComponent);","\r\nimport React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateGraphicsPropertiesAction } from \"../../../../store/properties/graphics\";\r\nimport { ColorInput, NumberInput, PointInput, negativeNumbersMiddleware } from \"../../genericInputs\";\r\nimport { convertColorFormat } from \"../../../../tools/color\";\r\n\r\n/**\r\n * @typedef {{\r\n* updateGraphicsPropertiesAction: typeof updateGraphicsPropertiesAction;\r\n* graphicsList: import(\"../../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n* selectedNodeID: number;\r\n* }} RoundedRectanglePropertiesComponentDependencies\r\n*/\r\n\r\n/**\r\n * @param {RoundedRectanglePropertiesComponentDependencies} props \r\n */\r\nexport const RoundedRectanglePropertiesComponent = ({ selectedNodeID, graphicsList, updateGraphicsPropertiesAction }) => {\r\n    const graphics = graphicsList[selectedNodeID];\r\n\r\n    const onChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: value }\r\n        });\r\n    };\r\n\r\n    const onColorChange = (key, value) => {\r\n        updateGraphicsPropertiesAction({\r\n            nodeID: selectedNodeID,\r\n            properties: { ...graphics, [key]: convertColorFormat(value) }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    // I use origin here because position is already used in Base properties component\r\n    const positionData = {\r\n        label: \"Origin\",\r\n        dataIDs: [\"x\", \"y\"],\r\n        values: [graphics.x, graphics.y],\r\n        signs: [\"X\", \"Y\"],\r\n        onChange\r\n    };\r\n    const sizeData = {\r\n        label: \"Size\",\r\n        dataIDs: [\"width\", \"height\"],\r\n        values: [graphics.width, graphics.height],\r\n        signs: [\"W\", \"H\"],\r\n        onChange\r\n    };\r\n    const colorData = {\r\n        label: \"Color\",\r\n        dataID: \"color\",\r\n        value: convertColorFormat(graphics.color),\r\n        onChange: onColorChange\r\n    };\r\n    const alphaData = {\r\n        label: \"Alpha\",\r\n        dataID: \"alpha\",\r\n        value: graphics.alpha,\r\n        step: 0.1,\r\n        max: 1,\r\n        min: 0,\r\n        middleware: negativeNumbersMiddleware,\r\n        onChange\r\n    };\r\n\r\n    const cornersData = {\r\n        label: \"Corner\",\r\n        dataID: \"cornerRadius\",\r\n        value: graphics.cornerRadius,\r\n        sign: \"R\",\r\n        middleware: negativeNumbersMiddleware,\r\n        onChange\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <PointInput {...positionData} />\r\n            <PointInput {...sizeData} />\r\n            <NumberInput {...cornersData} />\r\n            <ColorInput {...colorData} />\r\n            <NumberInput {...alphaData} />\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ graphicsList, tree }) => {\r\n    return {\r\n        graphicsList: graphicsList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const RoundedRectangleProperties = connect(\r\n    mapStateToProps,\r\n    { updateGraphicsPropertiesAction }\r\n)(RoundedRectanglePropertiesComponent);","\r\nimport React from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { CircleProperties, RectangleProperties, RoundedRectangleProperties } from \"./collection\";\r\nimport { GRAPHICS_TYPES } from \"../../../data/StoreData\";\r\n\r\n\r\nconst COMPONENTS_MAP = {\r\n    [GRAPHICS_TYPES.CIRCLE]: <CircleProperties />,\r\n    [GRAPHICS_TYPES.RECTANGLE]: <RectangleProperties />,\r\n    [GRAPHICS_TYPES.ROUNDED_RECTANGLE]: <RoundedRectangleProperties />\r\n};\r\n\r\n/**\r\n * @typedef {{\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * selectedNodeID: number;\r\n * }} GraphicsPropertiesComponentDependencies\r\n */\r\n\r\n/**\r\n * @param {GraphicsPropertiesComponentDependencies} props \r\n */\r\nexport const GraphicsPropertiesComponent = ({ selectedNodeID, graphicsList }) => {\r\n\r\n    const graphics = graphicsList[selectedNodeID];\r\n    return (\r\n        <div className=\"properties\">\r\n            {COMPONENTS_MAP[graphics.type]}\r\n        </div>\r\n    )\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ graphicsList, tree }) => {\r\n    return {\r\n        graphicsList: graphicsList,\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\n\r\nexport const GraphicsProperties = connect(\r\n    mapStateToProps,\r\n    {}\r\n)(GraphicsPropertiesComponent);","import React from \"react\";\r\nimport { NameProperty } from \"./name\";\r\nimport { BaseProperties } from \"./base\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\nimport { GraphicsTypeSelector } from \"./graphics/GraphicsTypeSelector\";\r\nimport { GraphicsProperties } from \"./graphics/GraphicsProperties\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nexport const isGraphicsEntity = (id, store) => {\r\n    const entity = store.entityTypesList[id];\r\n    return entity && entity.type === ENTITY_TYPES.GRAPHICS;\r\n};\r\n\r\nexport const GraphicsEntity = () => {\r\n    return (\r\n        <div>\r\n            <NameProperty />\r\n            <BaseProperties />\r\n            <GraphicsTypeSelector />\r\n            <GraphicsProperties />\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateNineSliceSpritePropertiesAction } from \"../../../store/properties/nineSliceSprite\";\r\n\r\nimport { PointInput } from \"../genericInputs/PointInput\";\r\nimport { TextureInput } from \"../genericInputs\";\r\nimport { Texture } from \"pixi.js\";\r\nimport { Size } from \"../genericInputs/Size\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * selectedNodeID: number | null;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState\r\n * nineSliceSpritePropertiesList: import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * updateNineSliceSpritePropertiesAction: typeof updateNineSliceSpritePropertiesAction;\r\n * }} NineSliceSpritePropertiesComponentDependencies\r\n */\r\n\r\n/**\r\n * Each node must have base properties\r\n * @param { NineSliceSpritePropertiesComponentDependencies} props \r\n * @returns\r\n */\r\nconst NineSliceSpritePropertiesComponent = ({\r\n    selectedNodeID,\r\n    resourcesList,\r\n    nineSliceSpritePropertiesList,\r\n    updateNineSliceSpritePropertiesAction\r\n}) => {\r\n\r\n    const id = selectedNodeID;\r\n\r\n    const spriteProperties = nineSliceSpritePropertiesList[id];\r\n\r\n    const resource = resourcesList[spriteProperties.resourceID];\r\n    const resourceName = resource ? resource.name : \"\";\r\n\r\n    useEffect(() => {\r\n        // Edge case when a resource get's removed from resources but the id is still in the sprite property\r\n        if (spriteProperties.resourceID && !resource) updateNineSliceSpritePropertiesAction({ nodeID: id, resourceID: null, resourceName: null });\r\n    }, [resource]);\r\n\r\n    const onInputChange = (key, value) => {\r\n        updateNineSliceSpritePropertiesAction({\r\n            nodeID: id,\r\n            properties: { ...spriteProperties, [key]: value }\r\n        });\r\n    };\r\n\r\n    const onTextureAdded = (key, value) => {\r\n        updateNineSliceSpritePropertiesAction({ nodeID: id, properties: { resourceID: value, resourceName: resourcesList[value].name } });\r\n    };\r\n\r\n    const textureData = {\r\n        label: \"Texture\",\r\n        dataID: \"texture\",\r\n        value: resourceName,\r\n        onChange: onTextureAdded,\r\n    };\r\n\r\n    const texture = resource ? Texture.from(resource.name) : Texture.EMPTY;\r\n    const textureSize = {\r\n        label: \"Texture Size\",\r\n        dataIDs: [\"width\", \"height\"],\r\n        values: [texture.width, texture.height],\r\n    };\r\n\r\n    const cornersABData = {\r\n        label: \"Corners\",\r\n        dataIDs: [\"A\", \"C\"],\r\n        values: [spriteProperties.A, spriteProperties.C],\r\n        signs: [\"A\", \"C\"],\r\n        onChange: onInputChange,\r\n    };\r\n\r\n    const cornersCDData = {\r\n        label: \"\",\r\n        dataIDs: [\"B\", \"D\"],\r\n        values: [spriteProperties.B, spriteProperties.D],\r\n        signs: [\"B\", \"D\"],\r\n        onChange: onInputChange,\r\n    };\r\n\r\n    const anchorData = {\r\n        label: \"Anchor\",\r\n        dataIDs: [\"anchorX\", \"anchorY\"],\r\n        values: [spriteProperties.anchorX, spriteProperties.anchorY],\r\n        signs: [\"X\", \"Y\"],\r\n        step: 0.5,\r\n        onChange: onInputChange\r\n    };\r\n\r\n    const sizeData = {\r\n        label: \"Size\",\r\n        dataIDs: [\"width\", \"height\"],\r\n        values: [spriteProperties.width, spriteProperties.height],\r\n        signs: [\"W\", \"H\"],\r\n        onChange: onInputChange\r\n    };\r\n\r\n    return (\r\n        <div className=\"properties propertiesTopOffset\">\r\n            <TextureInput {...textureData} />\r\n            <Size {...textureSize} />\r\n            <PointInput {...anchorData} />\r\n            <PointInput {...sizeData} />\r\n            <PointInput {...cornersABData} />\r\n            <PointInput {...cornersCDData} />\r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree, nineSliceSpritePropertiesList, resourcesList }) => {\r\n    return {\r\n        nineSliceSpritePropertiesList: nineSliceSpritePropertiesList,\r\n        selectedNodeID: tree.selectedNodeID,\r\n        resourcesList: resourcesList\r\n    }\r\n};\r\n\r\nexport const NineSliceSpriteProperties = connect(\r\n    mapStateToProps,\r\n    { updateNineSliceSpritePropertiesAction }\r\n)(NineSliceSpritePropertiesComponent)","import React from \"react\";\r\nimport { NameProperty } from \"./name\";\r\nimport { BaseProperties } from \"./base\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\nimport { NineSliceSpriteProperties } from \"./nineSliceSprite/NineSliceSpriteProperties\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nexport const isNineSliceSpriteEntity = (id, store) => {\r\n    const entity = store.entityTypesList[id];\r\n    return entity && entity.type === ENTITY_TYPES.NINE_SLICE_SPRITE;\r\n};\r\n\r\nexport const NineSliceSpriteEntity = () => {\r\n    return (\r\n        <div>\r\n            <NameProperty />\r\n            <BaseProperties />\r\n            <NineSliceSpriteProperties />\r\n        </div>\r\n    )\r\n}","import React, { useState } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { updateTextPropertiesAction } from \"../../../store/properties/text\";\r\n\r\nimport { PointInput } from \"../genericInputs/PointInput\";\r\nimport { ColorInput, NumberInput, SelectorInput, TextInput } from \"../genericInputs\";\r\nimport { FONT_FAMILIES, FONT_LINE_JOINT, FONT_STYLE, FONT_VARIANT, FONT_WEIGHT, TEXT_ALIGN, TEXT_WHITE_SPACE } from \"../../../data/StoreData\";\r\nimport { ToggleInput } from \"../genericInputs/ToggleInput\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * selectedNodeID: number | null;\r\n * textPropertiesList: import(\"../../../store/properties/text\").ITextPropertiesListState;\r\n * updateTextPropertiesAction: typeof updateTextPropertiesAction;\r\n * }} TextPropertiesComponentDependencies\r\n */\r\n\r\n/**\r\n * @param { TextPropertiesComponentDependencies} props \r\n */\r\nconst TextPropertiesComponent = ({ selectedNodeID, textPropertiesList, updateTextPropertiesAction }) => {\r\n    const id = selectedNodeID;\r\n\r\n    const {\r\n        text, fill, anchorY, anchorX,\r\n        fontFamily, fontStyle, fontVariant, fontWeight, fontSize,\r\n        // stroke properties are optional and may not exist in the data if disabled\r\n        hasStroke = false, stroke = \"#ffffff\", strokeThickness = 1, miterLimit = 10, lineJoin = FONT_LINE_JOINT.MITER,\r\n        // shadow props are optional and may NOT exist in the data if disabled\r\n        dropShadow = false, dropShadowAlpha = 1, dropShadowAngle = 0, dropShadowBlur = 0,\r\n        dropShadowColor = \"#ffffff\", dropShadowDistance = 0,\r\n        // multi-line props are optional and may NOT exist in the data if disabled\r\n        wordWrap = false, breakWords = false, leading = 0, lineHeight = 0, wordWrapWidth = 200,\r\n        align = TEXT_ALIGN.LEFT, whiteSpace = TEXT_WHITE_SPACE.PRE,\r\n    } = textPropertiesList[id];;\r\n\r\n    // if booleans are not provided it means that the callback is called from the input\r\n    const onChange = (key, value, isStroke = hasStroke, isShadow = dropShadow, isMultiLine = wordWrap) => {\r\n        let properties = {\r\n            text, fill, anchorY, anchorX,\r\n            fontFamily, fontStyle, fontVariant, fontWeight, fontSize,\r\n            ...(isStroke ? { hasStroke: true, stroke, strokeThickness, miterLimit, lineJoin } : {}),\r\n            ...(isShadow ? { dropShadow: true, dropShadowAlpha, dropShadowAngle, dropShadowBlur, dropShadowColor, dropShadowDistance } : {}),\r\n            ...(isMultiLine ? { wordWrap: true, breakWords, leading, lineHeight, wordWrapWidth, align, whiteSpace } : {}),\r\n        };\r\n\r\n        properties[key] = value;\r\n\r\n        updateTextPropertiesAction({ nodeID: id, properties });\r\n    };\r\n\r\n    // essential style values\r\n    const textData = { label: \"Text\", dataID: \"text\", value: text, onChange };\r\n    const anchorData = { label: \"Anchor\", dataIDs: [\"anchorX\", \"anchorY\"], values: [anchorX, anchorY], signs: [\"X\", \"Y\"], onChange };\r\n    const colorData = { label: \"Color\", dataID: \"fill\", value: fill, onChange };\r\n    const fontFamilyData = { label: \"Font Family\", dataID: \"fontFamily\", selected: fontFamily, options: Object.values(FONT_FAMILIES), onChange };\r\n    const fontStyleData = { label: \"Font Style\", dataID: \"fontStyle\", selected: fontStyle, options: Object.values(FONT_STYLE), onChange };\r\n    const fontVariantData = { label: \"Font Variant\", dataID: \"fontVariant\", selected: fontVariant, options: Object.values(FONT_VARIANT), onChange };\r\n    const fontWeightData = { label: \"Font Weight\", dataID: \"fontWeight\", selected: fontWeight, options: Object.values(FONT_WEIGHT), onChange };\r\n    const fontSizeData = { label: \"Size\", dataID: \"fontSize\", value: fontSize, sign: \"Px\", onChange };\r\n\r\n    // stroke properties are optional and may not exist in the data if disabled\r\n    const onStrokeToggled = (key, isStroke) => {\r\n        // those two calls will make the component to rerender but I am sure React will make one repaint because of batching\r\n        onChange(\"\", \"\", isStroke, dropShadow, wordWrap);\r\n    };\r\n\r\n    const showStrokeProperties = () => {\r\n        const strokeColorData = { label: \"Color\", dataID: \"stroke\", value: stroke, onChange };\r\n        const strokeLineJoinData = { label: \"Line Join\", dataID: \"lineJoin\", selected: lineJoin, options: Object.values(FONT_LINE_JOINT), onChange };\r\n        const strokeThicknessData = { label: \"Thickness\", dataID: \"strokeThickness\", value: strokeThickness, sign: \"Px\", onChange };\r\n        const strokeMiterLimitData = { label: \"Miter Limit\", dataID: \"miterLimit\", value: miterLimit, sign: \"Px\", onChange };\r\n\r\n        return (\r\n            <>\r\n                <ColorInput {...strokeColorData} />\r\n                <SelectorInput {...strokeLineJoinData} />\r\n                <NumberInput {...strokeThicknessData} />\r\n                <NumberInput {...strokeMiterLimitData} />\r\n            </>\r\n        )\r\n    };\r\n\r\n    const onShadowToggled = (key, isShadow) => onChange(\"\", \"\", hasStroke, isShadow, wordWrap);\r\n\r\n    const showShadowProperties = () => {\r\n        const dropShadowColorData = { label: \"Color\", dataID: \"dropShadowColor\", value: dropShadowColor, onChange };\r\n        const dropShadowAlphaData = { label: \"Alpha\", dataID: \"dropShadowAlpha\", value: dropShadowAlpha, onChange };\r\n        const dropShadowAngleData = { label: \"Angle\", dataID: \"dropShadowAngle\", value: dropShadowAngle, sign: \"DEG\", onChange };\r\n        const dropShadowBlurData = { label: \"Blur\", dataID: \"dropShadowBlur\", value: dropShadowBlur, sign: \"Px\", onChange };\r\n        const dropShadowDistanceData = { label: \"Distance\", dataID: \"dropShadowDistance\", value: dropShadowDistance, sign: \"Px\", onChange };\r\n\r\n        return (\r\n            <>\r\n                <ColorInput {...dropShadowColorData} />\r\n                <NumberInput {...dropShadowAlphaData} />\r\n                <NumberInput {...dropShadowAngleData} />\r\n                <NumberInput {...dropShadowBlurData} />\r\n                <NumberInput {...dropShadowDistanceData} />\r\n            </>\r\n        )\r\n    };\r\n\r\n    const onMultiLineToggled = (key, isMultiLine) => onChange(\"\", \"\", hasStroke, dropShadow, isMultiLine);\r\n\r\n    const showMultiLineProperties = () => {\r\n        const breakWordsData = { label: \"Break Words\", dataID: \"breakWords\", value: breakWords, onChange };\r\n        const alignData = { label: \"Align\", dataID: \"align\", selected: align, options: Object.values(TEXT_ALIGN), onChange };\r\n        const whiteSpaceData = { label: \"White Space\", dataID: \"whiteSpace\", selected: whiteSpace, options: Object.values(TEXT_WHITE_SPACE), onChange };\r\n        const wordWrapWidthData = { label: \"Wrap Width\", dataID: \"wordWrapWidth\", value: wordWrapWidth, sign: \"Px\", onChange };\r\n        const lineHeightData = { label: \"Line Height\", dataID: \"lineHeight\", value: lineHeight, sign: \"Px\", onChange };\r\n        const leadingData = { label: \"Leading\", dataID: \"leading\", value: leading, sign: \"Px\", onChange };\r\n\r\n        return (\r\n            <>\r\n                <ToggleInput {...breakWordsData} />\r\n                <SelectorInput {...alignData} />\r\n                <SelectorInput {...whiteSpaceData} />\r\n                <NumberInput {...wordWrapWidthData} />\r\n                <NumberInput {...lineHeightData} />\r\n                <NumberInput {...leadingData} />\r\n            </>\r\n        )\r\n    };\r\n\r\n    return (\r\n        <div className=\"properties propertiesTopOffset\">\r\n            <TextInput {...textData} />\r\n            <PointInput {...anchorData} />\r\n            <br></br>\r\n            <ColorInput {...colorData} />\r\n            <SelectorInput {...fontFamilyData} />\r\n            <SelectorInput {...fontStyleData} />\r\n            <SelectorInput {...fontVariantData} />\r\n            <SelectorInput {...fontWeightData} />\r\n            <NumberInput {...fontSizeData} />\r\n            <br></br>\r\n            <ToggleInput {...{ label: \"Stroke\", dataID: \"\", value: hasStroke, onChange: onStrokeToggled }} />\r\n            {hasStroke ? showStrokeProperties() : null}\r\n            <br></br>\r\n            <ToggleInput {...{ label: \"Shadow\", dataID: \"\", value: dropShadow, onChange: onShadowToggled }} />\r\n            {dropShadow ? showShadowProperties() : null}\r\n            <br></br>\r\n            <ToggleInput {...{ label: \"Multiline\", dataID: \"\", value: wordWrap, onChange: onMultiLineToggled }} />\r\n            {wordWrap ? showMultiLineProperties() : null}\r\n        </div>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree, textPropertiesList }) => {\r\n    return {\r\n        selectedNodeID: tree.selectedNodeID,\r\n        textPropertiesList\r\n    }\r\n};\r\n\r\nexport const TextProperties = connect(\r\n    mapStateToProps,\r\n    { updateTextPropertiesAction }\r\n)(TextPropertiesComponent)","import React from \"react\";\r\nimport { NameProperty } from \"./name\";\r\nimport { BaseProperties } from \"./base\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\nimport { TextProperties } from \"./text/TextProperties\";\r\n\r\n/**\r\n * @param {number} id \r\n * @param {import(\"../../store\").IStore} store \r\n */\r\nexport const isTextEntity = (id, store) => {\r\n    const entity = store.entityTypesList[id];\r\n    return entity && entity.type === ENTITY_TYPES.TEXT;\r\n};\r\n\r\nexport const TextEntity = () => {\r\n    return (\r\n        <div>\r\n            <NameProperty />\r\n            <BaseProperties />\r\n            <TextProperties />\r\n        </div>\r\n    )\r\n};","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport store from \"../../store\";\r\n\r\nimport \"./propertiesPanel.css\";\r\nimport \"./genericInputs/genericInputStyle.css\";\r\n\r\nimport { ContainerEntity, isContainerEntity } from \"./ContainerEntity\";\r\nimport { SpriteEntity, isSpriteEntity } from \"./SpriteEntity\";\r\nimport { GraphicsEntity, isGraphicsEntity } from \"./GraphicsEntity\";\r\nimport { NineSliceSpriteEntity, isNineSliceSpriteEntity } from \"./NineSliceSpriteEntity\";\r\nimport { TextEntity, isTextEntity } from \"./TextEntity\";\r\n\r\nconst ENTITY_TYPES_TO_COMPONENTS_MAP = [\r\n    { checker: isContainerEntity, component: <ContainerEntity /> },\r\n    { checker: isSpriteEntity, component: <SpriteEntity /> },\r\n    { checker: isGraphicsEntity, component: <GraphicsEntity /> },\r\n    { checker: isNineSliceSpriteEntity, component: <NineSliceSpriteEntity /> },\r\n    { checker: isTextEntity, component: <TextEntity /> },\r\n]\r\n\r\nconst PropertiesPanelComponent = (props) => {\r\n    const id = props.selectedNodeID;\r\n\r\n\r\n    const entity = ENTITY_TYPES_TO_COMPONENTS_MAP.find((entity) => entity.checker(id, store.getState()));\r\n\r\n    return (\r\n        <div style={{ marginTop: 20 }}>\r\n            {entity ? entity.component : null}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree }) => {\r\n    return {\r\n        selectedNodeID: tree.selectedNodeID\r\n    }\r\n};\r\n\r\nexport const PropertiesPanel = connect(\r\n    mapStateToProps, {}\r\n)(PropertiesPanelComponent)","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { convertImageFileToBase64 } from \"../../../tools/resourcesTools\";\r\nimport \"./imageElement.css\";\r\n\r\n/**\r\n * @typedef {{\r\n * resource: File;\r\n * id: number;\r\n * }} ImageElementComponentDependencies\r\n */\r\n\r\n/**\r\n * @param { ImageElementComponentDependencies} props \r\n */\r\nconst ImageElementComponent = (props) => {\r\n    const [parsedResource, setParsedResource] = useState({\r\n        url: \"\",\r\n        name: \"Loading...\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        const proxy = {\r\n            setParsedResource: ({ name, url }) => {\r\n                setParsedResource({ url, name: name.replace(/(.png)|(.jpeg)|(.jpg)/i, \"\") });\r\n            }\r\n        };\r\n\r\n        // it is an async operation but if the component gets unmounted before the callback files, \r\n        // there will be a complain from React framework about memory leakage. I use proxy to fix that\r\n        convertImageFileToBase64(props.resource, (data) => proxy.setParsedResource(data));\r\n\r\n        return () => (proxy.setParsedResource = () => { });\r\n    }, [props.resource])\r\n\r\n    // @TODO find another way of doing it. I tried to add it to the dataTransfer.items, but it didn't work\r\n    const onDragStart = () => window[\"__RESOURCE_ID\"] = props.id;\r\n\r\n    return (\r\n        <div\r\n            draggable\r\n            onDragStart={onDragStart}\r\n            className=\"image-preview\"\r\n            data-type=\"image-preview\"\r\n            data-image-id={props.id}\r\n            style={{ backgroundImage: `url(${parsedResource.url})` }}\r\n        >\r\n            {parsedResource.name}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const ImageElement = ImageElementComponent","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./resourcesPanel.css\";\r\nimport { ImageElement } from \"./elements/ImageElement\";\r\n\r\n\r\n/**\r\n * @typedef {{\r\n * resourcesList: import(\"../../store/resources\").IResourcesListState;\r\n * }} ResourcesPanelComponentDependencies\r\n */\r\n\r\n/**\r\n * @param { ResourcesPanelComponentDependencies} props \r\n */\r\nconst ResourcesPanelComponent = (props) => {\r\n    const getImageElements = (resources) => {\r\n        return Object.keys(resources).map((id) => {\r\n            return <ImageElement key={id} id={id} resource={resources[id]} />\r\n        })\r\n    };\r\n\r\n    return (\r\n        <div id=\"files-preview\" data-type=\"resources-panel\">\r\n            {getImageElements(props.resourcesList)}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n/**\r\n * @param {import(\"../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ resourcesList }) => {\r\n    return {\r\n        resourcesList\r\n    }\r\n};\r\n\r\nexport const ResourcesPanel = connect(\r\n    mapStateToProps, {}\r\n)(ResourcesPanelComponent)","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\n\r\nimport \"./popupWithOptions.css\";\r\n\r\n/**\r\n * @typedef {{\r\n *  canProcessContextMenu: (event: MouseEvent) => boolean;\r\n *  canProcessClick: (event: MouseEvent) => boolean;\r\n *  processClick: (event: MouseEvent) => boolean;\r\n *  optionsMap: Array<{option: string, label: string, className?: sting; isAvailable: (target: HTMLElement) => boolean}>;\r\n * }} PopupWithOptionsDependencies\r\n */\r\n\r\n/**\r\n * @param { PopupWithOptionsDependencies} props \r\n */\r\nexport const PopupWithOptions = (props) => {\r\n\r\n    const [position, setPosition] = useState({ top: 0, left: 0 });\r\n    const [data, setData] = useState({ isVisible: false, hoveredElement: null });\r\n\r\n    const mousePosition = useRef({ x: 0, y: 0 });\r\n    const popupRef = useRef(document.createElement(\"div\"));\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"contextmenu\", onContextmenu);\r\n        return () => window.removeEventListener(\"contextmenu\", onContextmenu);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // we know that when the useEffect fires the ref element will be there\r\n        popupRef.current.addEventListener(\"mouseleave\", onMouseleave);\r\n        return () => popupRef.current.removeEventListener(\"mouseleave\", onMouseleave);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!data.isVisible) {\r\n            return;\r\n        }\r\n\r\n        const mouseMargin = 10;\r\n        const { x, y } = mousePosition.current;\r\n        const { offsetWidth, offsetHeight } = popupRef.current;\r\n\r\n        const offsetX = (x + offsetWidth) - window.innerWidth;\r\n        const offsetY = (y + offsetHeight) - window.innerHeight;\r\n\r\n        const top = offsetY > 0 ? (y - offsetHeight + mouseMargin) : y - mouseMargin;\r\n        const left = offsetX > 0 ? (x - offsetWidth + mouseMargin) : x - mouseMargin;\r\n        // correct positions just in case if we are out of the bounds\r\n        setPosition({ top, left });\r\n\r\n    }, [data.isVisible])\r\n\r\n    const onContextmenu = useCallback((event) => {\r\n        if (!props.canProcessContextMenu(event)) { return; }\r\n\r\n        const { target, clientX, clientY } = event;\r\n        mousePosition.current.x = clientX;\r\n        mousePosition.current.y = clientY;\r\n\r\n        setData({ hoveredElement: target, isVisible: true });\r\n        setPosition({ top: clientY, left: clientY });\r\n    }, []);\r\n\r\n    const onMouseleave = useCallback(() => {\r\n        setData({ isVisible: false, hoveredElement: null });\r\n    }, []);\r\n\r\n    const onClick = useCallback((event) => {\r\n        if (!props.canProcessClick(event)) { return; }\r\n\r\n        props.processClick(event, data.hoveredElement);\r\n        onMouseleave();\r\n    }, [data.hoveredElement]);\r\n\r\n    return (\r\n        <div\r\n            className=\"options-popup\"\r\n            ref={popupRef}\r\n            onClick={onClick}\r\n            style={{ ...position, display: data.isVisible ? \"block\" : \"none\" }}\r\n        >\r\n            {props.optionsMap.map((params, index) => {\r\n                const { option, label, isAvailable, className = \"\" } = params;\r\n\r\n                return <div\r\n                    key={index}\r\n                    data-option={option}\r\n                    className={className}\r\n                    style={{ display: isAvailable(data.hoveredElement) ? \"block\" : \"none\" }}\r\n                >{label}</div>\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { pixiLoader } from \"../../middlewares/pixiLoaderMiddleware\";\r\nimport store from \"../../store\";\r\nimport { addResourceAction, removeResourceAction } from \"../../store/resources\";\r\nimport { createImagesLoader, exportImageFile } from \"../../tools/resourcesTools\";\r\nimport { getUID } from \"../../tools/uidGenerator\";\r\nimport { PopupWithOptions } from \"../optionsPopup\";\r\n\r\nconst OPTIONS_MAP = {\r\n    ADD_IMAGE: \"ADD_IMAGE\",\r\n    DOWNLOAD_IMAGE: \"DOWNLOAD_IMAGE\",\r\n    REPLACE_IMAGE: \"REPLACE_IMAGE\",\r\n    REMOVE_IMAGE: \"REMOVE_IMAGE\",\r\n};\r\n\r\n/**\r\n * @typedef {{\r\n * addResourceAction: typeof addResourceAction;\r\n * removeResourceAction: typeof removeResourceAction;\r\n * }} ResourcesOptionsPopupComponentDependencies\r\n */\r\n\r\n/**\r\n * @param { ResourcesOptionsPopupComponentDependencies} props \r\n */\r\nconst ResourcesOptionsPopupComponent = (props) => {\r\n\r\n    const canShowRemoveOption = (hoveredElement) => {\r\n        /* resources-panel can't have remove option when showing the popup */\r\n        const dataType = hoveredElement ? hoveredElement.getAttribute(\"data-type\") : undefined;\r\n        return dataType !== \"resources-panel\";\r\n    };\r\n\r\n    const canShowDownloadOption = (hoveredElement) => {\r\n        /* If there is no images, we don't show the option */\r\n        const id = hoveredElement ? parseInt(hoveredElement.getAttribute(\"data-image-id\")) : NaN;\r\n        return !Number.isNaN(id);\r\n    };\r\n\r\n    const optionsMap = [\r\n        { option: OPTIONS_MAP.ADD_IMAGE, label: \"Add Image\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.DOWNLOAD_IMAGE, label: \"Download Image\", isAvailable: canShowDownloadOption },\r\n        { option: OPTIONS_MAP.REPLACE_IMAGE, label: \"Replace Image\", isAvailable: canShowRemoveOption },\r\n        { option: OPTIONS_MAP.REMOVE_IMAGE, label: \"Remove Image\", className: \"remove-option\", isAvailable: canShowRemoveOption },\r\n    ];\r\n\r\n    const canProcessContextMenu = (event) => {\r\n        const dataType = event.target.getAttribute(\"data-type\");\r\n        return (dataType === \"resources-panel\" || dataType == \"image-preview\");\r\n    };\r\n\r\n    const canProcessClick = (event) => {\r\n        return Boolean(event.target.getAttribute(\"data-option\"));\r\n    };\r\n\r\n    const processClick = (event, hoveredElement) => {\r\n        const option = event.target.getAttribute(\"data-option\");\r\n        if (option && option === OPTIONS_MAP.ADD_IMAGE) {\r\n            const onImagesLoaded = (files) => {\r\n                pixiLoader.loadAssets(files, () => {\r\n                    const data = files.map((file) => ({ id: getUID(), file }));\r\n                    props.addResourceAction(data);\r\n                });\r\n            };\r\n            const imageLoaderElement = createImagesLoader(onImagesLoaded);\r\n            imageLoaderElement.click();\r\n            return;\r\n        }\r\n\r\n        const id = parseInt(hoveredElement.getAttribute(\"data-image-id\"));\r\n\r\n        if (!id) {\r\n            return;\r\n        }\r\n\r\n        if (option === OPTIONS_MAP.REPLACE_IMAGE) {\r\n            const onImagesLoaded = (files) => {\r\n                if (files.length !== 1) { return; }\r\n                event.target.src = undefined;\r\n                pixiLoader.loadAssets(files[0], () => {\r\n                    const data = files.map((file) => ({ id: id, file }));\r\n                    props.addResourceAction(data);\r\n                });\r\n            };\r\n            const imageLoaderElement = createImagesLoader(onImagesLoaded);\r\n            imageLoaderElement.click();\r\n            return;\r\n        }\r\n        else if (option === OPTIONS_MAP.REMOVE_IMAGE) {\r\n            pixiLoader.removeAssets(store.getState().resourcesList[id])\r\n            props.removeResourceAction(id);\r\n        }\r\n        else if (option === OPTIONS_MAP.DOWNLOAD_IMAGE) {\r\n            const file = store.getState().resourcesList[id];\r\n            exportImageFile(file, file.name);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <PopupWithOptions {\r\n            ...{ canShowRemoveOption, canProcessContextMenu, canProcessClick, processClick, optionsMap }\r\n        } />\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../store\").IStore} data \r\n */\r\nconst mapStateToProps = (data) => {\r\n    return {};\r\n};\r\n\r\n\r\nexport const ResourcesOptionsPopup = connect(\r\n    mapStateToProps,\r\n    {\r\n        addResourceAction,\r\n        removeResourceAction\r\n    }\r\n)(ResourcesOptionsPopupComponent)\r\n","/**\r\n * @typedef {{x: number; y: number; width: number; height: number}} Bounds\r\n */\r\n\r\n/**\r\n * @param {Bounds} bounds \r\n * @param {number} x \r\n * @param {number} y \r\n * @returns {boolean}\r\n */\r\nexport const isInside = (bounds, x, y) => {\r\n    return (\r\n        x > bounds.x &&\r\n        x < bounds.x + bounds.width &&\r\n        y > bounds.y &&\r\n        y < bounds.y + bounds.height\r\n    );\r\n};\r\n\r\nexport const PositionsInTheBox = Object.freeze({\r\n    TOP: \"top\",\r\n    CENTER: \"center\",\r\n    BOTTOM: \"bottom\",\r\n});\r\n\r\n/**\r\n * @param {DOMRect} bounds \r\n * @param {number} x \r\n * @param {number} y \r\n * @returns {keyof PositionsInTheBox}\r\n */\r\nexport const getPositionInTheBox = (bounds, x, y) => {\r\n    const top = {\r\n        x: bounds.x,\r\n        y: bounds.y,\r\n        width: bounds.width,\r\n        height: bounds.height * 0.3,\r\n    };\r\n\r\n    const center = {\r\n        x: bounds.x,\r\n        y: bounds.y + bounds.height * 0.3,\r\n        width: bounds.width,\r\n        height: bounds.height * 0.4,\r\n    };\r\n\r\n    if (isInside(top, x, y)) return PositionsInTheBox.TOP;\r\n    if (isInside(center, x, y)) return PositionsInTheBox.CENTER;\r\n    else return PositionsInTheBox.BOTTOM;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { ENTITY_TYPES } from \"../../data/StoreData\";\r\nimport store from \"../../store\";\r\nimport \"./node.css\";\r\n\r\nimport containerIcon from \"../../assets/icons/container.png\";\r\nimport graphicsIcon from \"../../assets/icons/graphics.png\";\r\nimport nineSliceSpriteIcon from \"../../assets/icons/nine-slice-sprite.png\";\r\nimport spriteIcon from \"../../assets/icons/sprite.png\";\r\nimport textIcon from \"../../assets/icons/text.png\";\r\n\r\nexport const NODE_DATA_TYPE_ATTRIBUTE = \"node-element\";\r\n\r\nconst ICONS_TO_ENTITIES_MAP = {\r\n    [ENTITY_TYPES.CONTAINER]: containerIcon,\r\n    [ENTITY_TYPES.SPRITE]: spriteIcon,\r\n    [ENTITY_TYPES.GRAPHICS]: graphicsIcon,\r\n    [ENTITY_TYPES.NINE_SLICE_SPRITE]: nineSliceSpriteIcon,\r\n    [ENTITY_TYPES.TEXT]: textIcon,\r\n};\r\n\r\n/**\r\n * \r\n * @param {{\r\n *  node: import(\"../../data/NodeData\").INodeData\r\n *  selectedNodeID: selectedNodeID: null | number\r\n *  copyNodeID: copyNodeID: null | number\r\n * }} props \r\n */\r\nexport const Node = ({ node, selectedNodeID, copyNodeID }) => {\r\n    const [collapsed, setCollapsed] = useState(true);\r\n\r\n    const includesSelectedNodeID = (nodes, id) => {\r\n        return nodes.some(n => n.id === id || n.nodes.length > 0 && includesSelectedNodeID(n.nodes, id));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (includesSelectedNodeID(node.nodes, selectedNodeID)) {\r\n            setCollapsed(false);\r\n        }\r\n    }, [selectedNodeID]);\r\n\r\n    const nodesList = <div className=\"node-nodes\">\r\n        {node.nodes.map(node => <Node key={node.id} node={node} selectedNodeID={selectedNodeID} copyNodeID={copyNodeID} />)}\r\n    </div>;\r\n\r\n    const toggler = <div className=\"toggler\" onClick={() => setCollapsed(!collapsed)}>{collapsed ? <>&#43;</> : <>&#x2212;</>}</div>;\r\n\r\n    const entityType = store.getState().entityTypesList[node.id].type;\r\n    const iconStyle = { backgroundImage: `url(${ICONS_TO_ENTITIES_MAP[entityType]})` };\r\n    const frameStyle = selectedNodeID === node.id ? { backgroundColor: \"darkgreen\" } :\r\n        copyNodeID === node.id ? { backgroundColor: \"darkgoldenrod\" } : {};\r\n\r\n    return (\r\n        <div className=\"node\">\r\n            {node.nodes.length === 0 ? null : toggler}\r\n            <div className=\"node-icon\" style={iconStyle}></div>\r\n            <div draggable=\"true\" className=\"node-name\" data-id={node.id} data-type={NODE_DATA_TYPE_ATTRIBUTE} style={frameStyle}>\r\n                {node.name ? node.name : \"---\"}\r\n            </div>\r\n            {collapsed ? null : nodesList}\r\n        </div>\r\n    );\r\n}","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport { Node } from \"./Node\";\r\n\r\nimport \"./tree.css\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\n/**\r\n* @typedef {{\r\n * treeState:  import(\"../../store/tree\").ITreeState;\r\n * }} TreeComponentDependencies\r\n */\r\n\r\n/**\r\n* @param { TreeComponentDependencies} props \r\n*/\r\nconst TreeComponent = ({ treeState }) => {\r\n\r\n    return (\r\n        <>\r\n            {treeState.treeData ? <Node\r\n                key={treeState.treeData.id}\r\n                node={treeState.treeData}\r\n                selectedNodeID={treeState.selectedNodeID}\r\n                copyNodeID={treeState.copyNodeID} /> : null}\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ tree }) => {\r\n    return {\r\n        treeState: tree,\r\n    };\r\n};\r\n\r\nexport const Tree = connect(\r\n    mapStateToProps,\r\n)(TreeComponent)","import React from \"react\";\r\nimport { createNode } from \"../../data/NodeData\";\r\nimport { getNodeByID, isChild, isParent } from \"../../tools/treeTools\";\r\nimport { PositionsInTheBox, getPositionInTheBox } from \"../../tools/treeUITools\";\r\n\r\nimport \"./tree.css\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { ENTITY_TYPES, ROOT_NODE_ID } from \"../../data/StoreData\";\r\nimport store from \"../../store\";\r\nimport { createNodeAction, insertBeforeNodeAction, moveNodeAction, setSelectedNodeIDAction, updateNodeNameAction } from \"../../store/tree\";\r\nimport { Tree } from \"./Tree\";\r\nimport { initEntityAction } from \"../../store/entityTypes\";\r\nimport { initSpritePropertiesAction, updateSpritePropertiesAction } from \"../../store/properties/sprite\";\r\nimport { initBasePropertiesAction } from \"../../store/properties/base\";\r\nimport { getUID } from \"../../tools/uidGenerator\";\r\n\r\nconst UI_CLASS_NAMES = {\r\n    [PositionsInTheBox.CENTER]: \"insert-center\",\r\n    [PositionsInTheBox.TOP]: \"insert-before\",\r\n};\r\n\r\nconst resetStyles = (nodeElement) => {\r\n    Object.values(UI_CLASS_NAMES).forEach((className) => {\r\n        nodeElement.classList.remove(className);\r\n    });\r\n};\r\n\r\n/**\r\n * @typedef {{\r\n* moveNodeAction: typeof moveNodeAction;\r\n* insertBeforeNodeAction: typeof insertBeforeNodeAction;\r\n* setSelectedNodeIDAction: typeof setSelectedNodeIDAction;\r\n* }} TreeComponentControllerDependencies\r\n*/\r\n\r\n/**\r\n* @param { TreeComponentControllerDependencies} props \r\n*/\r\nconst TreeComponentController = (props) => {\r\n\r\n    /* Some important rules the code follows\r\n        - we can't set a node to itself\r\n        - we can't set a node to its parent again (there is no sense in it )\r\n        - we can't set a node to any of its children\r\n        - a node can be appended to another node\r\n        - a node can be inserted before another node\r\n        - we can't set a node before a root node, only append\r\n    */\r\n    let draggedNodeData = createNode(-1);\r\n    let targetNodeData = createNode(-1);\r\n    let hoverNodeElement = document.createElement(\"div\");\r\n    let insertPosition = (\"\");\r\n\r\n\r\n    const handleDragStart = (event) => {\r\n        const treeData = store.getState().tree.treeData;\r\n        draggedNodeData = getNodeByID(Number(event.target.getAttribute(\"data-id\")), treeData);\r\n    };\r\n\r\n    const handleDrop = (event) => {\r\n        if (window[\"__RESOURCE_ID\"]) {\r\n            const resourceID = window[\"__RESOURCE_ID\"];\r\n            delete window[\"__RESOURCE_ID\"];\r\n            const resourceName = props.resourcesList[resourceID].name;\r\n            const name = props.resourcesList[resourceID].name.replace(/\\.[^/.]+$/, \"\");\r\n            const newID = getUID();\r\n            props.initBasePropertiesAction(newID);\r\n            props.initEntityAction(newID, ENTITY_TYPES.SPRITE);\r\n            props.initSpritePropertiesAction(newID);\r\n            props.createNodeAction(targetNodeData.id, newID);\r\n            props.updateNodeNameAction({ nodeID: newID, name });\r\n            props.updateSpritePropertiesAction({ nodeID: newID, properties: { resourceID, resourceName } });\r\n            props.setSelectedNodeIDAction(newID);\r\n        }\r\n\r\n        if (draggedNodeData.id < 0 || targetNodeData.id < 0) {\r\n            handleDragEnd(event);\r\n            return;\r\n        }\r\n\r\n        if (insertPosition === PositionsInTheBox.CENTER) {\r\n            props.moveNodeAction({ nodeData: draggedNodeData, referenceID: targetNodeData.id });\r\n        }\r\n        else {\r\n            props.insertBeforeNodeAction({ nodeData: draggedNodeData, referenceID: targetNodeData.id });\r\n        }\r\n\r\n        handleDragEnd(event);\r\n    };\r\n\r\n    const handleDragOver = (event) => {\r\n        /* for some reason preventDefault() has to be used otherwise onDrop event will not work */\r\n        event.preventDefault();\r\n\r\n        const treeData = store.getState().tree.treeData;\r\n        /* The node data which is being dragged over */\r\n        const hoveredNodeData = getNodeByID(Number(event.target.getAttribute(\"data-id\")), treeData);\r\n\r\n        const isValid = (\r\n            hoveredNodeData && //  to catch the case when a hovered html element is not valid (doesn't have the node data)\r\n            draggedNodeData.id !== hoveredNodeData.id && /* Check if the nodes are NOT the same */\r\n            !isChild(hoveredNodeData.id, draggedNodeData) && /* Check if a hovered node is NOT a child of the dragged node */\r\n            !isParent(draggedNodeData.id, hoveredNodeData) /* Check if a hovered node is NOT a parent of the dragged node */\r\n        );\r\n\r\n        if (!isValid) {\r\n            resetStyles(hoverNodeElement);\r\n            targetNodeData = createNode(-1);\r\n            return;\r\n        }\r\n\r\n        if (hoverNodeElement !== event.target) {\r\n            resetStyles(hoverNodeElement);\r\n            hoverNodeElement = event.target;\r\n            insertPosition = \"\";\r\n        }\r\n\r\n        /* Get mouse position within the element we drag over and if the mouse position is\r\n        new, reset all of the styles and set new one */\r\n        let position = getPositionInTheBox(hoverNodeElement.getBoundingClientRect(), event.clientX, event.clientY);\r\n\r\n        /* We don't highlight the bottom part because we cant insert node there anyway.\r\n        We use functionality to append node which is basically the same  */\r\n        if (position !== PositionsInTheBox.BOTTOM && position !== insertPosition) {\r\n            resetStyles(hoverNodeElement);\r\n            // we force to append a node to the PARENT node, we can't insert before it\r\n            if (hoveredNodeData.id === ROOT_NODE_ID) {\r\n                position = PositionsInTheBox.CENTER;\r\n            }\r\n            insertPosition = position;\r\n            hoverNodeElement.classList.add(UI_CLASS_NAMES[position])\r\n\r\n        }\r\n\r\n        targetNodeData = hoveredNodeData;\r\n    };\r\n\r\n    const handleDragEnd = (event) => {\r\n        /* No matter where we dropped the dragged element (within or outside tree bounds),\r\n         reset styles for the last hovered node element and reset the temporary data */\r\n        resetStyles(hoverNodeElement);\r\n\r\n        draggedNodeData = createNode(-1);\r\n        targetNodeData = createNode(-1);\r\n        hoverNodeElement = document.createElement(\"div\");\r\n        insertPosition = \"\";\r\n    };\r\n\r\n    const handleClick = (event) => {\r\n        if (!event.target.hasAttribute(\"data-id\")) {\r\n            props.setSelectedNodeIDAction(null)\r\n            return;\r\n        }\r\n        const selectedID = Number(event.target.getAttribute(\"data-id\"));\r\n        props.setSelectedNodeIDAction(selectedID);\r\n    }\r\n\r\n    return (\r\n        // @TODO test in what order events are fired in the browser\r\n        <div id=\"tree-container\"\r\n            onDragStart={handleDragStart}\r\n            onDragOver={handleDragOver}\r\n            onDragEnd={handleDragEnd}\r\n            onDrop={handleDrop}\r\n            onClick={handleClick}\r\n        >\r\n            <Tree />\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ resourcesList }) => {\r\n    return {\r\n        resourcesList: resourcesList\r\n    }\r\n};\r\n\r\nexport const TreeController = connect(\r\n    mapStateToProps,\r\n    {\r\n        moveNodeAction,\r\n        insertBeforeNodeAction,\r\n        setSelectedNodeIDAction,\r\n        initBasePropertiesAction,\r\n        initEntityAction,\r\n        initSpritePropertiesAction,\r\n        createNodeAction,\r\n        updateNodeNameAction,\r\n        updateSpritePropertiesAction,\r\n    }\r\n)(TreeComponentController)","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { NODE_DATA_TYPE_ATTRIBUTE } from \".\";\r\n\r\nimport { ENTITY_TYPES, GRAPHICS_TYPES, ROOT_NODE_ID } from \"../../data/StoreData\";\r\nimport store from \"../../store\";\r\nimport { initEntityAction, removeEntityAction } from \"../../store/entityTypes\";\r\nimport { initBasePropertiesAction, removeBasePropertiesAction, updateBasePropertiesAction } from \"../../store/properties/base\";\r\nimport { initGraphicsPropertiesAction, removeGraphicsPropertiesAction, updateGraphicsPropertiesAction } from \"../../store/properties/graphics\";\r\nimport { initNineSliceSpritePropertiesAction, removeNineSliceSpritePropertiesAction, updateNineSliceSpritePropertiesAction } from \"../../store/properties/nineSliceSprite\";\r\nimport { initSpritePropertiesAction, removeSpritePropertiesAction, updateSpritePropertiesAction } from \"../../store/properties/sprite\";\r\nimport { initTextPropertiesAction, removeTextPropertiesAction, updateTextPropertiesAction } from \"../../store/properties/text\";\r\nimport { createNodeAction, deleteNodeAction, updateNodeNameAction, setCopyNodeIDAction, setSelectedNodeIDAction } from \"../../store/tree\";\r\nimport { getNodeByID, getParent } from \"../../tools/treeTools\";\r\nimport { getUID } from \"../../tools/uidGenerator\";\r\nimport { PopupWithOptions } from \"../optionsPopup\";\r\n\r\nconst OPTIONS_MAP = {\r\n    ...ENTITY_TYPES,\r\n    CLONE_OPTION: \"CLONE_OPTION\",\r\n    COPY_OPTION: \"COPY_OPTION\",\r\n    PASTE_OPTION: \"PASTE_OPTION\",\r\n    REMOVE_OPTION: \"REMOVE_OPTION\",\r\n};\r\n\r\n/**\r\n * @typedef {{\r\n * createNodeAction: typeof createNodeAction;\r\n * updateNodeNameAction: typeof updateNodeNameAction;\r\n * deleteNodeAction: typeof deleteNodeAction;\r\n * setSelectedNodeIDAction: typeof setSelectedNodeIDAction;\r\n * initEntityAction: typeof  initEntityAction;\r\n * removeEntityAction: typeof  removeEntityAction;\r\n * initBasePropertiesAction: typeof  initBasePropertiesAction;\r\n * updateBasePropertiesAction: typeof  updateBasePropertiesAction;\r\n * removeBasePropertiesAction: typeof  removeBasePropertiesAction;\r\n * initSpritePropertiesAction: typeof  initSpritePropertiesAction;\r\n * updateSpritePropertiesAction: typeof  updateSpritePropertiesAction;\r\n * removeSpritePropertiesAction: typeof  removeSpritePropertiesAction;\r\n * initGraphicsPropertiesAction: typeof initGraphicsPropertiesAction; \r\n * updateGraphicsPropertiesAction: typeof updateGraphicsPropertiesAction; \r\n * removeGraphicsPropertiesAction: typeof removeGraphicsPropertiesAction;\r\n * initNineSliceSpritePropertiesAction: typeof initNineSliceSpritePropertiesAction;\r\n * updateNineSliceSpritePropertiesAction: typeof updateNineSliceSpritePropertiesAction;\r\n * removeNineSliceSpritePropertiesAction: typeof removeNineSliceSpritePropertiesAction;\r\n * initTextPropertiesAction: typeof initTextPropertiesAction;\r\n * updateTextPropertiesAction: typeof updateTextPropertiesAction;\r\n * removeTextPropertiesAction: typeof removeTextPropertiesAction;\r\n * }} TreeOptionsPopupComponentDependencies\r\n */\r\n\r\n/**\r\n * Each node must have base properties\r\n * @param { TreeOptionsPopupComponentDependencies} props \r\n */\r\nconst TreeOptionsPopupComponent = (props) => {\r\n\r\n    const isNotRootNode = (hoveredElement) => {\r\n        /* ROOT_NODE_ID can't be deleted or clonned so the option will become disabled */\r\n        const id = hoveredElement ? hoveredElement.getAttribute(\"data-id\") : undefined;\r\n        return Boolean(id) && Number(id) !== ROOT_NODE_ID;\r\n    };\r\n\r\n    const hasCopiedNodeId = () => {\r\n        return Boolean(store.getState().tree.copyNodeID);\r\n    }\r\n\r\n    const optionsMap = [\r\n        { option: OPTIONS_MAP.CONTAINER, label: \"Add Container\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.SPRITE, label: \"Add Sprite\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.NINE_SLICE_SPRITE, label: \"Add 9 Slice Sprite\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.GRAPHICS, label: \"Add Graphics\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.TEXT, label: \"Add Text\", isAvailable: () => true },\r\n        { option: OPTIONS_MAP.CLONE_OPTION, label: \"Clone\", isAvailable: isNotRootNode },\r\n        { option: OPTIONS_MAP.COPY_OPTION, label: \"Copy\", isAvailable: isNotRootNode },\r\n        { option: OPTIONS_MAP.PASTE_OPTION, label: \"Paste\", isAvailable: hasCopiedNodeId },\r\n        { option: OPTIONS_MAP.REMOVE_OPTION, label: \"Remove\", className: \"remove-option\", isAvailable: isNotRootNode },\r\n    ];\r\n\r\n    const canProcessContextMenu = (event) => {\r\n        const type = event.target.getAttribute(\"data-type\");\r\n        const id = event.target.getAttribute(\"data-id\");\r\n        return (id && type && type === NODE_DATA_TYPE_ATTRIBUTE)\r\n    };\r\n\r\n    const canProcessClick = (event) => {\r\n        return Boolean(event.target.getAttribute(\"data-option\"));\r\n    };\r\n\r\n    /**\r\n     * @param {import(\"../../data/NodeData\").INodeData} node\r\n     * @param {string} parentNodeId\r\n     * @param {{x: number, y: number}} offset\r\n     * @param {number[]} newNodeIds\r\n     */\r\n    const cloneNode = (node, parentNodeId, offset, newNodeIds) => {\r\n        newNodeIds = newNodeIds || [];\r\n        if (newNodeIds.includes(node.id)) { return; }\r\n        const entity = store.getState().entityTypesList[node.id];\r\n        const newID = getUID();\r\n        newNodeIds.push(newID);\r\n        props.initBasePropertiesAction(newID);\r\n        const baseProperties = {\r\n            ...store.getState().basePropertiesList[node.id],\r\n        }\r\n        if (offset) {\r\n            baseProperties.positionX += offset.x;\r\n            baseProperties.positionY += offset.y;\r\n        }\r\n        props.updateBasePropertiesAction({\r\n            nodeID: newID,\r\n            properties: baseProperties,\r\n        });\r\n        props.initEntityAction(newID, entity.type);\r\n        if (entity.type === ENTITY_TYPES.SPRITE) {\r\n            props.initSpritePropertiesAction(newID);\r\n            props.updateSpritePropertiesAction({\r\n                nodeID: newID,\r\n                properties: store.getState().spritePropertiesList[node.id],\r\n            });\r\n        } else if (entity.type === ENTITY_TYPES.GRAPHICS) {\r\n            props.initGraphicsPropertiesAction(newID, GRAPHICS_TYPES.RECTANGLE);\r\n            props.updateGraphicsPropertiesAction({\r\n                nodeID: newID,\r\n                properties: store.getState().graphicsList[node.id],\r\n            });\r\n        } else if (entity.type === ENTITY_TYPES.NINE_SLICE_SPRITE) {\r\n            props.initNineSliceSpritePropertiesAction(newID);\r\n            props.updateNineSliceSpritePropertiesAction({\r\n                nodeID: newID,\r\n                properties: store.getState().nineSliceSpritePropertiesList[node.id],\r\n            });\r\n        } else if (entity.type === ENTITY_TYPES.TEXT) {\r\n            props.initTextPropertiesAction(newID);\r\n            props.updateTextPropertiesAction({\r\n                nodeID: newID,\r\n                properties: store.getState().textPropertiesList[node.id],\r\n            });\r\n        }\r\n        props.createNodeAction(parentNodeId, newID);\r\n        props.updateNodeNameAction({ nodeID: newID, name: node.name });\r\n        node.nodes.forEach(n => cloneNode(n, newID, undefined, newNodeIds));\r\n        return newID;\r\n    }\r\n\r\n    const processClick = (event, hoveredElement) => {\r\n        const option = event.target.getAttribute(\"data-option\");\r\n        const id = Number(hoveredElement.getAttribute(\"data-id\"));\r\n\r\n        if (option === OPTIONS_MAP.REMOVE_OPTION) {\r\n            const entity = store.getState().entityTypesList[id];\r\n            // these 3 are for any type of entity, so we will remove them at once\r\n            props.setSelectedNodeIDAction(null);\r\n            props.deleteNodeAction(id);\r\n            props.removeEntityAction(id);\r\n            props.removeBasePropertiesAction(id);\r\n\r\n            if (entity.type === ENTITY_TYPES.CONTAINER) {/* Already done by code above */ }\r\n            else if (entity.type === ENTITY_TYPES.SPRITE) { props.removeSpritePropertiesAction(id); }\r\n            else if (entity.type === ENTITY_TYPES.GRAPHICS) { props.removeGraphicsPropertiesAction(id); }\r\n            else if (entity.type === ENTITY_TYPES.NINE_SLICE_SPRITE) { props.removeNineSliceSpritePropertiesAction(id); }\r\n            else if (entity.type === ENTITY_TYPES.TEXT) { props.removeTextPropertiesAction(id); }\r\n            else { throw new Error(\"You forgot to add a handler for REMOVE option\"); }\r\n            return;\r\n        }\r\n\r\n        if (option === OPTIONS_MAP.CLONE_OPTION) {\r\n            const treeData = store.getState().tree.treeData;\r\n            const node = getNodeByID(id, treeData);\r\n            const parentNode = getParent(node.id, treeData);\r\n            const newID = cloneNode(node, parentNode.id, { x: 10, y: -10 });\r\n            props.setSelectedNodeIDAction(newID);\r\n            return;\r\n        }\r\n\r\n        if (option === OPTIONS_MAP.COPY_OPTION) {\r\n            props.setCopyNodeIDAction(id);\r\n            return;\r\n        }\r\n\r\n        if (option === OPTIONS_MAP.PASTE_OPTION) {\r\n            const treeData = store.getState().tree.treeData;\r\n            const node = getNodeByID(store.getState().tree.copyNodeID, treeData);\r\n            const newID = cloneNode(node, id, { x: 0, y: 0 });\r\n            props.setCopyNodeIDAction(null);\r\n            props.setSelectedNodeIDAction(newID);\r\n            return;\r\n        }\r\n\r\n        const newID = getUID();\r\n        props.initBasePropertiesAction(newID);\r\n\r\n        if (option === OPTIONS_MAP.SPRITE) {\r\n            props.initEntityAction(newID, ENTITY_TYPES.SPRITE);\r\n            props.initSpritePropertiesAction(newID);\r\n        }\r\n        else if (option === OPTIONS_MAP.CONTAINER) {\r\n            props.initEntityAction(newID, ENTITY_TYPES.CONTAINER);\r\n        }\r\n        else if (option === OPTIONS_MAP.GRAPHICS) {\r\n            props.initEntityAction(newID, ENTITY_TYPES.GRAPHICS);\r\n            props.initGraphicsPropertiesAction(newID, GRAPHICS_TYPES.RECTANGLE);\r\n        }\r\n        else if (option === OPTIONS_MAP.NINE_SLICE_SPRITE) {\r\n            props.initEntityAction(newID, ENTITY_TYPES.NINE_SLICE_SPRITE);\r\n            props.initNineSliceSpritePropertiesAction(newID);\r\n        }\r\n        else if (option === OPTIONS_MAP.TEXT) {\r\n            props.initEntityAction(newID, ENTITY_TYPES.TEXT);\r\n            props.initTextPropertiesAction(newID);\r\n        }\r\n        else {\r\n            throw new Error(\"You forgot to add a handler for ADD option\")\r\n        }\r\n        // I need to create the node at the end when all the props are created\r\n        // because PreviewPanel will add new UI when a node is added\r\n        // but it will throw error if the properties for that node doesn't exist yet\r\n        props.createNodeAction(id, newID);\r\n        props.setSelectedNodeIDAction(newID);\r\n    };\r\n\r\n    return (\r\n        <PopupWithOptions {\r\n            ...{ canShowRemoveOption: isNotRootNode, canProcessContextMenu, canProcessClick, processClick, optionsMap }\r\n        } />\r\n    );\r\n};\r\n\r\n/**\r\n * @param {import(\"../../store\").IStore} data \r\n */\r\nconst mapStateToProps = ({ }) => {\r\n    return {};\r\n};\r\n\r\n\r\nexport const TreeOptionsPopup = connect(\r\n    mapStateToProps,\r\n    {\r\n        createNodeAction,\r\n        updateNodeNameAction,\r\n        setCopyNodeIDAction,\r\n        setSelectedNodeIDAction,\r\n        deleteNodeAction,\r\n        initEntityAction,\r\n        removeEntityAction,\r\n        initBasePropertiesAction,\r\n        updateBasePropertiesAction,\r\n        removeBasePropertiesAction,\r\n        initSpritePropertiesAction,\r\n        updateSpritePropertiesAction,\r\n        removeSpritePropertiesAction,\r\n        initGraphicsPropertiesAction,\r\n        updateGraphicsPropertiesAction,\r\n        removeGraphicsPropertiesAction,\r\n        initNineSliceSpritePropertiesAction,\r\n        updateNineSliceSpritePropertiesAction,\r\n        removeNineSliceSpritePropertiesAction,\r\n        initTextPropertiesAction,\r\n        updateTextPropertiesAction,\r\n        removeTextPropertiesAction\r\n    }\r\n)(TreeOptionsPopupComponent);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateBasePropertiesAction } from \"../../../store/properties/base\";\r\nimport { round } from \"lodash\";\r\n\r\n/**\r\n * @typedef {{\r\n * services: {},\r\n * selectedNodeID: number;\r\n * treeData: import(\"../../../store/tree\").ITreeState[\"treeData\"];\r\n * basePropertiesList: import(\"../../../store/properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"../../../store/properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"../../../store/properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"../../../store/entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState;\r\n * updateBasePropertiesAction: typeof updateBasePropertiesAction;\r\n * \r\n * }} PositionGizmoComponentDependencies\r\n */\r\n\r\n\r\n/**\r\n * @param {PositionGizmoComponentDependencies} props \r\n */\r\nconst PositionGizmoComponent = ({ services, selectedNodeID, updateBasePropertiesAction, basePropertiesList }) => {\r\n\r\n    useEffect(() => {\r\n        services.app.stage.addChild(services.gizmoPositionArrows.view);\r\n        services.gizmoPositionArrows.activate();\r\n        return () => {\r\n            services.app.stage.removeChild(services.gizmoPositionArrows.view);\r\n            services.gizmoPositionArrows.deactivate();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!selectedNodeID) {\r\n            return () => { };\r\n        }\r\n\r\n        const handleCameraUpdate = () => {\r\n            const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n            services.gizmoPositionArrows.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n            services.gizmoPositionArrows.setRotation(services.pixiTools.getGlobalRotation(element));\r\n            services.gizmoPositionArrows.setElementRotation(element.rotation);\r\n        };\r\n\r\n        handleCameraUpdate();\r\n\r\n        services.camera.on(\"update\", handleCameraUpdate);\r\n\r\n        return () => services.camera.off(\"update\", handleCameraUpdate);\r\n\r\n    }, [selectedNodeID]);\r\n\r\n\r\n    if (selectedNodeID) {\r\n\r\n        const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n\r\n        services.gizmoPositionArrows.show();\r\n        services.gizmoPositionArrows.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n        services.gizmoPositionArrows.setRotation(services.pixiTools.getGlobalRotation(element));\r\n        services.gizmoPositionArrows.setElementRotation(element.rotation);\r\n\r\n        services.gizmoPositionArrows.onMoved((dx, dy) => {\r\n            const offset = services.camera.applyScale({ x: round(dx), y: round(dy) });\r\n\r\n            const properties = { ...basePropertiesList[selectedNodeID] };\r\n            properties.positionX = round(properties.positionX + offset.x);\r\n            properties.positionY = round(properties.positionY + offset.y);\r\n\r\n            updateBasePropertiesAction({ nodeID: selectedNodeID, properties });\r\n        });\r\n    }\r\n    else {\r\n        services.gizmoPositionArrows.hide();\r\n        services.gizmoPositionArrows.onMoved(null);\r\n    }\r\n\r\n    return (\r\n        <></>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} store \r\n */\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        selectedNodeID: store.tree.selectedNodeID,\r\n        treeData: store.tree.treeData,\r\n        basePropertiesList: store.basePropertiesList,\r\n        spritePropertiesList: store.spritePropertiesList,\r\n        nineSliceSpritePropertiesList: store.nineSliceSpritePropertiesList,\r\n        entityTypesList: store.entityTypesList,\r\n        resourcesList: store.resourcesList,\r\n        graphicsList: store.graphicsList,\r\n        textPropertiesList: store.textPropertiesList\r\n    }\r\n};\r\n\r\n\r\nexport const PositionGizmo = connect(\r\n    mapStateToProps,\r\n    { updateBasePropertiesAction }\r\n)(PositionGizmoComponent)","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateBasePropertiesAction } from \"../../../store/properties/base\";\r\nimport { round } from \"lodash\";\r\n\r\n/**\r\n * @typedef {{\r\n * services: {},\r\n * selectedNodeID: number;\r\n * treeData: import(\"../../../store/tree\").ITreeState[\"treeData\"];\r\n * basePropertiesList: import(\"../../../store/properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"../../../store/properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"../../../store/properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"../../../store/entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState;\r\n * updateBasePropertiesAction: typeof updateBasePropertiesAction;\r\n * }} ScaleGizmoComponentDependencies\r\n */\r\n\r\n\r\n/**\r\n * @param {ScaleGizmoComponentDependencies} props \r\n */\r\nconst ScaleGizmoComponent = ({ services, selectedNodeID, updateBasePropertiesAction, basePropertiesList }) => {\r\n\r\n    useEffect(() => {\r\n        services.app.stage.addChild(services.gizmoScaleBox.view);\r\n        services.gizmoScaleBox.activate();\r\n        return () => {\r\n            services.app.stage.removeChild(services.gizmoScaleBox.view);\r\n            services.gizmoScaleBox.deactivate();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!selectedNodeID) {\r\n            return () => { };\r\n        }\r\n\r\n        const handleCameraUpdate = () => {\r\n            const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n            services.gizmoScaleBox.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n            services.gizmoScaleBox.setRotation(services.pixiTools.getGlobalRotation(element));\r\n        };\r\n\r\n        handleCameraUpdate();\r\n\r\n        services.camera.on(\"update\", handleCameraUpdate);\r\n\r\n        return () => services.camera.off(\"update\", handleCameraUpdate);\r\n\r\n    }, [selectedNodeID]);\r\n\r\n\r\n    if (selectedNodeID) {\r\n\r\n        const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n\r\n        services.gizmoScaleBox.show();\r\n        services.gizmoScaleBox.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n        services.gizmoScaleBox.setRotation(services.pixiTools.getGlobalRotation(element));\r\n\r\n        services.gizmoScaleBox.onMoved((dx, dy) => {\r\n            const x = dx / 100;\r\n            const y = dy / 100;\r\n\r\n            const properties = { ...basePropertiesList[selectedNodeID] };\r\n            properties.scaleX = round(properties.scaleX + x, 2);\r\n            properties.scaleY = round(properties.scaleY + y, 2);\r\n\r\n            updateBasePropertiesAction({ nodeID: selectedNodeID, properties });\r\n        });\r\n    }\r\n    else {\r\n        services.gizmoScaleBox.hide();\r\n        services.gizmoScaleBox.onMoved(null);\r\n    }\r\n\r\n    return (\r\n        <></>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} store \r\n */\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        selectedNodeID: store.tree.selectedNodeID,\r\n        treeData: store.tree.treeData,\r\n        basePropertiesList: store.basePropertiesList,\r\n        spritePropertiesList: store.spritePropertiesList,\r\n        nineSliceSpritePropertiesList: store.nineSliceSpritePropertiesList,\r\n        entityTypesList: store.entityTypesList,\r\n        resourcesList: store.resourcesList,\r\n        graphicsList: store.graphicsList,\r\n        textPropertiesList: store.textPropertiesList\r\n    }\r\n};\r\n\r\n\r\nexport const ScaleGizmo = connect(\r\n    mapStateToProps,\r\n    { updateBasePropertiesAction }\r\n)(ScaleGizmoComponent)","export const DOM_GIZMO_BUTTON_TYPES = {\r\n    MOVE: \"MOVE\",\r\n    SCALE: \"SCALE\",\r\n    ROTATE: \"ROTATE\"\r\n};\r\n\r\nexport class DOMGizmoButtons {\r\n\r\n    /**\r\n     * @param {{move: HTMLInputElement, scale: HTMLInputElement, rotate: HTMLInputElement}} buttons \r\n     */\r\n    constructor(buttons) {\r\n        this._buttons = buttons;\r\n        this._buttons.move.setAttribute(\"data-id\", DOM_GIZMO_BUTTON_TYPES.MOVE);\r\n        this._buttons.resize.setAttribute(\"data-id\", DOM_GIZMO_BUTTON_TYPES.SCALE);\r\n        this._buttons.rotate.setAttribute(\"data-id\", DOM_GIZMO_BUTTON_TYPES.ROTATE);\r\n\r\n        this._onButtonClick = (type) => { }\r\n        this._currentActiveMethod = \"\";\r\n        this._processClick = this._processClick.bind(this);\r\n    }\r\n\r\n    /**\r\n     * @param {(type: DOM_GIZMO_BUTTON_TYPES[keyof DOM_GIZMO_BUTTON_TYPES]) => void} [cb] \r\n     */\r\n    onButtonClicked(cb) {\r\n        this._onButtonClick = cb ? cb : (type) => { }\r\n    }\r\n\r\n    activate() {\r\n        this._buttons.move.addEventListener(\"click\", this._processClick)\r\n        this._buttons.resize.addEventListener(\"click\", this._processClick)\r\n        this._buttons.rotate.addEventListener(\"click\", this._processClick);\r\n    }\r\n\r\n    deactivate() {\r\n        this._buttons.move.removeEventListener(\"click\", this._processClick)\r\n        this._buttons.resize.removeEventListener(\"click\", this._processClick)\r\n        this._buttons.rotate.removeEventListener(\"click\", this._processClick)\r\n    }\r\n\r\n    /**\r\n     * @param {MouseEvent} event \r\n     */\r\n    _processClick(event) {\r\n        const dataID = event.target.getAttribute(\"data-id\");\r\n\r\n        if (this._currentActiveMethod === dataID) {\r\n            event.target.classList.remove(\"selected\");\r\n            this._currentActiveMethod = \"\";\r\n            this._onButtonClick(\"\");\r\n            return;\r\n        }\r\n\r\n        if (dataID) {\r\n            this._currentActiveMethod = dataID;\r\n\r\n            Object.values(this._buttons).forEach(button => button.classList.remove(\"selected\"));\r\n            event.target.classList.add(\"selected\");\r\n            this._onButtonClick(dataID);\r\n        }\r\n    }\r\n}","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateBasePropertiesAction } from \"../../../store/properties/base\";\r\nimport { round } from \"lodash\";\r\nimport { toDegrees } from \"../../../tools/math\";\r\n\r\n/**\r\n * @typedef {{\r\n * services: {},\r\n * selectedNodeID: number;\r\n * treeData: import(\"../../../store/tree\").ITreeState[\"treeData\"];\r\n * basePropertiesList: import(\"../../../store/properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"../../../store/properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"../../../store/properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"../../../store/entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState;\r\n * updateBasePropertiesAction: typeof updateBasePropertiesAction;\r\n * \r\n * }} RotationGizmoComponentDependencies\r\n */\r\n\r\n\r\n/**\r\n * @param {RotationGizmoComponentDependencies} props \r\n */\r\nconst RotationGizmoComponent = ({ services, selectedNodeID, updateBasePropertiesAction, basePropertiesList }) => {\r\n\r\n    useEffect(() => {\r\n        services.app.stage.addChild(services.gizmoRotation.view);\r\n        services.gizmoRotation.activate();\r\n        return () => {\r\n            services.app.stage.removeChild(services.gizmoRotation.view);\r\n            services.gizmoRotation.deactivate();\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!selectedNodeID) {\r\n            return () => { };\r\n        }\r\n\r\n        const handleCameraUpdate = () => {\r\n            const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n            services.gizmoRotation.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n            // services.gizmoRotation.setRotation(services.pixiTools.getGlobalRotation(element));\r\n            // services.gizmoRotation.setElementRotation(element.rotation);\r\n        };\r\n\r\n        handleCameraUpdate();\r\n\r\n        services.camera.on(\"update\", handleCameraUpdate);\r\n\r\n        return () => services.camera.off(\"update\", handleCameraUpdate);\r\n\r\n    }, [selectedNodeID]);\r\n\r\n\r\n    if (selectedNodeID) {\r\n\r\n        const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n\r\n        services.gizmoRotation.show();\r\n        services.gizmoRotation.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n        // services.gizmoRotation.setRotation(services.pixiTools.getGlobalRotation(element));\r\n        // services.gizmoRotation.setElementRotation(element.rotation);\r\n\r\n        services.gizmoRotation.onMoved((angle) => {\r\n            // const offset = services.camera.applyScale({ x: dx, y: dy });\r\n\r\n            const properties = { ...basePropertiesList[selectedNodeID] };\r\n            properties.rotation = round(properties.rotation + toDegrees(angle), 2);\r\n\r\n            updateBasePropertiesAction({ nodeID: selectedNodeID, properties });\r\n        });\r\n    }\r\n    else {\r\n        services.gizmoRotation.hide();\r\n        services.gizmoRotation.onMoved(null);\r\n    }\r\n\r\n    return (\r\n        <></>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} store \r\n */\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        selectedNodeID: store.tree.selectedNodeID,\r\n        treeData: store.tree.treeData,\r\n        basePropertiesList: store.basePropertiesList,\r\n        spritePropertiesList: store.spritePropertiesList,\r\n        nineSliceSpritePropertiesList: store.nineSliceSpritePropertiesList,\r\n        entityTypesList: store.entityTypesList,\r\n        resourcesList: store.resourcesList,\r\n        graphicsList: store.graphicsList,\r\n        textPropertiesList: store.textPropertiesList\r\n    }\r\n};\r\n\r\n\r\nexport const RotationGizmo = connect(\r\n    mapStateToProps,\r\n    { updateBasePropertiesAction }\r\n)(RotationGizmoComponent)","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateBasePropertiesAction } from \"../../../store/properties/base\";\r\nimport { round } from \"lodash\";\r\n\r\n/**\r\n * @typedef {{\r\n * services: {},\r\n * selectedNodeID: number;\r\n * treeData: import(\"../../../store/tree\").ITreeState[\"treeData\"];\r\n * basePropertiesList: import(\"../../../store/properties/base\").IBasePropertiesListState;\r\n * spritePropertiesList: import(\"../../../store/properties/sprite\").ISpritePropertiesListState;\r\n * nineSliceSpritePropertiesList: import(\"../../../store/properties/nineSliceSprite\").INineSliceSpritePropertiesListState;\r\n * graphicsList: import(\"../../../store/properties/graphics\").IGraphicsPropertiesListState;\r\n * textPropertiesList: import(\"../../../store/properties/text\").ITextPropertiesListState;\r\n * entityTypesList: import(\"../../../store/entityTypes\").IEntityTypesListState;\r\n * resourcesList: import(\"../../../store/resources\").IResourcesListState;\r\n * updateBasePropertiesAction: typeof updateBasePropertiesAction;\r\n * \r\n * }} PositionGizmoComponentDependencies\r\n */\r\n\r\n\r\n/**\r\n * @param {PositionGizmoComponentDependencies} props \r\n */\r\nconst ElementBoundsComponent = ({ services, selectedNodeID, updateBasePropertiesAction, basePropertiesList }) => {\r\n\r\n    useEffect(() => {\r\n        services.app.stage.addChild(services.elementBounds.view);\r\n        return () => {\r\n            services.app.stage.removeChild(services.elementBounds.view);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!selectedNodeID) {\r\n            return () => { };\r\n        }\r\n\r\n        const handleCameraUpdate = () => {\r\n            const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n            services.elementBounds.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n            services.elementBounds.setRotation(services.pixiTools.getGlobalRotation(element));\r\n            services.elementBounds.adjustBounds(element, services.camera.getScale());\r\n        };\r\n\r\n        handleCameraUpdate();\r\n\r\n        services.camera.on(\"update\", handleCameraUpdate);\r\n\r\n        return () => services.camera.off(\"update\", handleCameraUpdate);\r\n\r\n    }, [selectedNodeID]);\r\n\r\n\r\n    if (selectedNodeID) {\r\n        const element = services.pixiTools.getChildByName(services.app.stage, String(selectedNodeID));\r\n        services.elementBounds.setPosition(services.pixiTools.getChildRelativePosition(element, services.app.stage));\r\n        services.elementBounds.setRotation(services.pixiTools.getGlobalRotation(element));\r\n        services.elementBounds.adjustBounds(element, services.camera.getScale());\r\n        services.elementBounds.show();\r\n    }\r\n    else {\r\n        services.elementBounds.hide();\r\n    }\r\n\r\n    return (\r\n        <></>\r\n    )\r\n}\r\n\r\n/**\r\n * @param {import(\"../../../store\").IStore} store \r\n */\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        selectedNodeID: store.tree.selectedNodeID,\r\n        treeData: store.tree.treeData,\r\n        basePropertiesList: store.basePropertiesList,\r\n        spritePropertiesList: store.spritePropertiesList,\r\n        nineSliceSpritePropertiesList: store.nineSliceSpritePropertiesList,\r\n        entityTypesList: store.entityTypesList,\r\n        resourcesList: store.resourcesList,\r\n        graphicsList: store.graphicsList,\r\n        textPropertiesList: store.textPropertiesList\r\n    }\r\n};\r\n\r\n\r\nexport const ElementBounds = connect(\r\n    mapStateToProps,\r\n    { updateBasePropertiesAction }\r\n)(ElementBoundsComponent)","import React, { useState, useEffect } from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"../../store\"\r\n\r\nimport { PositionGizmo } from \"./position\";\r\nimport { ScaleGizmo } from \"./scale\";\r\nimport { DOM_GIZMO_BUTTON_TYPES } from \"../../services/DOMGizmoButtons\";\r\nimport { RotationGizmo } from \"./rotation\";\r\nimport { ElementBounds } from \"./bounds\";\r\n\r\n\r\nconst METHODS_TO_GIZMO_MAP = {\r\n    [DOM_GIZMO_BUTTON_TYPES.MOVE]: (props) => <PositionGizmo services={props.services} />,\r\n    [DOM_GIZMO_BUTTON_TYPES.SCALE]: (props) => <ScaleGizmo services={props.services} />,\r\n    [DOM_GIZMO_BUTTON_TYPES.ROTATE]: (props) => <RotationGizmo services={props.services} />,\r\n};\r\n\r\n/**\r\n * @param { {services: {} }} props \r\n */\r\nexport const InteractiveTransformTools = (props) => {\r\n    const [transformMethod, setTransformMethod] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        props.services.gizmoButtons.onButtonClicked((type) => setTransformMethod(type));\r\n        props.services.gizmoButtons.activate();\r\n\r\n        return () => {\r\n            props.services.gizmoButtons.deactivate();\r\n            props.services.gizmoButtons.onButtonClicked(null);\r\n        }\r\n    }, [])\r\n    return (\r\n        /* \r\n              I have to rewrap the <MainScene /> with provider because, apparently, pixi fiber components \r\n              inherently get context from pixi, so I need to set it back. Otherwise, I see: \r\n              `Could not find \"store\" in the context of \"Connect(PositionGizmo)\". something something\r\n          */\r\n        <Provider store={store}>\r\n            <ElementBounds services={props.services}></ElementBounds>\r\n            {\r\n                METHODS_TO_GIZMO_MAP[transformMethod] && METHODS_TO_GIZMO_MAP[transformMethod](props)\r\n            }\r\n        </Provider>\r\n    )\r\n}","import { clamp } from \"lodash\";\r\nimport { utils } from \"pixi.js\";\r\n\r\nconst RIGHT_MOUSE_BUTTON = 2;\r\nconst ZOOM_SPEED = 0.02;\r\n\r\n/**\r\n * Right mouse click and move will move the camera\r\n * Wheel scroll will zoom the camera\r\n * Ctrl + Right mouse click will reset the camera\r\n * \r\n * To remove cursor styles, just remove all those lines\r\n */\r\nexport class ViewCameraController extends utils.EventEmitter {\r\n    /**\r\n     * @param {HTMLCanvasElement} canvas \r\n     * @param {PIXI.Ticker} ticker \r\n     * @param {{ min: number; max: number; }} scaleBounds\r\n     */\r\n    constructor(canvas, ticker, scaleBounds) {\r\n        super();\r\n\r\n        this._canvas = canvas;\r\n        this._ticker = ticker;\r\n        this._scale = scaleBounds;\r\n\r\n        this._needUpdate = false;\r\n        this._isClicked = false;\r\n\r\n        this._cameraPosition = { x: 0, y: 0 };\r\n        this._mouseOldPosition = { x: 0, y: 0 };\r\n\r\n        this._cameraScale = 1;\r\n\r\n        this._onMouseLeave = this._onMouseLeave.bind(this);\r\n        this._onMouseDown = this._onMouseDown.bind(this);\r\n        this._onMouseMove = this._onMouseMove.bind(this);\r\n        this._onMouseUp = this._onMouseUp.bind(this);\r\n        this._onWheel = this._onWheel.bind(this);\r\n    }\r\n\r\n    activate() {\r\n        this._ticker.add(this._update, this);\r\n        this._canvas.addEventListener(\"mouseleave\", this._onMouseLeave);\r\n        this._canvas.addEventListener(\"mousedown\", this._onMouseDown);\r\n        this._canvas.addEventListener(\"mousemove\", this._onMouseMove);\r\n        this._canvas.addEventListener(\"mouseup\", this._onMouseUp);\r\n        this._canvas.addEventListener(\"wheel\", this._onWheel);\r\n    }\r\n\r\n    deactivate() {\r\n        this._ticker.remove(this._update, this);\r\n        this._canvas.removeEventListener(\"mouseleave\", this._onMouseLeave);\r\n        this._canvas.removeEventListener(\"mousedown\", this._onMouseDown);\r\n        this._canvas.removeEventListener(\"mousemove\", this._onMouseMove);\r\n        this._canvas.removeEventListener(\"mouseup\", this._onMouseUp);\r\n        this._canvas.removeEventListener(\"wheel\", this._onWheel);\r\n    }\r\n\r\n    resetCamera() {\r\n        this._canvas.style.cursor = \"default\";\r\n        this._cameraPosition = { x: 0, y: 0 };\r\n        this._mouseOldPosition = { x: 0, y: 0 };\r\n        this._cameraScale = 1;\r\n        this._needUpdate = true;\r\n    }\r\n\r\n    applyScale({ x, y }) {\r\n        return {\r\n            x: x / this._cameraScale,\r\n            y: y / this._cameraScale\r\n        };\r\n    };\r\n\r\n    getScale() {\r\n        return this._cameraScale;\r\n    }\r\n\r\n    _update() {\r\n        if (!this._needUpdate) {\r\n            return;\r\n        }\r\n        this._needUpdate = false;\r\n\r\n        this.emit(\"update\", {\r\n            scale: { x: this._cameraScale, y: this._cameraScale },\r\n            position: { ...this._cameraPosition }\r\n        });\r\n    }\r\n\r\n    _onMouseDown(event) {\r\n\r\n        if (event.ctrlKey && event.button === RIGHT_MOUSE_BUTTON) {\r\n            this.resetCamera();\r\n            return;\r\n        }\r\n\r\n        if (this._isClicked || event.button !== RIGHT_MOUSE_BUTTON) {\r\n            return;\r\n        }\r\n\r\n        this._isClicked = true;\r\n        this._mouseOldPosition = { x: event.x, y: event.y };\r\n        this._canvas.style.cursor = \"move\";\r\n    }\r\n\r\n    _onMouseMove(event) {\r\n        if (!this._isClicked) {\r\n            if (this._canvas.style.cursor.includes(\"zoom\")) {\r\n                this._canvas.style.cursor = \"default\";\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this._canvas.style.cursor.includes(\"zoom\")) {\r\n            this._canvas.style.cursor = \"move\";\r\n        }\r\n\r\n        const x = this._cameraPosition.x + (event.x - this._mouseOldPosition.x);\r\n        const y = this._cameraPosition.y + (event.y - this._mouseOldPosition.y);\r\n\r\n        this._cameraPosition.x = x\r\n        this._cameraPosition.y = y\r\n\r\n        this._mouseOldPosition = { x: event.x, y: event.y };\r\n        this._needUpdate = true;\r\n    }\r\n\r\n    _onMouseUp(event) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        }\r\n\r\n        this._isClicked = false;\r\n        this._canvas.style.cursor = \"default\";\r\n    }\r\n\r\n    _onMouseLeave() {\r\n        this._isClicked = false;\r\n        this._canvas.style.cursor = \"default\";\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {WheelEvent} event \r\n     */\r\n    _onWheel(event) {\r\n        event.preventDefault();\r\n\r\n        const zoomDirection = Math.sign(event.wheelDelta);\r\n\r\n        const previousCameraScale = this._cameraScale;\r\n        const canvasRect = this._canvas.getBoundingClientRect()\r\n        const mousePosition = { x: event.x - canvasRect.left - canvasRect.width / 2, y: event.y - canvasRect.top - canvasRect.height / 2 };\r\n        const newScale = this._cameraScale + (ZOOM_SPEED * zoomDirection);\r\n\r\n        this._cameraScale = clamp(newScale, this._scale.min, this._scale.max);\r\n        const scaleDiff = previousCameraScale - this._cameraScale;\r\n        this._cameraPosition.x -= this._cameraPosition.x * scaleDiff / this._cameraScale - mousePosition.x * scaleDiff;\r\n        this._cameraPosition.y -= this._cameraPosition.y * scaleDiff / this._cameraScale - mousePosition.y * scaleDiff;\r\n\r\n        this._needUpdate = true;\r\n        this._canvas.style.cursor = zoomDirection > 0 ? \"zoom-in\" : \"zoom-out\";\r\n    }\r\n}\r\n","\r\nimport { utils } from \"pixi.js\";\r\n\r\nexport class ViewResizeController extends utils.EventEmitter {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} canvasContainer \r\n     * @param {PIXI.Renderer} renderer \r\n     * @param {{ width: number;, height: number; }} size the the canvas sizes will never be less then specified\r\n     */\r\n    constructor(canvasContainer, renderer, size) {\r\n        super();\r\n\r\n        this.size = { ...size };\r\n\r\n        this._renderer = renderer;\r\n        this._canvasContainer = canvasContainer;\r\n        this._designSize = { ...size };\r\n\r\n        this._observer = new ResizeObserver(() => this.resize());\r\n    }\r\n\r\n    activate() {\r\n        this._observer.observe(this._canvasContainer);\r\n        this.resize();\r\n    }\r\n\r\n    deactivate() {\r\n        this._observer.unobserve(this._canvasContainer);\r\n    }\r\n\r\n    resize() {\r\n        const newSizes = { width: this._canvasContainer.offsetWidth, height: this._canvasContainer.offsetHeight }\r\n        const { width, height } = this._designSize;\r\n\r\n        const containerHeight = newSizes.height;\r\n        const containerWidth = newSizes.width;\r\n\r\n        const isPortrait = containerHeight > containerWidth;\r\n        const gameSize = { width: 0, height: 0 };\r\n\r\n        if (isPortrait) {\r\n            gameSize.width = width | 0;\r\n            gameSize.height = (height * (containerHeight / containerWidth)) | 0;\r\n        } else {\r\n            gameSize.height = height | 0;\r\n            gameSize.width = (width * (containerWidth / containerHeight)) | 0;\r\n        }\r\n\r\n        this._renderer.resize(gameSize.width, gameSize.height);\r\n        this._renderer.view.style.width = `${containerWidth}px`;\r\n        this._renderer.view.style.height = `${containerHeight}px`;\r\n\r\n        this.size = gameSize;\r\n\r\n        this.emit(\"update\", { ...gameSize });\r\n    }\r\n}\r\n","import { Container, Graphics } from \"pixi.js\";\r\n\r\nexport class ViewElementBounds {\r\n    constructor() {\r\n        this.view = new Container();\r\n        this._bounds = new Graphics();\r\n        this.view.addChild(this._bounds);\r\n    }\r\n\r\n    show() {\r\n        this.view.visible = true;\r\n    }\r\n\r\n    hide() {\r\n        this.view.visible = false;\r\n    }\r\n\r\n    setPosition(point) {\r\n        this.view.x = point.x;\r\n        this.view.y = point.y;\r\n    }\r\n\r\n    setRotation(angle) {\r\n        this._bounds.rotation = angle;\r\n    }\r\n\r\n    adjustBounds(element, cameraScale) {\r\n        this._bounds.clear();\r\n\r\n        const x = element._localBoundsRect ? element._localBoundsRect.x * cameraScale : (element.anchor !== undefined ? -element.width * element.anchor.x * cameraScale : 0);\r\n        const y = element._localBoundsRect ? element._localBoundsRect.y * cameraScale : (element.anchor !== undefined ? -element.height * element.anchor.y * cameraScale : 0);\r\n        const width = (element.scale ? element.width * (element.scale.x < 0 && element.width > 0 ? -1 : 1) : element.width) * cameraScale;\r\n        const height = (element.scale ? element.height * (element.scale.y < 0 && element.height > 0 ? -1 : 1) : element.height) * cameraScale;\r\n\r\n        this._bounds.lineStyle(3, 0xff0000)\r\n            .moveTo(x, y)\r\n            .lineTo(x + width, y)\r\n            .lineTo(x + width, y + height)\r\n            .lineTo(x, y + height)\r\n            .lineTo(x, y)\r\n            .endFill();\r\n    }\r\n}\r\n","import { Container, Graphics, Circle, Rectangle } from \"pixi.js\";\r\n\r\nconst MOVE_DIRECTIONS = {\r\n    X_AXIS: \"xAxis\",\r\n    Y_AXIS: \"yAxis\",\r\n    XY_AXIS: \"xyAxis\",\r\n};\r\n\r\nexport class ViewGizmoPositionArrows {\r\n    constructor(ticker) {\r\n\r\n        this.view = new Container();\r\n        this.view.visible = false;\r\n\r\n        const size = 180;\r\n        const arrowSize = 25;\r\n        // Y axis\r\n        this._yAxisArrow = new Graphics().lineStyle(5, 0x00ff00)\r\n            .moveTo(0, 0)\r\n            .lineTo(0, -size)\r\n            .moveTo(0, -size)\r\n            .lineTo(-arrowSize / 2, -size + arrowSize)\r\n            .lineTo(0, -size)\r\n            .lineTo(arrowSize / 2, -size + arrowSize)\r\n            .beginFill(0x00ff00)\r\n            .drawPolygon([0, -size, -arrowSize / 2, -size + arrowSize, arrowSize / 2, -size + arrowSize])\r\n            .endFill();\r\n\r\n        // X axis\r\n        this._xAxisArrow = new Graphics().lineStyle(5, 0x0000ff)\r\n            .moveTo(0, 0)\r\n            .lineTo(size, 0)\r\n            .moveTo(size, 0)\r\n            .lineTo(size - arrowSize, -arrowSize / 2)\r\n            .lineTo(size, 0)\r\n            .lineTo(size - arrowSize, arrowSize / 2)\r\n            .beginFill(0x0000ff)\r\n            .drawPolygon([size, 0, size - arrowSize, -arrowSize / 2, size - arrowSize, arrowSize / 2])\r\n            .endFill();\r\n\r\n        const segmentColors = [0x00ff00, 0x0000ff, 0x0000ff, 0x00ff00]; // colors for each segment\r\n\r\n        // Draw the center rectangle\r\n        this._center = new Graphics();\r\n        this._center.position.set(15, -15)\r\n        // Divide the rectangle into four segments\r\n        const positions = [[-15, -15], [0, -15], [-15, 0], [0, 0]]\r\n\r\n        for (let i = 0; i < segmentColors.length; i++) {\r\n            this._center.beginFill(segmentColors[i]);\r\n            this._center.drawRect(positions[i][0], positions[i][1], 15, 15);\r\n        }\r\n\r\n        this._center.endFill();\r\n\r\n        this.view.addChild(this._yAxisArrow, this._xAxisArrow, this._center);\r\n\r\n        this._axisHitBoxes = {\r\n            [MOVE_DIRECTIONS.X_AXIS]: new Circle(size - arrowSize / 2, 0, arrowSize),\r\n            [MOVE_DIRECTIONS.Y_AXIS]: new Circle(0, -size + arrowSize / 2, arrowSize),\r\n            [MOVE_DIRECTIONS.XY_AXIS]: new Rectangle(0, -30, 30, 30),\r\n        };\r\n\r\n\r\n        this._isClicked = false;\r\n        this._targetAxis = \"\";\r\n        this._oldMousePosition = { x: 0, y: 0 };\r\n        this._offset = { x: 0, y: 0 };\r\n        this._elementRotation = 0;\r\n\r\n        this.view.hitArea = new Rectangle(-20, -190, 200, 200);\r\n\r\n        this.view.interactiveChildren = false;\r\n        this.view.on(\"mousedown\", this._onMouseDown, this);\r\n        this.view.on(\"mousemove\", this._onMouseMove, this);\r\n        this.view.on(\"mouseup\", this._onMouseUp, this);\r\n        this.view.on(\"mouseupoutside\", this._onMouseUp, this);\r\n\r\n        this._needToUpdate = false;\r\n        this._ticker = ticker;\r\n\r\n        this._onMoved = (dx, dy) => { }\r\n    }\r\n\r\n    onMoved(cb) {\r\n        this._onMoved = cb ? cb : (dx, dy) => { };\r\n    }\r\n\r\n    show() {\r\n        this.view.visible = true;\r\n    }\r\n\r\n    hide() {\r\n        this.view.visible = false;\r\n    }\r\n\r\n    activate() {\r\n        this.view.interactive = true;\r\n        this._ticker.add(this._update, this);\r\n    }\r\n\r\n    deactivate() {\r\n        this._ticker.remove(this._update, this);\r\n        this.view.interactive = false;\r\n    }\r\n\r\n    /**\r\n     * To set gizmo position. It will be used for UI\r\n     * @param {{x: number; y: number;}} point \r\n     */\r\n    setPosition(point) {\r\n        this.view.x = point.x;\r\n        this.view.y = point.y;\r\n    }\r\n\r\n    /**\r\n     * To set gizmo rotation. It will be used for UI\r\n     * @param {{x: number; y: number;}} point \r\n     */\r\n    setRotation(angle) {\r\n        this.view.rotation = angle;\r\n    }\r\n\r\n    /**\r\n     * To set selected element rotation. It will be used for actual math. \r\n     * @param {{x: number; y: number;}} point \r\n     */\r\n    setElementRotation(angle) {\r\n        this._elementRotation = angle;\r\n    }\r\n\r\n    _onMouseDown(event) {\r\n        if (this._isClicked) {\r\n            return;\r\n        }\r\n\r\n        const { x, y } = event.data.getLocalPosition(this.view);\r\n        const axisName = Object.keys(this._axisHitBoxes).find(key => this._axisHitBoxes[key].contains(x, y))\r\n\r\n        if (axisName !== undefined) {\r\n            this._isClicked = true;\r\n            this._targetAxis = axisName;\r\n            this._oldMousePosition = { ...event.data.global };\r\n        }\r\n    }\r\n\r\n    _onMouseMove(event) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        const x = event.data.global.x - this._oldMousePosition.x;\r\n        const y = (event.data.global.y - this._oldMousePosition.y);\r\n\r\n        let dx = 0;\r\n        let dy = 0;\r\n\r\n        if (this._targetAxis === MOVE_DIRECTIONS.X_AXIS) {\r\n            dx = x;\r\n            dy = x * Math.tan(this._elementRotation);\r\n        }\r\n        else if (this._targetAxis === MOVE_DIRECTIONS.Y_AXIS) {\r\n            dx = -y * Math.tan(this._elementRotation);\r\n            dy = y;\r\n        }\r\n        else {\r\n            dx = x;\r\n            dy = y;\r\n        }\r\n\r\n        this._oldMousePosition = { ...event.data.global };\r\n        // accumulate the offset, it will be applied in update function\r\n        this._offset.x += dx;\r\n        this._offset.y += dy;\r\n        this._needToUpdate = true;\r\n    }\r\n\r\n    _onMouseUp(event) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        this._isClicked = false;\r\n    }\r\n\r\n    _update() {\r\n        if (!this._needToUpdate) {\r\n            return;\r\n        }\r\n\r\n        this._needToUpdate = false;\r\n\r\n        this._onMoved(this._offset.x, this._offset.y);\r\n\r\n        this._offset = { x: 0, y: 0 };\r\n    }\r\n\r\n};","\r\nimport { Container, Graphics, Rectangle, mesh, Texture, Circle } from \"pixi.js\";\r\n\r\nconst MOVE_DIRECTIONS = {\r\n    X_AXIS: \"xAxis\",\r\n    Y_AXIS: \"yAxis\",\r\n    XY_AXIS: \"xyAxis\",\r\n};\r\n\r\nexport class ViewGizmoRotation {\r\n    constructor(ticker) {\r\n\r\n        this.view = new Container();\r\n        this.view.visible = false;\r\n\r\n        this._innerRadius = 80;\r\n        this._outerRadius = 95;\r\n\r\n        const arc = new Graphics();\r\n        arc.lineStyle(4, 0x00ff00);\r\n        arc.arc(0, 0, this._innerRadius, 0, Math.PI * 2, false);\r\n        arc.lineStyle(4, 0x0000ff);\r\n        arc.arc(0, 0, this._outerRadius, 0, Math.PI * 2, false);\r\n        arc.beginFill(0xff0000, 1);\r\n        arc.drawCircle(0, 0, 5);\r\n        arc.endFill();\r\n\r\n        this.view.addChild(arc);\r\n\r\n        this._segmentStartAngle = 0;\r\n        this._fillSegment = new Graphics();\r\n        this.view.addChild(this._fillSegment);\r\n\r\n        this._isClicked = false;\r\n        this._oldMousePosition = { x: 0, y: 0 };\r\n        this._deltaAngle = 0;\r\n        this._oldAngle = 0;\r\n\r\n        this.view.hitArea = new Circle(0, 0, 100);\r\n\r\n        this.view.interactiveChildren = false;\r\n        this.view.on(\"mousedown\", this._onMouseDown, this);\r\n        this.view.on(\"mousemove\", this._onMouseMove, this);\r\n        this.view.on(\"mouseup\", this._onMouseUp, this);\r\n        this.view.on(\"mouseupoutside\", this._onMouseUp, this);\r\n\r\n        this._needToUpdate = false;\r\n        this._ticker = ticker;\r\n\r\n        this._onMoved = (angle) => { }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {(deltaAngle) => void} [cb] \r\n     */\r\n    onMoved(cb) {\r\n        this._onMoved = cb ? cb : (angle) => { };\r\n    }\r\n\r\n    show() {\r\n        this.view.visible = true;\r\n    }\r\n\r\n    hide() {\r\n        this.view.visible = false;\r\n    }\r\n\r\n    activate() {\r\n        this.view.interactive = true;\r\n        this._ticker.add(this._update, this);\r\n    }\r\n\r\n    deactivate() {\r\n        this._ticker.remove(this._update, this);\r\n        this.view.interactive = false;\r\n    }\r\n\r\n    setPosition(point) {\r\n        this.view.x = point.x;\r\n        this.view.y = point.y;\r\n    }\r\n\r\n    setRotation(angle) {\r\n        this.view.rotation = angle;\r\n    }\r\n\r\n    _onMouseDown(event) {\r\n        if (this._isClicked) {\r\n            return;\r\n        }\r\n\r\n        const { x, y } = event.data.getLocalPosition(this.view);\r\n\r\n        const hypot = Math.hypot(x, y);\r\n\r\n        if (hypot < this._outerRadius && hypot > this._innerRadius) {\r\n            this._isClicked = true;\r\n            this._oldMousePosition = { x, y };\r\n            this._oldAngle = Math.atan2(y, x);\r\n            this._segmentStartAngle = this._oldAngle;\r\n        }\r\n    }\r\n\r\n    _onMouseMove({ data }) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        const { x, y } = data.getLocalPosition(this.view);\r\n\r\n        const segmentEndAngle = Math.atan2(y, x);\r\n\r\n        this._fillSegment.clear()\r\n            .beginFill(0xff0000, 0.5)\r\n            .moveTo(0, 0)\r\n            .arc(0, 0, this._outerRadius, this._segmentStartAngle, segmentEndAngle, false)\r\n            .lineTo(0, 0)\r\n            .endFill();\r\n\r\n        this._deltaAngle = segmentEndAngle - this._oldAngle;\r\n\r\n        this._oldAngle = segmentEndAngle;\r\n        this._oldMousePosition = { x, y };\r\n        this._needToUpdate = true;\r\n    }\r\n\r\n    _onMouseUp(event) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        this._fillSegment.clear();\r\n        this._segmentStartAngle = 0;\r\n        this._oldAngle = 0;\r\n        this._isClicked = false;\r\n    }\r\n\r\n    _update() {\r\n        if (!this._needToUpdate) {\r\n            return;\r\n        }\r\n\r\n        this._needToUpdate = false;\r\n\r\n        this._onMoved(this._deltaAngle);\r\n        this._deltaAngle = 0;\r\n    }\r\n\r\n};\r\n","\r\nimport { Container, Graphics, Rectangle, Circle } from \"pixi.js\";\r\n\r\nconst MOVE_DIRECTIONS = {\r\n    X_AXIS: \"xAxis\",\r\n    Y_AXIS: \"yAxis\",\r\n    XY_AXIS: \"xyAxis\",\r\n};\r\n\r\nexport class ViewGizmoScaleBox {\r\n    constructor(ticker) {\r\n\r\n        this.view = new Container();\r\n        this.view.visible = false;\r\n\r\n        const size = 180;\r\n        const pointerSize = 20;\r\n        // Y axis\r\n        this._yAxisArrow = new Graphics().lineStyle(5, 0x00ff00)\r\n            .moveTo(0, 0)\r\n            .lineTo(0, -size)\r\n            .beginFill(0x00ff00)\r\n            .drawRect(-pointerSize / 2, -size + (-pointerSize / 2), pointerSize, pointerSize)\r\n            .endFill();\r\n\r\n        // X axis\r\n        this._xAxisArrow = new Graphics().lineStyle(5, 0x0000ff)\r\n            .moveTo(0, 0)\r\n            .lineTo(size, 0)\r\n            .beginFill(0x0000ff)\r\n            .drawRect(size - pointerSize / 2, -pointerSize / 2, pointerSize, pointerSize)\r\n            .endFill();\r\n\r\n\r\n        const segmentColors = [0x00ff00, 0x0000ff, 0x0000ff, 0x00ff00]; // colors for each segment\r\n\r\n        // Draw the center rectangle\r\n        this._center = new Graphics();\r\n        this._center.position.set(15, -15)\r\n\r\n        // Divide the rectangle into four segments\r\n        const positions = [[-15, -15], [0, -15], [-15, 0], [0, 0]]\r\n\r\n        for (let i = 0; i < segmentColors.length; i++) {\r\n            this._center.beginFill(segmentColors[i]);\r\n            this._center.drawRect(positions[i][0], positions[i][1], 15, 15);\r\n        }\r\n\r\n        this._center.endFill();\r\n\r\n        this.view.addChild(this._yAxisArrow, this._xAxisArrow, this._center);\r\n\r\n        this._axisHitBoxes = {\r\n            [MOVE_DIRECTIONS.X_AXIS]: new Circle(size, 0, pointerSize),\r\n            [MOVE_DIRECTIONS.Y_AXIS]: new Circle(0, -size, pointerSize),\r\n            [MOVE_DIRECTIONS.XY_AXIS]: new Rectangle(0, -30, 30, 30),\r\n        };\r\n\r\n        this._isClicked = false;\r\n        this._targetAxis = \"\";\r\n        this._oldMousePosition = { x: 0, y: 0 };\r\n        this._offset = { x: 0, y: 0 };\r\n\r\n        this.view.hitArea = new Rectangle(-30, -200, 230, 230);\r\n\r\n        this.view.interactiveChildren = false;\r\n        this.view.on(\"mousedown\", this._onMouseDown, this);\r\n        this.view.on(\"mousemove\", this._onMouseMove, this);\r\n        this.view.on(\"mouseup\", this._onMouseUp, this);\r\n        this.view.on(\"mouseupoutside\", this._onMouseUp, this);\r\n\r\n        this._needToUpdate = false;\r\n        this._ticker = ticker;\r\n\r\n        this._onMoved = (dx, dy) => { }\r\n    }\r\n\r\n    onMoved(cb) {\r\n        this._onMoved = cb ? cb : (dx, dy) => { };\r\n    }\r\n\r\n    show() {\r\n        this.view.visible = true;\r\n    }\r\n\r\n    hide() {\r\n        this.view.visible = false;\r\n    }\r\n\r\n    activate() {\r\n        this.view.interactive = true;\r\n        this._ticker.add(this._update, this);\r\n    }\r\n\r\n    deactivate() {\r\n        this._ticker.remove(this._update, this);\r\n        this.view.interactive = false;\r\n    }\r\n\r\n    setPosition(point) {\r\n        this.view.x = point.x;\r\n        this.view.y = point.y;\r\n    }\r\n\r\n    setRotation(angle) {\r\n        this.view.rotation = angle;\r\n    }\r\n\r\n    _onMouseDown(event) {\r\n        if (this._isClicked) {\r\n            return;\r\n        }\r\n\r\n        const { x, y } = event.data.getLocalPosition(this.view);\r\n        const axisName = Object.keys(this._axisHitBoxes).find(key => this._axisHitBoxes[key].contains(x, y))\r\n\r\n        if (axisName !== undefined) {\r\n            this._isClicked = true;\r\n            this._targetAxis = axisName;\r\n            this._oldMousePosition = { x, y };\r\n        }\r\n    }\r\n\r\n    _onMouseMove({ data }) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        const point = data.getLocalPosition(this.view);\r\n\r\n        let dx = 0;\r\n        let dy = 0;\r\n\r\n        if (this._targetAxis === MOVE_DIRECTIONS.X_AXIS) {\r\n            dx = point.x - this._oldMousePosition.x;\r\n        }\r\n        else if (this._targetAxis === MOVE_DIRECTIONS.Y_AXIS) {\r\n            dy = (point.y - this._oldMousePosition.y) * -1;\r\n        }\r\n        else {\r\n            // I am not very good at math now but imperatively I found the solution to make it work\r\n            // almost the same as in Unity\r\n            dx = point.x - this._oldMousePosition.x;\r\n            dy = (point.y - this._oldMousePosition.y) * -1;\r\n            if (dx <= 0) {\r\n                dx = dy;\r\n            }\r\n            else if (dy <= 0) {\r\n                dy = dx;\r\n            }\r\n            else {\r\n                dx = dy = Math.min(dx, dy);\r\n            }\r\n        }\r\n\r\n        this._oldMousePosition = point;\r\n        // accumulate the offset, it will be applied in update function\r\n        this._offset.x += dx;\r\n        this._offset.y += dy;\r\n\r\n        this._needToUpdate = true;\r\n    }\r\n\r\n    _onMouseUp(event) {\r\n        if (!this._isClicked) {\r\n            return;\r\n        };\r\n\r\n        this._isClicked = false;\r\n    }\r\n\r\n    _update() {\r\n        if (!this._needToUpdate) {\r\n            return;\r\n        }\r\n\r\n        this._needToUpdate = false;\r\n\r\n        this._onMoved(this._offset.x, this._offset.y);\r\n\r\n        this._offset = { x: 0, y: 0 };\r\n    }\r\n\r\n};\r\n","import { Point, DisplayObject } from \"pixi.js\"\r\n\r\n/**\r\n * The instance name of the object.\r\n * @memberof PIXI.DisplayObject#\r\n * @member {string} name\r\n */\r\nDisplayObject.prototype.name = null;\r\n\r\n/**\r\n * Returns the display object in the container.\r\n *\r\n * Recursive searches are done in a preorder traversal.\r\n * @param {PIXI.DisplayObject} element child with the specified name.\r\n * @param {string} name - Instance name.\r\n * @param {boolean}[deep=false] - Whether to search recursively\r\n * @returns {PIXI.DisplayObject} The child with the specified name.\r\n */\r\n\r\nexport const getChildByName = (element, name) => {\r\n    for (let i = 0, j = element.children.length; i < j; i++) {\r\n        if (element.children[i].name === name) {\r\n            return element.children[i];\r\n        }\r\n    }\r\n\r\n\r\n    for (let i = 0, j = element.children.length; i < j; i++) {\r\n        const child = element.children[i];\r\n\r\n        if (!child.getChildByName) {\r\n            continue;\r\n        }\r\n\r\n        const target = getChildByName(child, name);\r\n\r\n        if (target) {\r\n            return target;\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n\r\n/**\r\n * Sometimes it happens that we need to know an element's position\r\n * as if it was added to another container.\r\n * \r\n * \r\n * @param {PIXI.Container} element \r\n * @param {PIXI.Container} newParentElement \r\n * @returns {PIXI.Point}\r\n */\r\nexport const getChildRelativePosition = (element, newParentElement) => {\r\n    const globalPosition = element.toGlobal(new Point());\r\n    const localPosition = newParentElement.toLocal(globalPosition);\r\n    return localPosition;\r\n};\r\n\r\n\r\n/**\r\n * There is no way to get the elements rotation including the parents' rotation\r\n * It is like a global rotation\r\n * @param {PIXI.Container} element \r\n * @param {boolean} [includeOwnRotation]  sometimes it is not necessary to include the elements rotation\r\n * @returns {number}\r\n */\r\nexport const getGlobalRotation = (element, includeOwnRotation = true) => {\r\n    let globalRotation = includeOwnRotation ? element.rotation : 0;\r\n\r\n    let parentContainer = element.parent;\r\n    while (parentContainer) {\r\n        globalRotation += parentContainer.rotation;\r\n        parentContainer = parentContainer.parent;\r\n    }\r\n\r\n    return globalRotation;\r\n};","\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./app.css\";\r\n\r\nimport { Application } from \"pixi.js\";\r\nimport { Stage } from 'react-pixi-fiber';\r\n\r\nimport { Header } from \"./components/header\";\r\nimport { PreviewPanel } from \"./components/preview\";\r\nimport { PropertiesPanel } from \"./components/properties\";\r\nimport { ResourcesOptionsPopup, ResourcesPanel } from \"./components/resources\";\r\nimport { TreeController, TreeOptionsPopup } from \"./components/tree\";\r\n\r\nimport { InteractiveTransformTools } from \"./components/transformTools/InteractiveTransformTools\";\r\nimport { ViewCameraController } from \"./services/ViewCameraController\";\r\nimport { ViewResizeController } from \"./services/ViewResizeController\";\r\n// I have to copy it because the available npm packages incompatible with pixi 4.6.0 this project use \r\nimport { DOMGizmoButtons } from \"./services/DOMGizmoButtons\";\r\nimport { ViewElementBounds } from \"./services/ViewElementBounds\";\r\nimport { ViewGizmoPositionArrows } from \"./services/ViewGizmoPositionArrows\";\r\nimport { ViewGizmoRotation } from \"./services/ViewGizmoRotation\";\r\nimport { ViewGizmoScaleBox } from \"./services/ViewGizmoScaleBox\";\r\nimport { getChildByName, getChildRelativePosition, getGlobalRotation } from \"./services/ViewTools\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport move from \"./assets/icons/move.png\";\r\nimport resize from \"./assets/icons/resize.png\";\r\nimport rotate from \"./assets/icons/rotate.png\";\r\nimport store from \"./store\";\r\n\r\n\r\nexport const App = () => {\r\n  window.addEventListener(\"contextmenu\", (event) => event.preventDefault());\r\n\r\n  const [services, setServices] = useState(null);\r\n  const canvasRef = useRef(null);\r\n  const canvasContainerRef = useRef(null);\r\n  const bottomPanel = useRef(null);\r\n  const bottomSplitBarRef = useRef(null);\r\n  const [isSplitBottomDragActive, setSplitBottomDragActive] = useState(false);\r\n  const gizmoButtons = {\r\n    move: useRef(null),\r\n    resize: useRef(null),\r\n    rotate: useRef(null),\r\n  };\r\n\r\n  useEffect(() => {\r\n    const app = new Application({\r\n      backgroundColor: 0xffffff,\r\n      view: canvasRef.current\r\n    });\r\n\r\n    setServices({\r\n      app,\r\n      camera: new ViewCameraController(app.view, app.ticker, { min: 1 / 8, max: 8 }),\r\n      resize: new ViewResizeController(canvasContainerRef.current, app.renderer, { width: 1280, height: 1280 }),\r\n      elementBounds: new ViewElementBounds(),\r\n      gizmoPositionArrows: new ViewGizmoPositionArrows(app.ticker),\r\n      gizmoScaleBox: new ViewGizmoScaleBox(app.ticker),\r\n      gizmoRotation: new ViewGizmoRotation(app.ticker),\r\n      gizmoButtons: new DOMGizmoButtons({\r\n        move: gizmoButtons.move.current,\r\n        resize: gizmoButtons.resize.current,\r\n        rotate: gizmoButtons.rotate.current,\r\n      }),\r\n      pixiTools: {\r\n        getChildByName,\r\n        getChildRelativePosition,\r\n        getGlobalRotation\r\n      }\r\n    });\r\n\r\n  }, []);\r\n\r\n  const onSplitBottomDrag = (e) => {\r\n    if (!isSplitBottomDragActive) { return; }\r\n    const clientY = Math.max(100, Math.min(window.innerHeight - 100, e.clientY));\r\n    bottomPanel.current.style.height = `${window.innerHeight - clientY}px`;\r\n    canvasContainerRef.current.style.height = `${clientY}px`;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onMouseUp={() => setSplitBottomDragActive(false)}\r\n      onMouseMove={onSplitBottomDrag}>\r\n      <Header />\r\n      <div id=\"left-panel\">\r\n        <TreeController />\r\n      </div>\r\n      <div ref={canvasContainerRef} id=\"center-panel\">\r\n        <canvas ref={canvasRef}></canvas>\r\n        {\r\n          services === null ? null : (\r\n            <Stage app={services.app}>\r\n              <Provider store={store}>\r\n                <PreviewPanel services={services} />\r\n              </Provider>\r\n              <InteractiveTransformTools services={services} />\r\n            </Stage>\r\n          )\r\n        }\r\n      </div>\r\n      <div id=\"gizmo-buttons\">\r\n        <input ref={gizmoButtons.move} type=\"image\" className=\"gizmoButton\" src={move} />\r\n        <input ref={gizmoButtons.resize} type=\"image\" className=\"gizmoButton\" src={resize} />\r\n        <input ref={gizmoButtons.rotate} type=\"image\" className=\"gizmoButton\" src={rotate} />\r\n      </div>\r\n      <div id=\"right-panel\">\r\n        <PropertiesPanel />\r\n      </div>\r\n      <div id=\"bottom-panel\" ref={bottomPanel}>\r\n        <div id=\"split-bar-bottom\" ref={bottomSplitBarRef}\r\n          onMouseDown={() => setSplitBottomDragActive(true)}\r\n          onMouseMove={onSplitBottomDrag}>\r\n        </div>\r\n        <ResourcesPanel />\r\n      </div>\r\n      <TreeOptionsPopup />\r\n      <ResourcesOptionsPopup />\r\n    </div>\r\n  );\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR4nO2ZW0/CQBCFj79MH0QtagUUFUUNPvmLvQty0ajRZwWKazYZkmYz0N3e3E32S+ahJdud02lnzxbA43GWKoXTBAC+AYwB7MFRqgB+AAgKKaYGx9hWRMxjAqABR9inhMWCiACcwHIOEkTExZzCUkIAUw0R85jSGOsYMHedq0T8uA8LeVESbjFCWooYOcY6QqpKN7ZmqEJAv3WpGrtwBMEIcRLhhViGr0hR1KgjDcjR6tKLVUV2KhOvNqLOlptrPlRWbClGFyl6SLFlMG6oOIAmcjCAqu0wEZKWEeOaZS6pqDMGMKLzRVNn7MwkzdwBs5+QF26jPJrM0zAxeWd2aDcnDOMawKpBoms0xnSeMeW4lE3aY4uUcW8g5DHDPOMkn9Yw3FOoIdutLt0M80TkpJdylFLM0HCNCZjuJDRFyBzLedFyIMir4bSZFiifzQ0UT4VpOJm65gWAmXLBWxTPnTKnzOE860UvFTGy25jc2QeKdYNxfUVEBzkhP918AHg19EzxhJ4Nt82fFIndqQzUjuMswguxDF+R//4/5AnADbXdRRWp0DrR03GxZbMC4E1xACEjJFRW7HcaaxVfjJ3h7Hf8WK4T1nHG2JllMaMxVtLRFPML4AqW00rYz0RkRp3geIGYKA8XWzbqh73I5ndCtzJTk+2prTTz+OTp8eB/+ANADavcr/fWTQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR4nO2ZQQrCMBBFP+IV1Hr/dVbxAO7cim31OCOFEQaxNMVJMwnzIJtSS54/8xct4DjOWgIA4nUxfH2Ri/hhMHy9emIrQsSremNKFUm+sRCB/+xiInsAd/H81JXfeCU7AI8tRUpy+CFb2wzjCKDnzUuZqlpLSvSczN8iW5/NSWIQEseFfRRvraUkXgA6zX3kaq1vTgBG3uwgkvhQRWstSaCG1pIzMR2n88x9ZLm1phl48kZGTmYOstpaHSeQImG2taTEM0Fi4gbgCkOt9S0hKzYrlGlpScTUGc4lopUErR127aUFtSIS1raWVZFkXATbJBJLt5YW1MqwUysiwVsLthJJxvrRit5asJUIeWvBViLNDHszItFbCzqJaH1fp9KtpfV9PWz0btpxmuINio26DijFAa0AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/ElEQVR4nO2aW4hNURjHf2TOwYQZl9yepBEKLyjXMmUYymVcyi3x5MGDmgeJ8sCD5JJLKDVvygOJcpnIm0uNJB7cxqU4hQfMGAljjlZ9U9tn7Tn7zFlrzt6n+dXq7Dprr/3997p96/s29FK6DAfqgMPAdeAF8Bn4DfyS6+fANeAQsByojNj2CuAT8BFY5sP4NLAJuCkGZ/Ms7cANYKO0FUYmcM97HNIfqAc+dMP4sGKMrZe2NbquE2qBtw4F6NIMLPUpxLypszmMeCjjfxUwBRgK9JNirqcCq4EjwKMcbZ0GBrgWMhpoCnngF+AgUNWNdieJqNaQth8Ao1wJGSfdrRv7KQKGUDimt47J6qaf89qFkJHAK0tDj2WYuGY68CzCPMp7TtiG00WgHH8MAq66FHLG0kAD0Nex4UuAN3mubJFZHNITrkUgG1y+S3TkIaXnxRNgIH5450vIDsvqNA1/1IasTNlChKQtbofZ4BLHeiWiBagggdxSQsyGlzgqLDvrBBJInRJhnLpEcqAUJrmhUQlZQ0J5qYT4cAp7hBYlZBjxZJ54GveBBbYKf5SQFPGkOWDjXVuFVuWW9CF+pNTLNtvFfxwNVDhPPBmshHy1VTLe7Upgiyd33RVPA0Juk2AWAneAy8DkYhvTSz5MBHYDW4mnY1sVpWK5RMw7J9NO4sM2sakD2BOlN4LLW5vEtorNCOBbwC6TXuiSMhXCN+UkxWefssns7jnZrm4yrssMiss5ZZMJkEQKQOhY7wmKy4aAL9iUIyn0D9XKidxM8ZkL1HQnaD5bds9dMfaEY02lHLMvSVzYG9Wypvvwc+aoqON3R/kXa5q4XR5ifo/LGu+CdZbDXdZXuHav5UFtEsgrZB6VSQova8kAeBtWnT2iy/4u7jNnnbHATGC+HJC6Omd0SCrO6yJTE5JTvBLiuzXI0TlY954l6zVLPjxolBfWI6Rld80Ezs7mTeeKXgbLImJEStzqMSH/rw0R8QMYT8I4JTmXjMSTL8jHBL2UNH8BR3ytEk4rkMsAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\n\r\nimport { App } from './App';\r\n\r\n// redux\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}